(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{2137:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,{Z:function(){return i}})},9152:function(t,e,n){"use strict";n.d(e,{Z:function(){return et}});var r=n(1526),i=Math.abs,o=String.fromCharCode;function a(t){return t.trim()}function s(t,e,n){return t.replace(e,n)}function u(t,e){return t.indexOf(e)}function c(t,e){return 0|t.charCodeAt(e)}function h(t,e,n){return t.slice(e,n)}function l(t){return t.length}function f(t){return t.length}function p(t,e){return e.push(t),t}var d=1,v=1,g=0,y=0,m=0,b="";function w(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:d,column:v,length:a,return:""}}function _(t,e,n){return w(t,e.root,e.parent,n,e.props,e.children,0)}function I(){return m=y>0?c(b,--y):0,v--,10===m&&(v=1,d--),m}function T(){return m=y<g?c(b,y++):0,v++,10===m&&(v=1,d++),m}function E(){return c(b,y)}function S(){return y}function A(t,e){return h(b,t,e)}function k(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N(t){return d=v=1,g=l(b=t),y=0,[]}function C(t){return b="",t}function R(t){return a(A(y-1,x(91===t?t+2:40===t?t+1:t)))}function O(t){for(;(m=E())&&m<33;)T();return k(t)>2||k(m)>3?"":" "}function D(t,e){for(;--e&&T()&&!(m<48||m>102||m>57&&m<65||m>70&&m<97););return A(t,S()+(e<6&&32==E()&&32==T()))}function x(t){for(;T();)switch(m){case t:return y;case 34:case 39:return x(34===t||39===t?t:m);case 40:41===t&&x(t);break;case 92:T()}return y}function P(t,e){for(;T()&&t+m!==57&&(t+m!==84||47!==E()););return"/*"+A(e,y-1)+"*"+o(47===t?t:T())}function L(t){for(;!k(E());)T();return A(t,y)}var M="-ms-",F="-moz-",U="-webkit-",j="comm",V="rule",q="decl";function B(t,e){for(var n="",r=f(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function K(t,e,n,r){switch(t.type){case"@import":case q:return t.return=t.return||t.value;case j:return"";case V:t.value=t.props.join(",")}return l(n=B(t.children,r))?t.return=t.value+"{"+n+"}":""}function G(t,e){switch(function(t,e){return(((e<<2^c(t,0))<<2^c(t,1))<<2^c(t,2))<<2^c(t,3)}(t,e)){case 5103:return U+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return U+t+F+t+M+t+t;case 6828:case 4268:return U+t+M+t+t;case 6165:return U+t+M+"flex-"+t+t;case 5187:return U+t+s(t,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+t;case 5443:return U+t+M+"flex-item-"+s(t,/flex-|-self/,"")+t;case 4675:return U+t+M+"flex-line-pack"+s(t,/align-content|flex-|-self/,"")+t;case 5548:return U+t+M+s(t,"shrink","negative")+t;case 5292:return U+t+M+s(t,"basis","preferred-size")+t;case 6060:return U+"box-"+s(t,"-grow","")+U+t+M+s(t,"grow","positive")+t;case 4554:return U+s(t,/([^-])(transform)/g,"$1-webkit-$2")+t;case 6187:return s(s(s(t,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),t,"")+t;case 5495:case 3959:return s(t,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return s(s(t,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+t+t;case 4095:case 3583:case 4068:case 2532:return s(t,/(.+)-inline(.+)/,U+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(l(t)-1-e>6)switch(c(t,e+1)){case 109:if(45!==c(t,e+4))break;case 102:return s(t,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+F+(108==c(t,e+3)?"$3":"$2-$3"))+t;case 115:return~u(t,"stretch")?G(s(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==c(t,e+1))break;case 6444:switch(c(t,l(t)-3-(~u(t,"!important")&&10))){case 107:return s(t,":",":"+U)+t;case 101:return s(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===c(t,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+M+"$2box$3")+t}break;case 5936:switch(c(t,e+11)){case 114:return U+t+M+s(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return U+t+M+s(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return U+t+M+s(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return U+t+M+t+t}return t}function H(t){return C(z("",null,null,null,[""],t=N(t),0,[0],t))}function z(t,e,n,r,i,a,u,c,h){for(var f=0,d=0,v=u,g=0,y=0,m=0,b=1,w=1,_=1,A=0,k="",N=i,C=a,x=r,M=k;w;)switch(m=A,A=T()){case 34:case 39:case 91:case 40:M+=R(A);break;case 9:case 10:case 13:case 32:M+=O(m);break;case 92:M+=D(S()-1,7);continue;case 47:switch(E()){case 42:case 47:p(Q(P(T(),S()),e,n),h);break;default:M+="/"}break;case 123*b:c[f++]=l(M)*_;case 125*b:case 59:case 0:switch(A){case 0:case 125:w=0;case 59+d:y>0&&l(M)-v&&p(y>32?X(M+";",r,n,v-1):X(s(M," ","")+";",r,n,v-2),h);break;case 59:M+=";";default:if(p(x=W(M,e,n,f,d,i,c,k,N=[],C=[],v),a),123===A)if(0===d)z(M,e,x,x,N,a,v,c,C);else switch(g){case 100:case 109:case 115:z(t,x,x,r&&p(W(t,x,x,0,0,i,c,k,i,N=[],v),C),i,C,v,c,r?N:C);break;default:z(M,x,x,x,[""],C,v,c,C)}}f=d=y=0,b=_=1,k=M="",v=u;break;case 58:v=1+l(M),y=m;default:if(b<1)if(123==A)--b;else if(125==A&&0==b++&&125==I())continue;switch(M+=o(A),A*b){case 38:_=d>0?1:(M+="\f",-1);break;case 44:c[f++]=(l(M)-1)*_,_=1;break;case 64:45===E()&&(M+=R(T())),g=E(),d=l(k=M+=L(S())),A++;break;case 45:45===m&&2==l(M)&&(b=0)}}return a}function W(t,e,n,r,o,u,c,l,p,d,v){for(var g=o-1,y=0===o?u:[""],m=f(y),b=0,_=0,I=0;b<r;++b)for(var T=0,E=h(t,g+1,g=i(_=c[b])),S=t;T<m;++T)(S=a(_>0?y[T]+" "+E:s(E,/&\f/g,y[T])))&&(p[I++]=S);return w(t,e,n,0===o?V:l,p,d,v)}function Q(t,e,n){return w(t,e,n,j,o(m),h(t,2,-2),0)}function X(t,e,n,r){return w(t,e,n,q,h(t,0,r),h(t,r+1,-1),r)}var $=function(t,e){return C(function(t,e){var n=-1,r=44;do{switch(k(r)){case 0:38===r&&12===E()&&(e[n]=1),t[n]+=L(y-1);break;case 2:t[n]+=R(r);break;case 4:if(44===r){t[++n]=58===E()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=o(r)}}while(r=T());return t}(N(t),e))},Y=new WeakMap,J=function(t){if("rule"===t.type&&t.parent&&t.length){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||Y.get(n))&&!r){Y.set(t,!0);for(var i=[],o=$(e,i),a=n.props,s=0,u=0;s<o.length;s++)for(var c=0;c<a.length;c++,u++)t.props[u]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},Z=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}},tt=[function(t,e,n,r){if(!t.return)switch(t.type){case q:t.return=G(t.value,t.length);break;case"@keyframes":return B([_(s(t.value,"@","@"+U),t,"")],r);case V:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return B([_(s(e,/:(read-\w+)/,":-moz-$1"),t,"")],r);case"::placeholder":return B([_(s(e,/:(plac\w+)/,":-webkit-input-$1"),t,""),_(s(e,/:(plac\w+)/,":-moz-$1"),t,""),_(s(e,/:(plac\w+)/,M+"input-$1"),t,"")],r)}return""}))}}],et=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||tt;var o,a,s={},u=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)s[e[n]]=!0;u.push(t)}));var c,h,l=[K,(h=function(t){c.insert(t)},function(t){t.root||(t=t.return)&&h(t)})],p=function(t){var e=f(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}([J,Z].concat(i,l));a=function(t,e,n,r){c=n,B(H(t?t+"{"+e.styles+"}":e.styles),p),r&&(d.inserted[e.name]=!0)};var d={key:e,sheet:new r.m({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend}),nonce:t.nonce,inserted:s,registered:{},insert:a};return d.sheet.hydrate(u),d}},7866:function(t,e){"use strict";e.Z=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}},3801:function(t,e,n){"use strict";n.d(e,{E:function(){return p},T:function(){return h},c:function(){return f},h:function(){return s},w:function(){return c}});var r=n(7294),i=n(9152),o=n(444),a=n(4199),s=Object.prototype.hasOwnProperty,u=(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null),c=(u.Provider,function(t){return(0,r.forwardRef)((function(e,n){var i=(0,r.useContext)(u);return t(e,i,n)}))}),h=(0,r.createContext)({});var l="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(t,e){var n={};for(var r in e)s.call(e,r)&&(n[r]=e[r]);return n[l]=t,n},p=c((function(t,e,n){var i=t.css;"string"===typeof i&&void 0!==e.registered[i]&&(i=e.registered[i]);var u=t[l],c=[i],f="";"string"===typeof t.className?f=(0,o.f)(e.registered,c,t.className):null!=t.className&&(f=t.className+" ");var p=(0,a.O)(c,void 0,"function"===typeof i||Array.isArray(i)?(0,r.useContext)(h):void 0);(0,o.M)(e,p,"string"===typeof u);f+=e.key+"-"+p.name;var d={};for(var v in t)s.call(t,v)&&"css"!==v&&v!==l&&(d[v]=t[v]);return d.ref=n,d.className=f,(0,r.createElement)(u,d)}))},917:function(t,e,n){"use strict";n.d(e,{xB:function(){return c},tZ:function(){return u}});var r=n(7294),i=(n(9152),n(3801)),o=(n(8679),n(444)),a=n(4199),s=n(1526),u=function(t,e){var n=arguments;if(null==e||!i.h.call(e,"css"))return r.createElement.apply(void 0,n);var o=n.length,a=new Array(o);a[0]=i.E,a[1]=(0,i.c)(t,e);for(var s=2;s<o;s++)a[s]=n[s];return r.createElement.apply(null,a)},c=(0,i.w)((function(t,e){var n=t.styles,u=(0,a.O)([n],void 0,"function"===typeof n||Array.isArray(n)?(0,r.useContext)(i.T):void 0),c=(0,r.useRef)();return(0,r.useLayoutEffect)((function(){var t=e.key+"-global",n=new s.m({key:t,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+t+" "+u.name+'"]');return e.sheet.tags.length&&(n.before=e.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",t),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[e]),(0,r.useLayoutEffect)((function(){var t=c.current,n=t[0];if(t[1])t[1]=!1;else{if(void 0!==u.next&&(0,o.M)(e,u.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}e.insert("",u,n,!1)}}),[e,u.name]),null}))},4199:function(t,e,n){"use strict";n.d(e,{O:function(){return v}});var r=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(7866),a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(t){return 45===t.charCodeAt(1)},c=function(t){return null!=t&&"boolean"!==typeof t},h=(0,o.Z)((function(t){return u(t)?t:t.replace(a,"-$&").toLowerCase()})),l=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(s,(function(t,e,n){return p={name:e,styles:n,next:p},e}))}return 1===i[t]||u(t)||"number"!==typeof e||0===e?e:e+"px"};function f(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=f(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":c(a)&&(r+=h(o)+":"+l(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=f(t,e,a);switch(o){case"animation":case"animationName":r+=h(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var u=0;u<a.length;u++)c(a[u])&&(r+=h(o)+":"+l(o,a[u])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=p,o=n(t);return p=i,f(t,e,o)}break;case"string":}if(null==e)return n;var a=e[n];return void 0!==a?a:n}var p,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,o="";p=void 0;var a=t[0];null==a||void 0===a.raw?(i=!1,o+=f(n,e,a)):o+=a[0];for(var s=1;s<t.length;s++)o+=f(n,e,t[s]),i&&(o+=a[s]);d.lastIndex=0;for(var u,c="";null!==(u=d.exec(o));)c+="-"+u[1];return{name:r(o)+c,styles:o,next:p}}},1526:function(t,e,n){"use strict";n.d(e,{m:function(){return r}});var r=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}()},444:function(t,e,n){"use strict";n.d(e,{f:function(){return r},M:function(){return i}});function r(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}var i=function(t,e,n){var r=t.key+"-"+e.name;if(!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles),void 0===t.inserted[e.name]){var i=e;do{t.insert(e===i?"."+r:"",i,t.sheet,!0);i=i.next}while(void 0!==i)}}},8679:function(t,e,n){"use strict";var r=n(1296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,h=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&t(e,i,r)}var a=h(n);l&&(a=a.concat(l(n)));for(var s=u(e),v=u(n),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var m=f(n,y);try{c(e,y,m)}catch(b){}}}}return e}},6103:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,l=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case h:case l:case o:case s:case a:case p:return t;default:switch(t=t&&t.$$typeof){case c:case f:case g:case v:case u:return t;default:return e}}case i:return e}}}function I(t){return _(t)===l}e.AsyncMode=h,e.ConcurrentMode=l,e.ContextConsumer=c,e.ContextProvider=u,e.Element=r,e.ForwardRef=f,e.Fragment=o,e.Lazy=g,e.Memo=v,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return I(t)||_(t)===h},e.isConcurrentMode=I,e.isContextConsumer=function(t){return _(t)===c},e.isContextProvider=function(t){return _(t)===u},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return _(t)===f},e.isFragment=function(t){return _(t)===o},e.isLazy=function(t){return _(t)===g},e.isMemo=function(t){return _(t)===v},e.isPortal=function(t){return _(t)===i},e.isProfiler=function(t){return _(t)===s},e.isStrictMode=function(t){return _(t)===a},e.isSuspense=function(t){return _(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===l||t===s||t===a||t===p||t===d||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===v||t.$$typeof===u||t.$$typeof===c||t.$$typeof===f||t.$$typeof===m||t.$$typeof===b||t.$$typeof===w||t.$$typeof===y)},e.typeOf=_},1296:function(t,e,n){"use strict";t.exports=n(6103)},7544:function(t,e,n){n(3857)},203:function(t,e,n){"use strict";n.d(e,{f:function(){return Eg},Z:function(){return Sg}});var r=n(7757),i=n.n(r),o=n(2137);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;var h=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var p=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function v(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(jd){return!1}}var g=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?m(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new g(i,s,r);return u},t}();function m(t,e){return t.replace(b,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function _(t,e){var n=new I(t,e);return n.subscribe.bind(n)}var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(jd){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(jd){"undefined"!==typeof console&&console.error&&console.error(jd)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function T(){}function E(t){return t&&t._delegate?t._delegate:t}function S(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(jd){o(jd)}}function s(t){try{u(r.throw(t))}catch(jd){o(jd)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function A(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(jd){o=[6,jd],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function k(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function N(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function C(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}Object.create;var R=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),O="[DEFAULT]",D=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new p;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(jd){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(jd){if(r)return null;throw jd}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:O})}catch(jd){}try{for(var r=k(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=N(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(jd){}}}catch(h){e={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=O),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return S(this,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(C(C([],N(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),N(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=O),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=k(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=N(u.value,2),h=c[0],l=c[1];o===this.normalizeInstanceIdentifier(h)&&l.resolve(a)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=k(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===O?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(_d){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=O),this.component?this.component.multipleInstances?t:O:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var x,P=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new D(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function L(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var M,F=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(M||(M={}));var U,j={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},V=M.INFO,q=((x={})[M.DEBUG]="log",x[M.VERBOSE]="log",x[M.INFO]="info",x[M.WARN]="warn",x[M.ERROR]="error",x),B=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=q[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,L(["["+i+"]  "+t.name+":"],n))}},K=function(){function t(t){this.name=t,this._logLevel=V,this._logHandler=B,this._userLogHandler=null,F.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in M))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?j[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,L([this,M.DEBUG],t)),this._logHandler.apply(this,L([this,M.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,L([this,M.VERBOSE],t)),this._logHandler.apply(this,L([this,M.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,L([this,M.INFO],t)),this._logHandler.apply(this,L([this,M.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,L([this,M.WARN],t)),this._logHandler.apply(this,L([this,M.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,L([this,M.ERROR],t)),this._logHandler.apply(this,L([this,M.ERROR],t))},t}();function G(t){F.forEach((function(e){e.setLogLevel(t)}))}var H,z=((U={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",U["bad-app-name"]="Illegal App name: '{$appName}",U["duplicate-app"]="Firebase App named '{$appName}' already exists",U["app-deleted"]="Firebase App named '{$appName}' already deleted",U["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",U["invalid-log-argument"]="First argument to `onLog` must be null or a function.",U),W=new y("app","Firebase",z),Q="@firebase/app",X="[DEFAULT]",$=((H={})[Q]="fire-core",H["@firebase/analytics"]="fire-analytics",H["@firebase/app-check"]="fire-app-check",H["@firebase/auth"]="fire-auth",H["@firebase/database"]="fire-rtdb",H["@firebase/functions"]="fire-fn",H["@firebase/installations"]="fire-iid",H["@firebase/messaging"]="fire-fcm",H["@firebase/performance"]="fire-perf",H["@firebase/remote-config"]="fire-rc",H["@firebase/storage"]="fire-gcs",H["@firebase/firestore"]="fire-fst",H["fire-js"]="fire-js",H["firebase-wrapper"]="fire-js-all",H),Y=new K("@firebase/app"),J=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=f(void 0,t),this.container=new P(e.name),this._addComponent(new R("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=X),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=X),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(jd){Y.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,jd)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw W.create("app-deleted",{appName:this.name_})},t}();J.prototype.name&&J.prototype.options||J.prototype.delete||console.log("dc");function Z(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=X);var a=o.name;if("string"!==typeof a||!a)throw W.create("bad-app-name",{appName:String(a)});if(w(e,a))throw W.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=$[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Y.warn(u.join(" "))}o(new R(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:G,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw W.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=j[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:M[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=F;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!w(e,t=t||X))throw W.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return Y.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[a])throw W.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&f(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}var tt=function t(){var e=Z(J);return e.INTERNAL=s(s({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){f(e,t)},createSubscribe:_,ErrorFactory:y,deepExtend:f}),e}(),et=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var rt=tt.initializeApp;tt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v()&&Y.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),rt.apply(void 0,t)};var it=tt;!function(t,e){t.INTERNAL.registerComponent(new R("platform-logger",(function(t){return new et(t)}),"PRIVATE")),t.registerVersion(Q,"0.6.28",e),t.registerVersion("fire-js","")}(it);var ot=it,at="8.8.0";ot.registerVersion("firebase",at,"app"),ot.SDK_VERSION=at,function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(wt){this.f(wt)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(wt){n.reject(wt)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(qr){o(qr)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Ra(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++m)}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function A(t,e,n){this.code=C+t,this.message=e||R[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new A(e.substring(C.length),t.message,t.serverResponse):null}E(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var N,C="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}N=D("__EID__")?"__EID__":void 0,E(P,Error),P.prototype.name="CustomError",E(L,P),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new F((function(){return new B}),(function(t){t.reset()}));function q(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=K(t,e)}function X(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Y(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=s.navigator;if(lt){var ft=lt.userAgent;if(ft){Z=ft;break t}}Z=""}function pt(t){return ct(Z,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===St&&e||"",this.b=Et}function It(t){return t instanceof _t&&t.constructor===_t&&t.b===Et?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.ta=!0,_t.prototype.sa=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var Tt,Et={},St={};function At(){if(void 0===Tt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){s.console&&s.console.error(n.message)}Tt=t}else Tt=t}return Tt}function kt(t,e){this.a=e===Dt?t:""}function Nt(t){return t instanceof kt&&t.constructor===kt?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=It(t);if(!Ot.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=At();return new kt(t=e?e.createScriptURL(t):t,Dt)}(t=n.replace(Rt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?It(t):encodeURIComponent(String(t))})))}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Rt=/%{(\w+)}/g,Ot=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Dt={};function xt(t,e){this.a=e===Vt?t:""}function Pt(t){return t instanceof xt&&t.constructor===xt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}xt.prototype.ta=!0,xt.prototype.sa=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Lt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Mt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ft=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ut(t){if(t instanceof xt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Ft.test(t))t=new xt(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Mt);t=e&&Lt.test(e[1])?new xt(t,Vt):null}return t}function jt(t){return t instanceof xt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Ft.test(t)||(t="about:invalid#zClosurez"),new xt(t,Vt))}var Vt={},qt=new xt("about:invalid#zClosurez",Vt);function Bt(t,e,n){this.a=n===Kt?t:""}Bt.prototype.ta=!0,Bt.prototype.sa=function(){return this.a.toString()},Bt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Kt={};function Gt(t,e,n,r){return t=t instanceof xt?t:jt(t),e=e||s,n=n instanceof _t?It(n):n||"",e.open(Pt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=l;var Qt,Xt=pt("Opera"),$t=pt("Trident")||pt("MSIE"),Yt=pt("Edge"),Jt=Yt||$t,Zt=pt("Gecko")&&!(ct(Z.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(Z.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=s.document;return t?t.documentMode:void 0}t:{var ne="",re=function(){var t=Z;return Zt?/rv:([^\);]+)(\)|;)/.exec(t):Yt?/Edge\/([\d\.]+)/.exec(t):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):te?/WebKit\/(\S+)/.exec(t):Xt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(re&&(ne=re?re[1]:""),$t){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Qt=String(ie);break t}}Qt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=tt(String(Qt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ht(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ht(0==a[2].length,0==s[2].length)||ht(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(s.document&&$t){var ue=ee();oe=ue||(parseInt(Qt,10)||void 0)}else oe=void 0;var ce=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(da){}var he=!$t||9<=Number(ce);function le(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function fe(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ve.hasOwnProperty(n)?t.setAttribute(ve[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var pe,de,ve={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}G(a?J(o):o,r)}}}function ye(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){s.setTimeout((function(){throw t}),0)}function be(t,e){de||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);de=function(){t.then(Ie)}}else de=function(){var t=Ie;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!pt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(pe||(pe=function(){var t=s.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ye(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),pe(t)):s.setImmediate(t)}}(),we||(de(),we=!0),_e.add(t,e)}var we=!1,_e=new j;function Ie(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){me(e)}U(V,t)}we=!1}function Te(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Fe(n,Se,t)}),(function(t){if(!(t instanceof Ge))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(jd){}Fe(n,Ae,t)}))}catch(r){Fe(this,Ae,r)}}var Ee=0,Se=2,Ae=3;function ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new F((function(){return new ke}),(function(t){t.reset()}));function Ce(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function Re(t){if(t instanceof Te)return t;var e=new Te(l);return Fe(e,Se,t),e}function Oe(t){return new Te((function(e,n){n(t)}))}function De(t,e,n){Ue(t,e,n,null)||be(I(e,t))}function xe(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)De(t[o],I(i,o,!0),I(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ee&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),qe(n,i,Ae,e)))}t.c=null}else Fe(t,Ae,e)}function Le(t,e){t.b||t.a!=Se&&t.a!=Ae||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Me(t,e,n,r){var i=Ce(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(wt){o(wt)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ge?o(e):t(i)}catch(wt){o(wt)}}:o})),i.a.c=t,Le(t,i),i.a}function Fe(t,e,n){t.a==Ee&&(t===n&&(e=Ae,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ue(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Ae||n instanceof Ge||function(t,e){t.g=!0,be((function(){t.g&&Ke.call(null,e)}))}(t,n)))}function Ue(t,e,n,r){if(t instanceof Te)return Le(t,Ce(e||l,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function je(t){t.h||(t.h=!0,be(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function qe(t,e,n,r){if(n==Ae&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Be(e,n,r);else try{e.c?e.g.call(e.f):Be(e,n,r)}catch(jd){Ke.call(null,jd)}U(Ne,e)}function Be(t,e,n){e==Se?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Me(this,d(t)?t:null,d(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(t=Te.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,Le(this,t),this},t.o=function(t,e){return Me(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Ge(t);be((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=Ee,Fe(this,Se,t)},t.ad=function(t){this.a=Ee,Fe(this,Ae,t)},t.gc=function(){for(var t;t=Ve(this);)qe(this,t,this.a,this.i);this.h=!1};var Ke=me;function Ge(t){P.call(this,t)}function He(){0!=ze&&(We[g(this)]=this),this.ya=this.ya,this.pa=this.pa}E(Ge,P),Ge.prototype.name="cancel";var ze=0,We={};function Qe(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=ze)){var e=g(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete We[e]}}He.prototype.ya=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Xe=Object.freeze||function(t){return t},$e=!$t||9<=Number(ce),Ye=$t&&!se("9"),Je=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function Ze(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function tn(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ze.prototype.preventDefault=function(){this.defaultPrevented=!0},E(tn,Ze);var en=Xe({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},tn.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++rn,this.wa=this.Qa=!1}function an(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(an(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=cn(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new on(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),ln={};function fn(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):pn(t,e,n,!1,r,i)}function pn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=_n(t);if(s||(t[hn]=s=new sn(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=wn,e=$e?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Je||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?An(t,e,n,v(r)?!!r.capture:!!r,i):pn(t,e,n,!0,r,i)}function vn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=Tn(n),t&&t[nn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=cn(o=t.a[e],n,r,i))&&(an(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=_n(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&gn(n))}function gn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[nn])un(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_n(e))?(un(n,t),0==n.b&&(n.src=null,e[hn]=null)):an(t)}}}function yn(t){return t in ln?ln[t]:ln[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=_n(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&gn(t),n.call(r,e)}function wn(t,e){if(t.wa)return!0;if(!$e){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new tn(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return bn(t,new tn(e,this))}function _n(t){return(t=t[hn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return d(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function En(){He.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function Sn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function An(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&un(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Cn(t){var e=null;return new Te((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Rn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function On(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(p(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Dn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Dn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(En,He),En.prototype[nn]=!0,En.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){vn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new Ze(t,n);else if(t instanceof Ze)t.target=t.target||n;else{var i=t;mt(t=new Ze(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=kn(a,r,!0,t)&&i}if(i=kn(a=t.b=n,r,!0,t)&&i,i=kn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kn(a=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)an(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Dn.prototype).X=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Mn?(this.i=void 0!==e?e:t.i,Fn(this,t.c),this.l=t.l,this.a=t.a,Un(this,t.g),this.f=t.f,jn(this,ir(t.b)),this.h=t.h):t&&(n=String(t).match(Ln))?(this.i=!!e,Fn(this,n[1]||"",!0),this.l=Gn(n[2]||""),this.a=Gn(n[3]||"",!0),Un(this,n[4]),this.f=Gn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Gn(n[7]||"")):(this.i=!!e,this.b=new Jn(null,this.i))}function Fn(t,e,n){t.c=n?Gn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Un(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Jn?(t.b=e,function(t,e){e&&!t.f&&(Zn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(er(this,e),rr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,$n)),t.b=new Jn(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function qn(t,e){return t.b.get(e)}function Bn(t){return t instanceof Mn?new Mn(t):new Mn(t,void 0)}function Kn(t,e,n,r){var i=new Mn(null,void 0);return t&&Fn(i,t),e&&(i.a=e),n&&Un(i,n),r&&(i.f=r),i}function Gn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Xn:Qn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Yn)),t.join("")},Mn.prototype.resolve=function(t){var e=new Mn(this),n=!!t.c;n?Fn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Un(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,ir(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Qn=/[#\?:]/g,Xn=/[#\?]/g,$n=/[#\?@]/g,Yn=/#/g;function Jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Zn(t){t.a||(t.a=new Dn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tr(t){var e=On(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new Jn(null,void 0);t=Rn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?rr(n,i,o):n.add(i,o)}return n}function er(t,e){Zn(t),e=or(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function nr(t,e){return Zn(t),e=or(t,e),Pn(t.a.b,e)}function rr(t,e,n){er(t,e),0<n.length&&(t.c=null,t.a.set(or(t,e),J(n)),t.b+=n.length)}function ir(t){var e=new Jn;return e.c=t.c,t.a&&(e.a=new Dn(t.a),e.b=t.b),e}function or(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ar(t){var e=[];return ur(new sr,t,e),e.join("")}function sr(){}function ur(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ur(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),lr(r,n),n.push(":"),ur(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":lr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Jn.prototype).add=function(t,e){Zn(this),this.c=null,t=or(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Zn(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Zn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Zn(this);var e=[];if("string"===typeof t)nr(this,t)&&(e=Y(e,this.a.get(or(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return Zn(this),this.c=null,nr(this,t=or(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var cr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(t,e){e.push('"',t.replace(hr,(function(t){var e=cr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),cr[t]=e),e})),'"')}function fr(){var t=Dr();return $t&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function pr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(Ut(t)||qt)),e.location.href=n}function vr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<vr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function gr(t){return!!((t=(t||Dr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function yr(t){t=t||s.window;try{t.close()}catch(e){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Dr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Cr(Dr())==kr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof xt?n:Ut("undefined"!=typeof n.href?n.href:String(n))||qt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=ye(document,"A"),"HTMLAnchorElement"),e=e instanceof xt?e:jt(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Gt("",r,n,a),t=Pt(e),a&&(Jt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Bt(t=(r=At())?r.createHTML(t):t,null,Kt),r=a.document)&&(r.write(function(t){return t instanceof Bt&&t.constructor===Bt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Gt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wr=/^[^@]+@[^@]+$/;function _r(){var t=null;return new Te((function(e){"complete"==s.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw vn(window,"load",t),e}))}function Ir(t){return t=t||Dr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Er(){return"undefined"!==typeof s.WorkerGlobalScope&&"function"===typeof s.importScripts}function Sr(){return ot.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ot.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Ar(){var t=Sr();return"ReactNative"===t||"Node"===t}var kr="Firefox",Nr="Chrome";function Cr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?kr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Nr:"Safari"}var Rr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in Rr)i[Rr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Sr())?r=Cr(i=Dr()):"Worker"===r&&(r=Cr(i=Dr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Dr(){return s.navigator&&s.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=s.localStorage,e=Kr();if(t)return t.setItem(e,"1"),t.removeItem(e),!fr()||!!s.indexedDB}catch(n){return Er()&&!!s.indexedDB}return!1}function Lr(){return(Mr()||"chrome-extension:"===Fr()||Ir())&&!Ar()&&Pr()&&!Er()}function Mr(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return s.location&&s.location.protocol||null}function Ur(t){return!gr(t=t||Dr())&&Cr(t)!=kr}function jr(t){return"undefined"===typeof t?null:ar(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Br(t){if(null!==t)return JSON.parse(t)}function Kr(t){return t||Math.floor(1e9*Math.random()).toString()}function Gr(t){return"Safari"!=Cr(t=t||Dr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Hr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function zr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Dr(),e=Sr(),this.b=gr(t)||"ReactNative"===e}function Wr(){var t=s.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Qr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Xr(){return!(!xr("fireauth.oauthhelper",s)&&!xr("fireauth.iframe",s))}zr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!==typeof t.onLine||!Mr()&&"chrome-extension:"!==Fr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var $r,Yr={};function Jr(t){Yr[t]||(Yr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Zr={};Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:2}),$r=2==Zr.abcd}catch(da){$r=!1}function ti(t,e,n){$r?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ei(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&ti(t,n,e[n])}function ni(t){var e={};return ei(e,t),e}function ri(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)ti(e,n,ri(t[n]));return e}function ii(t){var e=t&&(t[ci]?"phone":null);if(!(e&&t&&t[ui]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");ti(this,"uid",t[ui]),ti(this,"displayName",t[ai]||null);var n=null;t[si]&&(n=new Date(t[si]).toUTCString()),ti(this,"enrollmentTime",n),ti(this,"factorId",e)}function oi(t){try{var e=new hi(t)}catch(n){e=null}return e}ii.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",si="enrolledAt",ui="mfaEnrollmentId",ci="phoneInfo";function hi(t){ii.call(this,t),ti(this,"phoneNumber",t[ci])}function li(t){var e={},n=t[vi],r=t[yi],i=t[mi];if(t=oi(t[gi]),!i||i!=pi&&i!=di&&!n||i==di&&!r||i==fi&&!t)throw Error("Invalid checkActionCode response!");i==di?(e[wi]=n||null,e[Ii]=n||null,e[bi]=r):(e[wi]=r||null,e[Ii]=r||null,e[bi]=n||null),e[_i]=t||null,ti(this,Ei,i),ti(this,Ti,ri(e))}E(hi,ii),hi.prototype.w=function(){var t=hi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var fi="REVERT_SECOND_FACTOR_ADDITION",pi="EMAIL_SIGNIN",di="VERIFY_AND_CHANGE_EMAIL",vi="email",gi="mfaInfo",yi="newEmail",mi="requestType",bi="email",wi="fromEmail",_i="multiFactorInfo",Ii="previousEmail",Ti="data",Ei="operation";function Si(t){var e=qn(t=Bn(t),Ai)||null,n=qn(t,ki)||null,r=qn(t,Ri)||null;if(r=r&&Di[r]||null,!e||!n||!r)throw new A("argument-error",Ai+", "+ki+"and "+Ri+" are required in a valid action code URL.");ei(this,{apiKey:e,operation:r,code:n,continueUrl:qn(t,Ni)||null,languageCode:qn(t,Ci)||null,tenantId:qn(t,Oi)||null})}var Ai="apiKey",ki="oobCode",Ni="continueUrl",Ci="languageCode",Ri="mode",Oi="tenantId",Di={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:fi,signIn:pi,verifyAndChangeEmail:di,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new Si(t)}catch(e){return null}}function Pi(t){var e=t[ji];if("undefined"===typeof e)throw new A("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Li];if(n&&"object"===typeof n){e=n[Bi];var r=n[Vi];if(n=n[qi],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new A("argument-error",Vi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new A("argument-error",qi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new A("argument-error",Bi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new A("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new A("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(e=t[Ui])&&"object"===typeof e){if("string"===typeof(e=e[Ki])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new A("argument-error",Ki+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new A("argument-error",Ui+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Fi])&&"boolean"!==typeof e)throw new A("argument-error",Fi+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Mi])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new A("argument-error",Mi+" property must be a non empty string when specified.");this.i=t||null}var Li="android",Mi="dynamicLinkDomain",Fi="handleCodeInApp",Ui="iOS",ji="url",Vi="installApp",qi="minimumVersion",Bi="packageName",Ki="bundleId";function Gi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Hi=null;function zi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Wi(t){var e=Xi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Qi(t){try{return new Wi(t)}catch(e){return null}}function Xi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=zi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(wt){}return null}Wi.prototype.T=function(){return this.f},Wi.prototype.l=function(){return this.c},Wi.prototype.toString=function(){return this.h};var $i="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Yi=["client_id","response_type","scope","redirect_uri","state"],Ji={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Yi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Yi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Yi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:$i},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Zi(t){for(var e in Ji)if(Ji[e].fa==t)return Ji[e];return null}function to(t){var e={};e["facebook.com"]=oo,e["google.com"]=so,e["github.com"]=ao,e["twitter.com"]=uo;var n=t&&t[no];try{if(n)return e[n]?new e[n](t):new io(t);if("undefined"!==typeof t[eo])return new ro(t)}catch(r){}return null}var eo="idToken",no="providerId";function ro(t){var e=t[no];if(!e&&t[eo]){var n=Qi(t[eo]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),ti(this,"providerId",e),ti(this,"isNewUser",n)}function io(t){ro.call(this,t),ti(this,"profile",ri((t=Br(t.rawUserInfo||"{}"))||{}))}function oo(t){if(io.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(io.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",this.profile&&this.profile.login||null)}function so(t){if(io.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(t){if(io.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",t.screenName||null)}function co(t){var e=Bn(t),n=qn(e,"link"),r=qn(Bn(n),"link");return e=qn(e,"deep_link_id"),qn(Bn(e),"link")||e||r||n||t}function ho(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?lo:fo}E(io,ro),E(oo,io),E(ao,io),E(so,io),E(uo,io);var lo="enroll",fo="signin";function po(){}function vo(t,e){return t.then((function(t){if(t[is]){var n=Qi(t[is]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new A("user-mismatch"):t}))}function go(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,ti(this,"providerId",t),ti(this,"signInMethod",t)}function yo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function mo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new go(t.providerId,t.pendingToken)}catch(e){}return null}function bo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&ti(this,"idToken",e.idToken),e.accessToken&&ti(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&ti(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");ti(this,"accessToken",e.oauthToken),ti(this,"secret",e.oauthTokenSecret)}ti(this,"providerId",t),ti(this,"signInMethod",n)}function wo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:tr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function _o(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new bo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Io(t,e){this.Qc=e||[],ei(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Zi(t)||{}).Ja||null,this.pb=null}function To(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');Io.call(this,t,[])}function Eo(t){Io.call(this,t,Yi),this.a=[]}function So(){Eo.call(this,"facebook.com")}function Ao(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function ko(){Eo.call(this,"github.com")}function No(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new ko).credential({accessToken:e})}function Co(){Eo.call(this,"google.com"),this.Ca("profile")}function Ro(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Co).credential({idToken:n,accessToken:e})}function Oo(){Io.call(this,"twitter.com",$i)}function Do(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bo("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,ti(this,"providerId","password"),ti(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Lo(){ei(this,{providerId:"password",isOAuthProvider:!1})}function Mo(t,e){if(!(e=Fo(e)))throw new A("argument-error","Invalid email link!");return new xo(t,e.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function Fo(t){return(t=xi(t=co(t)))&&t.operation===pi?t:null}function Uo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new A("internal-error");this.a=t,ti(this,"providerId","phone"),this.fa="phone",ti(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Uo(e)}return null}function Vo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function qo(t){try{this.a=t||ot.auth()}catch(e){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ei(this,{providerId:"phone",isOAuthProvider:!1})}function Bo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Uo({fb:t,eb:e})}function Ko(t){if(t.temporaryProof&&t.phoneNumber)return new Uo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Ro(o,n);case"facebook.com":return Ao(n);case"github.com":return No(n);case"twitter.com":return Do(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new go(e,a):new bo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Eo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Go(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Ho(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function zo(t){return(t=t||{}).type?new Ho(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Wo(){this.b=null,this.a=[]}ho.prototype.Ha=function(){return this.a?Re(this.a):Re(this.b)},ho.prototype.w=function(){return this.type==lo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},po.prototype.ka=function(){},po.prototype.b=function(){},po.prototype.c=function(){},po.prototype.w=function(){},go.prototype.ka=function(t){return As(t,yo(this))},go.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,ks(t,n)},go.prototype.c=function(t,e){return vo(Ns(t,yo(this)),e)},go.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bo.prototype.ka=function(t){return As(t,wo(this))},bo.prototype.b=function(t,e){var n=wo(this);return n.idToken=e,ks(t,n)},bo.prototype.c=function(t,e){return vo(Ns(t,wo(this)),e)},bo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Io.prototype.Ka=function(t){return this.Jb=gt(t),this},E(To,Io),E(Eo,Io),Eo.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},Eo.prototype.Rb=function(){return J(this.a)},Eo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new bo(this.providerId,n,this.providerId)},E(So,Eo),ti(So,"PROVIDER_ID","facebook.com"),ti(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(ko,Eo),ti(ko,"PROVIDER_ID","github.com"),ti(ko,"GITHUB_SIGN_IN_METHOD","github.com"),E(Co,Eo),ti(Co,"PROVIDER_ID","google.com"),ti(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Oo,Io),ti(Oo,"PROVIDER_ID","twitter.com"),ti(Oo,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Ms,{email:this.a,oobCode:this.f}):cu(t,iu,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Fs,{idToken:e,email:this.a,oobCode:this.f}):cu(t,$s,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return vo(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ei(Lo,{PROVIDER_ID:"password"}),ei(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ei(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Uo.prototype.ka=function(t){return t.gb(Vo(this))},Uo.prototype.b=function(t,e){var n=Vo(this);return n.idToken=e,cu(t,au,n)},Uo.prototype.c=function(t,e){var n=Vo(this);return n.operation="REAUTH",vo(t=cu(t,su,n),e)},Uo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},qo.prototype.gb=function(t,e){var n=this.a.a;return Re(e.verify()).then((function(r){if("string"!==typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==lo?i.Ha().then((function(t){return function(t,e){return cu(t,Js,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==fo?i.Ha().then((function(e){return function(t,e){return cu(t,Zs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return cu(t,Qs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ei(qo,{PROVIDER_ID:"phone"}),ei(qo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ho.prototype.T=function(){return this.h},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Qo,Xo=null;function $o(t){var e="unauthorized-domain",n=void 0,r=Bn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Yo(t,e,n){A.call(this,t,n),(t=e||{}).Kb&&ti(this,"email",t.Kb),t.ea&&ti(this,"phoneNumber",t.ea),t.credential&&ti(this,"credential",t.credential),t.$b&&ti(this,"tenantId",t.$b)}function Jo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Ko(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Yo(e,n,t.message)}return null}function Zo(){}function ta(t){return t.c||(t.c=t.b())}function ea(){}function na(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(jd){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ra(){}function ia(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Tb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function oa(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function aa(t,e,n){this.reset(t,e,n,void 0,void 0)}E($o,A),E(Yo,A),Yo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Yo.prototype.toJSON=function(){return this.w()},Zo.prototype.c=null,E(ea,Zo),ea.prototype.a=function(){var t=na(this);return t?new ActiveXObject(t):new XMLHttpRequest},ea.prototype.b=function(){var t={};return na(this)&&(t[0]=!0,t[1]=!0),t},Qo=new ea,E(ra,Zo),ra.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ia;throw Error("Unsupported browser")},ra.prototype.b=function(){return{}},(t=ia.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,oa(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",oa(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,oa(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},aa.prototype.a=null;function sa(t){this.f=t,this.b=this.c=this.a=null}function ua(t,e){this.name=t,this.value=e}aa.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||T(),delete this.a},ua.prototype.toString=function(){return this.name};var ca=new ua("SEVERE",1e3),ha=new ua("WARNING",900),la=new ua("CONFIG",700),fa=new ua("FINE",500);function pa(t){return t.c?t.c:t.a?pa(t.a):(M("Root logger has no level set."),null)}sa.prototype.log=function(t,e,n){if(t.value>=pa(this).value)for(d(e)&&(e=e()),t=new aa(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var da,va={},ga=null;function ya(t){var e;if(ga||(ga=new sa(""),va[""]=ga,ga.c=la),!(e=va[t])){e=new sa(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ya(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,va[t]=e}return e}function ma(t,e){t&&t.log(fa,e,void 0)}function ba(t){this.f=t}function wa(t){En.call(this),this.u=t,this.h=void 0,this.readyState=_a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ya("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ba,Zo),ba.prototype.a=function(){return new wa(this.f)},ba.prototype.b=(da={},function(){return da}),E(wa,En);var _a=0;function Ia(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Ta(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Ea(t)}function Ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Sa(t){En.call(this),this.headers=new Dn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Aa,this.u=this.S=!1}(t=wa.prototype).open=function(t,e){if(this.readyState!=_a)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Ea(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ta(this)),this.readyState=_a},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ea(this)),this.a&&(this.readyState=3,Ea(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,Ia(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Ta(this):Ea(this),3==this.readyState&&Ia(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Ta(this))},t.sc=function(t){this.a&&(this.response=t,Ta(this))},t.Va=function(t){var e=this.i;e&&e.log(ha,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Ta(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ha,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ha,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(Sa,En);var Aa="";Sa.prototype.b=ya("goog.net.XhrIo");var ka=/^https?$/i,Na=["POST","PUT"];function Ca(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Qo.a(),t.C=t.D?ta(t.D):ta(Qo),t.a.onreadystatechange=_(t.Wb,t);try{ma(t.b,Ua(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return ma(t.b,Ua(t,"Error opening Xhr: "+a.message)),void Oa(t,a)}e=r||"";var o=new Dn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"===typeof t)G(t,e,void 0);else for(var n=On(t),r=Rn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ra,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!Q(Na,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{La(t),0<t.g&&(t.u=function(t){return $t&&se(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),ma(t.b,Ua(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),ma(t.b,Ua(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ma(t.b,Ua(t,"Send error: "+a.message)),Oa(t,a)}}function Ra(t){return"content-type"==t.toLowerCase()}function Oa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Da(t),Pa(t)}function Da(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xa(t){if(t.c&&"undefined"!=typeof a)if(t.C[1]&&4==Ma(t)&&2==Fa(t))ma(t.b,Ua(t,"Local request error detected and ignored"));else if(t.i&&4==Ma(t))Nn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ma(t)){ma(t.b,Ua(t,"Request complete")),t.c=!1;try{var e,n=Fa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ka.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ma(t)?t.a.statusText:""}catch(h){ma(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Fa(t)+"]",Da(t)}}finally{Pa(t)}}}function Pa(t,e){if(t.a){La(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(jd){(t=t.b)&&t.log(ca,"Problem encountered resetting onreadystatechange: "+jd.message,void 0)}}}function La(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ma(t){return t.a?t.a.readyState:0}function Fa(t){try{return 2<Ma(t)?t.a.status:-1}catch(e){return-1}}function Ua(t,e){return e+" ["+t.P+" "+t.l+" "+Fa(t)+"]"}function ja(t){var e=$a;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Va(t,e,n){t.a=!0,t.c=n,t.f=!e,Ga(t)}function qa(t){if(t.a){if(!t.v)throw new Ha(t);t.v=!1}}function Ba(t,e,n,r){t.g.push([e,n,r]),t.a&&Ga(t)}function Ka(t){return W(t.g,(function(t){return d(t[1])}))}function Ga(t){if(t.h&&t.a&&Ka(t)){var e=t.h,n=Qa[e];n&&(s.clearTimeout(n.a),delete Qa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"===typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ka(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof ja?(Ba(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Wa(e),Qa[e.a]=e,t.h=e.a)}function Ha(){P.call(this)}function za(){P.call(this)}function Wa(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=Sa.prototype).Ma=function(){"undefined"!=typeof a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ma(this.b,Ua(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ma(this.b,Ua(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Pa(this,!0)),Sa.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?xa(this):this.Jc())},t.Jc=function(){xa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Aa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ca,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ma(this.b,"Can not get response: "+e.message),null}},ja.prototype.cancel=function(t){if(this.a)this.c instanceof ja&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new za(this),qa(this),Va(this,!1,t))}},ja.prototype.m=function(t,e){this.i=!1,Va(this,t,e)},ja.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Ba(this,r,(function(t){t instanceof za?o.cancel():i(t)})),o.then(t,e,n)},ja.prototype.$goog_Thenable=!0,E(Ha,P),Ha.prototype.message="Deferred has already fired",Ha.prototype.name="AlreadyCalledError",E(za,P),za.prototype.message="Deferred was canceled",za.prototype.name="CanceledError",Wa.prototype.c=function(){throw delete Qa[this.a],this.b};var Qa={};function Xa(t){var e={},n=e.document||document,r=Nt(t).toString(),i=ye(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new ja(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){Ya(i,!0);var t=new ts(Za,"Timeout reached for loading script "+r);qa(a),Va(a,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ya(i,e.xd||!1,u),qa(a),Va(a,!0,null))},i.onerror=function(){Ya(i,!0,u);var t=new ts(Ja,"Error while loading script "+r);qa(a),Va(a,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=h(e.document):(null===c&&(c=h(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function $a(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ya(t,!0,this.Ma)}}function Ya(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ja=0,Za=1;function ts(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function es(t){this.f=t}function ns(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||os,this.g=gt(t.secureTokenHeaders||as),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ss,this.a=gt(t.firebaseHeaders||us),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Sr(),!(n=s.XMLHttpRequest||n&&ot.INTERNAL.node&&ot.INTERNAL.node.XMLHttpRequest)&&!Er())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new ba(self):Ar()?this.f=new es(n):this.f=new ra,this.b=null}E(ts,P),E(es,Zo),es.prototype.a=function(){return new this.f},es.prototype.b=function(){return{}};var rs,is="idToken",os=new zr(3e4,6e4),as={"Content-Type":"application/x-www-form-urlencoded"},ss=new zr(3e4,6e4),us={"Content-Type":"application/json"};function cs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function hs(t,e){e&&(t.l=ls("https://securetoken.googleapis.com/v1/token",e),t.h=ls("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ls("https://identitytoolkit.googleapis.com/v2/",e))}function ls(t,e){return t=Bn(t),e=Bn(e.url),t.f=t.a+t.f,Fn(t,e.c),t.a=e.a,Un(t,e.g),t.toString()}function fs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ps(t,e,n,r,i,o,a){(function(){var t=Dr();return!((t=Cr(t)!=Nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!$t||!ce||9<ce)})()||Er()?t=_(t.u,t):(rs||(rs=new Te((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[vs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ba(t,null,e,void 0)}(Xa(Ct(ds,{onload:vs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,a)}ns.prototype.T=function(){return this.b},ns.prototype.u=function(t,e,n,r,i,o){if(Er()&&("undefined"===typeof s.fetch||"undefined"===typeof s.Headers||"undefined"===typeof s.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Sa(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Sn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ma(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(wt){t=null}e&&e(t)})),An(a,"ready",(function(){u&&clearTimeout(u),Qe(this)})),An(a,"timeout",(function(){u&&clearTimeout(u),Qe(this),e&&e(null)})),Ca(a,t,n,r,i)};var ds=new _t(St,"https://apis.google.com/js/client.js?onload=%{onload}"),vs="__fcb"+Math.floor(1e6*Math.random()).toString();function gs(t,e,n,r,i,o,a){var s=Bn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Te((function(e,n){ps(t,s.toString(),(function(t){t?t.error?n(lu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:ar(Vr(i)),t.a,t.v.get())}))}function ys(t){if("string"!==typeof(t=t.email)||!wr.test(t))throw new A("invalid-email")}function ms(t){"email"in t&&ys(t)}function bs(t){if(!t[is]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,gt(t));throw new A("internal-error")}}function ws(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}ns.prototype.s=function(t,e,n,r,i){var o=this;rs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ns.prototype.Ab=function(){return cu(this,Ys,{})},ns.prototype.Cb=function(t,e){return cu(this,Xs,{idToken:t,email:e})},ns.prototype.Db=function(t,e){return cu(this,$s,{idToken:t,password:e})};var _s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Is(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function Ts(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function Es(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(nr(t=new Jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ss(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Jo(t)):t.errorMessage&&(e=hu(t.errorMessage)),e)throw e;bs(t)}function As(t,e){return e.returnIdpCredential=!0,cu(t,tu,e)}function ks(t,e){return e.returnIdpCredential=!0,cu(t,nu,e)}function Ns(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,cu(t,eu,e)}function Cs(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=ns.prototype).Eb=function(t,e){var n={idToken:t},r=[];return dt(_s,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),cu(this,Xs,n)},t.wb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),cu(this,Gs,t)},t.xb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),cu(this,qs,t)},t.vb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),cu(this,Bs,t)},t.Fb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),cu(this,Ks,t)},t.gb=function(t){return cu(this,ou,t)},t.ob=function(t,e){return cu(this,Ws,{oobCode:t,newPassword:e})},t.Sa=function(t){return cu(this,Os,{oobCode:t})},t.kb=function(t){return cu(this,Rs,{oobCode:t})};var Rs={endpoint:"setAccountInfo",A:Cs,Z:"email",B:!0},Os={endpoint:"resetPassword",A:Cs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},Ds={endpoint:"signupNewUser",A:function(t){if(ys(t),!t.password)throw new A("weak-password")},G:bs,V:!0,B:!0},xs={endpoint:"createAuthUri",B:!0},Ps={endpoint:"deleteAccount",O:["idToken"]},Ls={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Ms={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ys,G:bs,V:!0,B:!0},Fs={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ys,G:bs,V:!0},Us={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:Is,G:bs,B:!0,Na:!0},js={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:Is,G:bs,B:!0,Na:!0},Vs={endpoint:"getAccountInfo"},qs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");ys(t)},Z:"email",B:!0},Bs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Ks={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");ys(t)},Z:"email",B:!0},Hs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},zs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Ws={endpoint:"resetPassword",A:Cs,Z:"email",B:!0},Qs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Xs={endpoint:"setAccountInfo",O:["idToken"],A:ms,V:!0},$s={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ms(t),!t.password)throw new A("weak-password")},G:bs,V:!0},Ys={endpoint:"signupNewUser",G:bs,V:!0,B:!0},Js={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Zs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},tu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:Ss,V:!0,B:!0},eu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw hu(t.errorMessage);bs(t)},V:!0,B:!0},nu={endpoint:"verifyAssertion",A:function(t){if(Ts(t),!t.idToken)throw new A("internal-error")},Za:Es,G:Ss,V:!0},ru={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:bs,V:!0,B:!0},iu={endpoint:"verifyPassword",A:function(t){if(ys(t),!t.password)throw new A("wrong-password")},G:bs,V:!0,B:!0},ou={endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},au={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");ws(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Jo(t);bs(t)}},su={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},uu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[is]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function cu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.O))return Oe(new A("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Re(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),gs(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function hu(t){return lu({error:{errors:[{message:t}],code:400,message:t}})}function lu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=jr(t)),new A("internal-error",e)}function fu(t){this.b=t,this.a=null,this.sb=function(t){return(gu||(gu=new Te((function(t,e){function n(){Hr(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Hr(),e(Error("Network Error"))},timeout:du.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},Re(Xa(r=Ct(pu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw gu=null,t})))).then((function(){return new Te((function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),vu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var pu=new _t(St,"https://apis.google.com/js/api.js?onload=%{onload}"),du=new zr(3e4,6e4),vu=new zr(5e3,15e3),gu=null;function yu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Kn((t=Bn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Kn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function mu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function bu(t){try{return ot.app(t).auth().Ga()}catch(e){return[]}}function wu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function _u(t){var e=pr();return function(t){return cu(t,Hs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Bn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Bn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:br.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new $o(pr())}))}function Iu(t){return t.m||(t.m=_r().then((function(){if(!t.u){var e=t.c,n=t.i,r=bu(t.b),i=new yu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=J(r||[]),t.u=i.toString()}t.v=new fu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=zo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Re(n)}return n.status="ERROR",Re(n)}))}(t)}))),t.m}function Tu(t){return t.l||(t.C=t.c?Or(t.c,bu(t.b)):null,t.l=new ns(t.g,D(t.i),t.C),t.f&&hs(t.l,t.f)),t.l}function Eu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new mu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=gt(u||null),t.f=c,t.zb(h).toString()}function Su(t){if(this.a=t||ot.INTERNAL.reactNative&&ot.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Au(t){this.b=t,this.a={},this.f=_(this.c,this)}yu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):er(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},mu.prototype.zb=function(t){return this.h=t,this},mu.prototype.toString=function(){if(this.v){var t=Bn(this.v.url);t=Kn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Kn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=ot.app(this.c).auth().la()}catch(s){n=null}for(var r in e.pb=n,Vn(t,"providerId",this.a.providerId),e=Vr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=gt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),vt(e)||Vn(t,"customParameters",jr(e))}if("function"===typeof this.a.Rb&&((n=this.a.Rb()).length&&Vn(t,"scopes",n.join(","))),this.l?Vn(t,"redirectUrl",this.l):er(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):er(t.b,"eventId"),this.i?Vn(t,"v",this.i):er(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!qn(t,a)&&Vn(t,a,this.b[a]);return this.h?Vn(t,"tid",this.h):er(t.b,"tid"),this.f?Vn(t,"eid",this.f):er(t.b,"eid"),(a=bu(this.c)).length&&Vn(t,"fw",a.join(",")),t.toString()},(t=wu.prototype).Pb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return Iu(t).then((function(){return function(t,e){return t.sb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&yr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Te((function(e){return function n(){Cn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Cn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Dr();return!Ur(t)&&!Gr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Oe(new A("popup-blocked"));if(a&&!Ur())return this.ma().o((function(e){yr(t),i(e)})),r(),Re();this.a||(this.a=_u(Tu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw yr(t),i(e),e}));return r(),e})).then((function(){(Go(n),a)||dr(Eu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=_u(Tu(this)));var i=this;return this.a.then((function(){Go(e),dr(Eu(i.s,i.g,i.b,t,e,pr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return Iu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new A("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){$(this.h,(function(e){return e==t}))},(t=Su.prototype).get=function(t){return Re(this.a.getItem(t)).then((function(t){return t&&Br(t)}))},t.set=function(t,e){return Re(this.a.setItem(t,jr(e)))},t.U=function(t){return Re(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var ku,Nu=[];function Cu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ru(t){this.a=t}function Ou(t){this.c=t,this.b=!1,this.a=[]}function Du(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Oe(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return xu(t,c),e})).o((function(e){throw xu(t,c),e}))}function xu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function Pu(){if(!Uu())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Er()&&self?(this.v=function(){var t=Er()?self:null;if(G(Nu,(function(n){n.b==t&&(e=n)})),!e){var e=new Au(t);Nu.push(e)}return e}(),Cu(this.v,"keyChanged",(function(e,n){return Ku(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Cu(this.v,"ping",(function(){return Re(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Re().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Re(null)}().then((function(e){(t.h=e)&&(t.g=new Ou(new Ru(e)),Du(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Lu(t){return new Te((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Lu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Mu(t){return t.i||(t.i=Lu(t)),t.i}function Fu(t,e){var n=0;return new Te((function r(i,o){Mu(t).then(e).then(i).o((function(e){if(!(3<++n))return Mu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Uu(){try{return!!s.indexedDB}catch(da){return!1}}function ju(t){return t.objectStore("firebaseLocalStorage")}function Vu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function qu(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Bu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Du(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Re()}function Ku(t){return Mu(t).then((function(t){var e=ju(Vu(t,!1));return e.getAll?qu(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=vr(t.c,n),t.c=n}return r}))}function Gu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Hu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Re().then((function(){if(Uu()){var t=Kr(),r="__sak"+t;return ku||(ku=new Pu),(n=ku).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){G(e.a,(function(e){e(t)}))})),t}))}function zu(){this.a={},this.type="inMemory"}function Wu(){if(!function(){var t="Node"==Sr();if(!(t=Qu()||t&&ot.INTERNAL.node&&ot.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Sr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Qu()||ot.INTERNAL.node.localStorage,this.type="localStorage"}function Qu(){try{var t=s.localStorage,e=Kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Xu(){this.type="nullStorage"}function $u(){if(!function(){var t="Node"==Sr();if(!(t=Yu()||t&&ot.INTERNAL.node&&ot.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Sr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Yu()||ot.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Yu(){try{var t=s.sessionStorage,e=Kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Ju(){var t={};t.Browser=ec,t.Node=nc,t.ReactNative=rc,t.Worker=ic,this.a=t[Sr()]}Au.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(Re().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Ru.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ou.prototype.close=function(){for(;0<this.a.length;)xu(this,this.a[0]);this.b=!0},(t=Pu.prototype).set=function(t,e){var n=this,r=!1;return Fu(this,(function(e){return qu((e=ju(Vu(e,!0))).get(t))})).then((function(i){return Fu(n,(function(o){if(o=ju(Vu(o,!0)),i)return i.value=e,qu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,qu(o.add(a))}))})).then((function(){return n.c[t]=e,Bu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Fu(this,(function(e){return qu(ju(Vu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Fu(this,(function(r){return n=!0,e.b++,qu(ju(Vu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Bu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Ku(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Gu(t),e()}(this),this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&Gu(this)},(t=Hu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t}))},(t=zu.prototype).get=function(t){return Re(this.a[t])},t.set=function(t,e){return this.a[t]=e,Re()},t.U=function(t){return delete this.a[t],Re()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return Re().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Re().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Re().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&fn(s.window,"storage",t)},t.ia=function(t){s.window&&vn(s.window,"storage",t)},(t=Xu.prototype).get=function(){return Re(null)},t.set=function(){return Re()},t.U=function(){return Re()},t.ca=function(){},t.ia=function(){},(t=$u.prototype).get=function(t){var e=this;return Re().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Re().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Re().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Zu,tc,ec={F:Wu,cb:$u},nc={F:Wu,cb:$u},rc={F:Su,cb:Xu},ic={F:Wu,cb:Xu},oc={rd:"local",NONE:"none",td:"session"};function ac(){var t=!(Gr(Dr())||!Tr()),e=Ur(),n=Pr();this.m=t,this.h=e,this.l=n,this.a={},Zu||(Zu=new Ju),t=Zu;try{this.g=!fr()&&Xr()||!s.indexedDB?new t.a.F:new Hu(Er()?new zu:new t.a.F)}catch(r){this.g=new zu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new zu}this.v=new zu,this.f=_(this.Zb,this),this.b={}}function sc(){return tc||(tc=new ac),tc}function uc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function cc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function hc(t,e,n){return n=cc(e,n),"local"==e.F&&(t.b[n]=null),uc(t,e.F).U(n)}function lc(t){t.c&&(clearInterval(t.c),t.c=null)}function fc(t){this.a=t,this.b=sc()}(t=ac.prototype).get=function(t,e){return uc(this,t.F).get(cc(t,e))},t.set=function(t,e,n){var r=cc(t,n),i=this,o=uc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=cc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),vt(this.a)&&(uc(this,"local").ca(this.f),this.h||(fr()||!Xr())&&s.indexedDB||!this.l||function(t){lc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new tn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=cc(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(uc(this,"local").ia(this.f),lc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?uc(this,"local").ia(this.f):lc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},$t&&ce&&10==ce&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,_(this.nb,this))},t.nb=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var pc,dc={name:"authEvent",F:"local"};function vc(){this.a=sc()}function gc(t,e){this.b=yc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===pc&&(pc=s.Int32Array?new Int32Array(Ec):Ec),this.reset()}E(gc,(function(){this.b=-1}));for(var yc=64,mc=yc-1,bc=[],wc=0;wc<mc;wc++)bc[wc]=0;var _c=Y(128,bc);function Ic(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|pc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Tc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Ic(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Ic(t),i=0)}}t.c=i,t.g+=n}gc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):J(this.h)};var Ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Sc(){gc.call(this,8,Ac)}E(Sc,gc);var Ac=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function kc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new vc,this.g=new fc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Nc(t){return new A("invalid-cordova-configuration",t)}function Cc(t){var e=new Sc;Tc(e,t),t=[];var n=8*e.g;56>e.c?Tc(e,_c,56-e.c):Tc(e,_c,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Ic(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Rc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Oc(t){return t.f||(t.f=t.ma().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Dc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=co(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Br(qn(o=Bn(i),"firebaseError")||null))?k(o):null)?new Ho(r.c,r.b,null,null,o,null,r.T()):new Ho(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Rc(t,i)}))}var n=new Ho("unknown",null,null,null,new A("no-auth-event")),r=!1,i=Cn(500).then((function(){return Dc(t).then((function(){r||Rc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Xo||(Xo=new Wo),function(t){var e=Xo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=xr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Dc(t){var e=null;return function(t){return t.b.get(dc,t.a).then((function(t){return zo(t)}))}(t.g).then((function(n){return e=n,hc((n=t.g).b,dc,n.a)})).then((function(){return e}))}function xc(t){this.a=t,this.b=sc()}(t=kc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Ir(void 0)?_r().then((function(){return new Te((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof xr("universalLinks.subscribe",s))throw Nc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof xr("BuildInfo.packageName",s))throw Nc("cordova-plugin-buildinfo is not installed");if("function"!==typeof xr("cordova.plugins.browsertab.openUrl",s))throw Nc("cordova-plugin-browsertab is not installed");if("function"!==typeof xr("cordova.InAppBrowser.open",s))throw Nc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Pb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),Re()},t.Nb=function(){return Oe(new A("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Oe(new A("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Re().then((function(){return Go(e),Oc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ho(e,r,null,o,new A("no-auth-event"),null,i),u=xr("BuildInfo.packageName",s);if("string"!==typeof u)throw new A("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",s),h={};if(Dr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Dr().toLowerCase().match(/android/))return Oe(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Cc(o),h.sessionId=o;var l=Eu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(dc,a.w(),e)})).then((function(){var e=xr("cordova.plugins.browsertab.isAvailable",s);if("function"!==typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=xr("cordova.plugins.browsertab.openUrl",s)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!==typeof(n=xr("cordova.InAppBrowser.open",s)))throw new A("invalid-cordova-configuration");e=Dr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",s);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Cn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Wr()&&c()},o.addEventListener("resume",c,!1),Dr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Dc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Oc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ho("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Ta=function(t){$(this.b,(function(e){return e==t}))};var Pc={name:"pendingRedirect",F:"session"};function Lc(t){return hc(t.b,Pc,t.a)}function Mc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Yc,this.C=new nh,this.g=new xc(Xc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Fc(this.D,this.v,this.m,N,this.J)}function Fc(t,e,n,r,i){var o=ot.SDK_VERSION||null;return Ir()?new kc(t,e,n,o,r,i):new wu(t,e,n,o,r,i)}function Uc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function jc(t){t.a.Yb()&&Uc(t).o((function(e){var n=new Ho("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)})),t.a.Ub()||Jc(t.b)}function Vc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Pc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Lc(t.g).then((function(){Uc(t).o((function(e){var n=new Ho("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)}))})):jc(t)})).o((function(){jc(t)}))}function qc(t,e){$(t.h,(function(t){return t==e}))}Mc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Fc(this.D,this.v,this.m,null,this.J),this.i={}},Mc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Jc(this.b),e};var Bc=new zr(2e3,1e4),Kc=new zr(3e4,6e4);function Gc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Hc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function zc(t,e,n,r,i){var o;return function(t){return t.b.set(Pc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Hc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Lc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Te((function(){})):Lc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Wc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Bc.get())}Mc.prototype.ra=function(){return this.b.ra()};var Qc={};function Xc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function $c(t,e,n,r){var i=Xc(e,n,r);return Qc[i]||(Qc[i]=new Mc(t,e,n,r)),Qc[i]}function Yc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Jc(t){t.g||(t.g=!0,eh(t,!1,null,null))}function Zc(t){t.g&&!t.i&&eh(t,!1,null,null)}function th(t,e){if(t.b=function(){return Re(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function eh(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):th(t,n):th(t,{user:null}),t.f=[],t.c=[]}function nh(){}function rh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function ih(t,e){this.a=e,ti(this,"verificationId",t)}function oh(t,e,n,r){return new qo(t).gb(e,n).then((function(t){return new ih(t,r)}))}function ah(t){var e=Xi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ei(this,{token:t,expirationTime:Qr(1e3*e.exp),authTime:Qr(1e3*e.auth_time),issuedAtTime:Qr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function sh(t,e,n){var r=e&&e[ch];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new ho(null,r),this.b=[];var i=this;G(e[uh]||[],(function(t){(t=oi(t))&&i.b.push(t)})),ti(this,"auth",this.a),ti(this,"session",this.c),ti(this,"hints",this.b)}Yc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Yc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(eh(this,!0,null,t.a),Re()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){eh(t,s,e,null)})).o((function(e){eh(t,s,null,e)}))}(this,t,e):Oe(new A("invalid-auth-event")):(eh(this,!1,null,null),Re())}else Oe(new A("invalid-auth-event"))},Yc.prototype.ra=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=Cn(Kc.get()).then((function(){t.b||(t.g=!0,eh(t,!0,null,e))}))}(t))}))},nh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Re()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Oe(new A("invalid-auth-event"))}else Oe(new A("invalid-auth-event"))},ih.prototype.confirm=function(t){return t=Bo(this.verificationId,t),this.a(t)};var uh="mfaInfo",ch="mfaPendingCredential";function hh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new sh(t,e,n),ti(this,"resolver",this.b)}function lh(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new hh(e,t.serverResponse,n,t.message)}catch(r){}return null}function fh(){}function ph(t){ti(this,"factorId",t.fa),this.a=t}function dh(t){if(ph.call(this,t),this.a.fa!=qo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function vh(t,e){for(var n in Ze.call(this,t),e)this[n]=e[n]}function gh(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ui]=t.uid),t.displayName&&(r[ai]=t.displayName),t.enrollmentTime&&(r[si]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ci]=t.phoneNumber);try{e=new hi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),yh(this,n)}function yh(t,e){t.b=e,ti(t,"enrolledFactors",e)}function mh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bh(t,e){t.stop(),t.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Wr()||!t?Re():new Te((function(n){e=function(){Wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){bh(t,!0)})).o((function(e){t.i(e)&&bh(t,!1)}))}function wh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function _h(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function Ih(t,e){t.b=Qi(e[is]||""),t.a=e.refreshToken,_h(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function Th(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ps(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(lu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",tr(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Qi(e.access_token),t.a=e.refresh_token,_h(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Eh(t,e){this.a=t||null,this.b=e||null,ei(this,{lastSignInTime:Qr(e||null),creationTime:Qr(t||null)})}function Sh(t,e,n,r,i,o){ei(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Ah(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=ot.SDK_VERSION?Or(ot.SDK_VERSION):null;this.a=new ns(this.l,D(N),r),(this.u=t.emulatorConfig||null)&&hs(this.a,this.u),this.h=new wh(this.a),Lh(this,e[is]),Ih(this.h,e),ti(this,"refreshToken",this.h.a),Uh(this,n||{}),En.call(this),this.P=!1,this.s&&Lr()&&(this.b=$c(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new mh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=_(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){kh(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Rh(i,t.f)},this.ja=null,this.S=new gh(this,n),ti(this,"multiFactor",this.S)}function kh(t,e){t.u=e,hs(t.a,e),t.b&&(e=t.b,t.b=$c(t.s,t.l,t.m,t.u),t.P&&(qc(e,t),Vc(t.b,t)))}function Nh(t,e){t.qa&&vn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&fn(e,"languageCodeChanged",t.Pa)}function Ch(t,e){t.$&&vn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&fn(e,"emulatorConfigChanged",t.Ba)}function Rh(t,e){t.aa=e,fs(t.a,ot.SDK_VERSION?Or(ot.SDK_VERSION,t.aa):null)}function Oh(t,e){t.ja&&vn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&fn(e,"frameworkChanged",t.Oa)}function Dh(t){try{return ot.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function xh(t){t.J||t.D.b||(t.D.start(),vn(t,"tokenChanged",t.ba),fn(t,"tokenChanged",t.ba))}function Ph(t){vn(t,"tokenChanged",t.ba),t.D.stop()}function Lh(t,e){t.Aa=e,ti(t,"_lat",e)}function Mh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return xe(e).then((function(){return t}))}function Fh(t){t.b&&!t.P&&(t.P=!0,Vc(t.b,t))}function Uh(t,e){ei(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Eh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function jh(){}function Vh(t){return Re().then((function(){if(t.J)throw new A("app-deleted")}))}function qh(t){return z(t.providerData,(function(t){return t.providerId}))}function Bh(t,e){e&&(Kh(t,e.providerId),t.providerData.push(e))}function Kh(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function Gh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&ti(t,e,n)}function Hh(t,e){t!=e&&(ei(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?ti(t,"metadata",function(t){return new Eh(t.a,t.b)}(e.metadata)):ti(t,"metadata",new Eh),G(e.providerData,(function(e){Bh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),ti(t,"refreshToken",t.h.a),yh(t.S,e.S.b))}function zh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return cu(t.a,Vs,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Gh(t,"isAnonymous",!1),e}))}))}function Wh(t,e){e[is]&&t.Aa!=e[is]&&(Ih(t.h,e),t.dispatchEvent(new vh("tokenChanged")),Lh(t,e[is]),Gh(t,"refreshToken",t.h.a))}function Qh(t,e){return zh(t).then((function(){if(Q(qh(t),e))return Mh(t).then((function(){throw new A("provider-already-linked")}))}))}function Xh(t,e,n){return ni({user:t,credential:Ko(e),additionalUserInfo:e=to(e),operationType:n})}function $h(t,e){return Wh(t,e),t.reload().then((function(){return t}))}function Yh(t,e,n,r,i){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return Oe(t.i);var o=Zi(n.providerId),a=Kr(t.uid+":::"),s=null;(!Ur()||Tr())&&t.s&&n.isOAuthProvider&&(s=Eu(t.s,t.l,t.m,e,n,null,a,ot.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=mr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Zh(t),!i)return t.I().then((function(){}))})).then((function(){return Gc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new Te((function(n,r){t.na(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Wc(t.b,t,e,u,a)}))})).then((function(t){return u&&yr(u),t?ni(t):null})).o((function(t){throw u&&yr(u),t})),tl(t,r,i)}function Jh(t,e,n,r,i){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return Oe(t.i);var o=null,a=Kr(t.uid+":::");return r=r().then((function(){if(Zh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Mh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(rl,t.w(),e.a)),e})).then((function(){return zc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return il(t.ha);throw o})).then((function(){if(o)throw o})),tl(t,r,i)}function Zh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function tl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Oe(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new vh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){X(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),Dh(t),_(t.jc,t))),n||e}))}function el(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[is]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Ah(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&Bh(i,ni(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function nl(t){this.a=t,this.b=sc()}sh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[uh],delete n[ch],mt(n,t),e.g(n)}))},E(hh,A),fh.prototype.tb=function(t,e,n){return e.type==lo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Vo(t.a)}),cu(e,Us,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Vo(t.a)}),cu(e,js,n)}))}(this,t,e)},E(ph,fh),E(dh,ph),E(vh,Ze),(t=gh.prototype).yc=function(t){yh(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=oi(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ho(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Wh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return cu(r,uu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return yh(e,r),Wh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},mh.prototype.start=function(){this.a=this.c,bh(this,!0)},mh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},wh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Th(this,{grant_type:"refresh_token",refresh_token:this.a}):Re(null):Re({accessToken:this.b.toString(),refreshToken:this.a})},Eh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(Ah,En),Ah.prototype.xa=function(t){this.za=t,cs(this.a,t)},Ah.prototype.la=function(){return this.za},Ah.prototype.Ga=function(){return J(this.aa)},Ah.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},ti(Ah.prototype,"providerId","firebase"),(t=Ah.prototype).reload=function(){var t=this;return tl(this,Vh(this).then((function(){return zh(t).then((function(){return Mh(t)})).then(jh)})))},t.oc=function(t){return this.I(t).then((function(t){return new ah(t)}))},t.I=function(t){var e=this;return tl(this,Vh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.Aa&&(Lh(e,t.accessToken),e.dispatchEvent(new vh("tokenChanged"))),Gh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Uh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new Sh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Bh(this,e[n]);Gh(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new vh("userReloaded",{hd:t}))},t.Lc=function(t){return Jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return tl(this,t.c(this.a,this.uid).then((function(t){return Wh(e,t),n=Xh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return tl(this,Qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Xh(e,t,"link"),$h(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return tl(this,Qh(this,"phone").then((function(){return oh(Dh(n),t,e,_(n.rb,n))})))},t.Mc=function(t,e){var n=this;return tl(this,Re().then((function(){return oh(Dh(n),t,e,_(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.ed=function(t){var e=this;return tl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Wh(e,t),e.reload()})))},t.Db=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Vh(this);var e=this;return tl(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Wh(e,t),Gh(e,"displayName",t.displayName||null),Gh(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&(ti(t,"displayName",e.displayName),ti(t,"photoURL",e.photoURL))})),Mh(e)})).then(jh))},t.cd=function(t){var e=this;return tl(this,zh(this).then((function(n){return Q(qh(e),t)?function(t,e,n){return cu(t,Ls,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(qh(e),(function(t){n[t]||Kh(e,t)})),n[qo.PROVIDER_ID]||ti(e,"phoneNumber",null),Mh(e)})):Mh(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return tl(this,this.I().then((function(e){return cu(t.a,Ps,{idToken:e})})).then((function(){t.dispatchEvent(new vh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Nh(t,null),Ch(t,null),Oh(t,null),t.N=[],t.J=!0,Ph(t),ti(t,"refreshToken",null),t.b&&qc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Mb,this):null},t.Ec=function(t){var e=this;return Yh(this,"linkViaPopup",t,(function(){return Qh(e,t.providerId).then((function(){return Mh(e)}))}),!1)},t.Nc=function(t){return Yh(this,"reauthViaPopup",t,(function(){return Re()}),!0)},t.Fc=function(t){var e=this;return Jh(this,"linkViaRedirect",t,(function(){return Qh(e,t.providerId)}),!1)},t.Oc=function(t){return Jh(this,"reauthViaRedirect",t,(function(){return Re()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,this.I().then((function(n){return ks(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Xh(i,t,"link"),$h(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,Re().then((function(){return vo(Ns(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Xh(i,t,"reauthenticate"),Wh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return tl(this,this.I().then((function(e){return n=e,"undefined"===typeof t||vt(t)?{}:Gi(new Pi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return tl(this,this.I().then((function(t){return r=t,"undefined"===typeof e||vt(e)?{}:Gi(new Pi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return tl(this,t=vo(Re(t),n.uid).then((function(t){return e=Xh(n,t,"reauthenticate"),Wh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.S.w()),t};var rl={name:"redirectUser",F:"session"};function il(t){return hc(t.b,rl,t.a)}function ol(t){this.a=t,this.b=sc(),this.c=null,this.f=function(t){var e=ul("local"),n=ul("session"),r=ul("none");return function(t,e,n){var r=cc(e,n),i=uc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Br(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(sl,t.a).then((function(t){return t?ul(t):e}))}))}))})).then((function(e){return t.c=e,al(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ul("local"),this.a,_(this.g,this))}function al(t,e){var n,r=[];for(n in oc)oc[n]!==e&&r.push(hc(t.b,ul(oc[n]),t.a));return r.push(hc(t.b,sl,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)De(t[s],I(o,s),a);else e(i)}))}(r)}ol.prototype.g=function(){var t=this,e=ul("local");fl(this,(function(){return Re().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return al(t,"local").then((function(){t.c=e}))}))}))};var sl={name:"persistence",F:"session"};function ul(t){return{name:"authUser",F:t}}function cl(t,e){return fl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function hl(t){return fl(t,(function(){return hc(t.b,t.c,t.a)}))}function ll(t,e,n){return fl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),el(t||{})}))}))}function fl(t,e){return t.f=t.f.then(e,e),t.f}function pl(t){if(this.l=!1,ti(this,"settings",new rh),ti(this,"app",t),!Il(this).options||!Il(this).options.apiKey)throw new A("invalid-api-key");t=ot.SDK_VERSION?Or(ot.SDK_VERSION):null,this.a=new ns(Il(this).options&&Il(this).options.apiKey,D(N),t),this.P=[],this.s=[],this.N=[],this.Pa=ot.INTERNAL.createSubscribe(_(this.zc,this)),this.W=void 0,this.ib=ot.INTERNAL.createSubscribe(_(this.Ac,this)),wl(this,null),this.i=new ol(Il(this).options.apiKey+":"+Il(this).name),this.D=new nl(Il(this).options.apiKey+":"+Il(this).name),this.$=Al(this,function(t){var e=Il(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(rl,t.a).then((function(t){return t&&e&&(t.authDomain=e),el(t||{})}))}(t.D,Il(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),il(t.D)}));return Al(t,e)}(t).then((function(){return ll(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return cl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:hl(t.i)}))):null})).then((function(e){wl(t,e||null)}));return Al(t,n)}(this)),this.h=Al(this,function(t){return t.$.then((function(){return ml(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ul("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.qa=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=Il(t).options.authDomain,n=Il(t).options.apiKey;e&&Lr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=$c(e,n,Il(t).name,t.R),Vc(t.b,t),Tl(t)&&Fh(Tl(t)),t.m){Fh(t.m);var r=t.m;r.xa(t.la()),Nh(r,t),Rh(r=t.m,t.J),Oh(r,t),kh(r=t.m,t.R),Ch(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Bn(this.R.url);t=ni({protocol:t.c,host:t.a,port:t.g,options:ni({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function dl(t){Ze.call(this,"languageCodeChanged"),this.h=t}function vl(t){Ze.call(this,"emulatorConfigChanged"),this.c=t}function gl(t){Ze.call(this,"frameworkChanged"),this.f=t}function yl(t){return t.Oa||Oe(new A("auth-domain-config-required"))}function ml(t){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));var e=yl(t).then((function(){return t.b.ra()})).then((function(t){return t?ni(t):null}));return Al(t,e)}function bl(t,e){var n={};return n.apiKey=Il(t).options.apiKey,n.authDomain=Il(t).options.authDomain,n.appName=Il(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new Ah(t,e);return n&&(i.ha=n),r&&Rh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return Tl(t)&&e.uid==Tl(t).uid?(Hh(Tl(t),e),t.da(e)):(wl(t,e),Fh(e),t.da(e))})).then((function(){Sl(t)}))}function wl(t,e){Tl(t)&&(function(t,e){$(t.W,(function(t){return t==e}))}(Tl(t),t.Ba),vn(Tl(t),"tokenChanged",t.qa),vn(Tl(t),"userDeleted",t.za),vn(Tl(t),"userInvalidated",t.Aa),Ph(Tl(t))),e&&(e.W.push(t.Ba),fn(e,"tokenChanged",t.qa),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.u&&xh(e)),ti(t,"currentUser",e),e&&(e.xa(t.la()),Nh(e,t),Rh(e,t.J),Oh(e,t),kh(e,t.R),Ch(e,t))}function _l(t,e){var n=null,r=null;return Al(t,e.then((function(e){return n=Ko(e),r=to(e),bl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),t,_(t.kc,t))),n||e})).then((function(){return ni({user:Tl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Il(t){return t.app}function Tl(t){return t.currentUser}function El(t){return Tl(t)&&Tl(t)._lat||null}function Sl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](El(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](El(t))}}function Al(t,e){return t.P.push(e),e.oa((function(){X(t.P,e)})),e}function kl(){}function Nl(){this.a={},this.b=1e12}ol.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in oc)if(oc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Sr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Uu()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),fl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,al(n,t)})).then((function(){if(n.c=ul(t),e)return n.b.set(n.c,e,n.a)})):Re()}))},E(pl,En),E(dl,Ze),E(vl,Ze),E(gl,Ze),(t=pl.prototype).yb=function(t){return Al(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,cs(this.a,this.aa),this.dispatchEvent(new dl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&_r().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,hs(this.a,this.R),this.dispatchEvent(new vl(this.R))}},t.Gc=function(t){this.J.push(t),fs(this.a,ot.SDK_VERSION?Or(ot.SDK_VERSION,this.J):null),this.dispatchEvent(new gl(this.J))},t.Ga=function(){return J(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:Il(this).options.apiKey,authDomain:Il(this).options.authDomain,appName:Il(this).name,currentUser:Tl(this)&&Tl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return _l(i,As(i.a,o))}))},t.Xc=function(t){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));var e=this,n=Zi(t.providerId),r=Kr(),i=null;(!Ur()||Tr())&&Il(this).options.authDomain&&t.isOAuthProvider&&(i=Eu(Il(this).options.authDomain,Il(this).options.apiKey,Il(this).name,"signInViaPopup",t,null,r,ot.SDK_VERSION||null,null,null,this.T(),this.R));var o=mr(i,n&&n.va,n&&n.ua);return Al(this,n=yl(this).then((function(n){return Gc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Te((function(t,n){e.na("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Wc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&yr(o),t?ni(t):null})).o((function(t){throw o&&yr(o),t})))},t.Yc=function(t){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));var e=this;return Al(this,yl(this).then((function(){return function(t){return fl(t,(function(){return t.b.set(sl,t.c.F,t.a)}))}(e.i)})).then((function(){return zc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return ml(this).then((function(e){return t.b&&Zc(t.b.b),e})).o((function(e){throw t.b&&Zc(t.b.b),e}))},t.dd=function(t){if(!t)return Oe(new A("null-user"));if(this.S!=t.tenantId)return Oe(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=Il(this).options.apiKey,n.authDomain=Il(this).options.authDomain,n.appName=Il(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[is]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Ah(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Rh(e,r),Hh(e,t),e}(t,n,e.D,e.Ga());return Al(this,this.h.then((function(){if(Il(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Tl(e)&&t.uid==Tl(e).uid?(Hh(Tl(e),t),e.da(t)):(wl(e,r),Fh(r),e.da(r))})).then((function(){Sl(e)})))},t.Bb=function(){var t=this;return Al(this,this.h.then((function(){return t.b&&Zc(t.b.b),Tl(t)?(wl(t,null),hl(t.i).then((function(){Sl(t)}))):Re()})))},t.Zc=function(){var t=this;return ll(this.i,Il(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Tl(t)&&e){n=Tl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Hh(Tl(t),e),Tl(t).I();(Tl(t)||e)&&(wl(t,e),e&&(Fh(e),e.ha=t.D),t.b&&Vc(t.b,t),Sl(t))}}))},t.da=function(t){return cl(this.i,t)},t.mc=function(){Sl(this),this.da(Tl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return _l(e,Re(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Tl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),Al(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(El(t)))})))}(this,(function(){t.next(Tl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return Al(this,this.h.then((function(){return Tl(e)?Tl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return _l(e,cu(e.a,ru,{token:t}))})).then((function(t){var n=t.user;return Gh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return _l(n,cu(n.a,iu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return _l(n,cu(n.a,Ds,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return _l(e,t.ka(e.a))}))},t.Sc=function(t){return Jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=Tl(t);if(e&&e.isAnonymous){var n=ni({providerId:null,isNewUser:!1});return ni({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return _l(t,t.a.Ab()).then((function(e){var n=e.user;return Gh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Tl(this)&&Tl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Tl(this)&&xh(Tl(this))},t.Pc=function(t){var e=this;G(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&Tl(this)&&Ph(Tl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Al(this,this.h.then((function(){e.l||Q(e.s,t)&&t(El(e))})))},t.removeAuthTokenListener=function(t){$(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(ul("local"),t.a,this.ja),this.b&&(qc(this.b,this),Zc(this.b.b)),Promise.resolve()},t.hc=function(t){return Al(this,function(t,e){return cu(t,xs,{identifier:e,continueUri:Mr()?pr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Fo(t)},t.xb=function(t,e){var n=this;return Al(this,Re().then((function(){var t=new Pi(e);if(!t.c)throw new A("argument-error",Fi+" must be true when sending sign in link to email");return Gi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return Al(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return Al(this,this.a.Sa(t).then((function(t){return new li(t)})))},t.kb=function(t){return Al(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return Al(this,Re().then((function(){return"undefined"===typeof e||vt(e)?{}:Gi(new Pi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return Al(this,oh(this,t,e,_(this.ab,this)))},t.Vc=function(t,e){var n=this;return Al(this,Re().then((function(){var r=e||pr(),i=Mo(t,r);if(!(r=Fo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.ab(i)})))},kl.prototype.render=function(){},kl.prototype.reset=function(){},kl.prototype.getResponse=function(){},kl.prototype.execute=function(){};var Cl=null;function Rl(t,e){return(e=Ol(e))&&t.a[e]||null}function Ol(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Dl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function xl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Pl(){}function Ll(){}Nl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Dl(t,e),this.b++},Nl.prototype.reset=function(t){var e=Rl(this,t);t=Ol(t),e&&t&&(e.delete(),delete this.a[t])},Nl.prototype.getResponse=function(t){return(t=Rl(this,t))?t.getResponse():null},Nl.prototype.execute=function(t){(t=Rl(this,t))&&t.execute()},Dl.prototype.getResponse=function(){return xl(this),this.b},Dl.prototype.execute=function(){xl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Dl.prototype.delete=function(){xl(this),this.g=!0,clearTimeout(this.a),this.a=null,vn(this.f,"click",this.i)},ti(Pl,"FACTOR_ID","phone"),Ll.prototype.g=function(){return Cl||(Cl=new Nl),Re(Cl)},Ll.prototype.c=function(){};var Ml=null;function Fl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ul=new _t(St,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),jl=new zr(3e4,6e4);Fl.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),jl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete s[e.a]},Re(Xa(Ct(Ul,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Fl.prototype.c=function(){this.b--};var Vl=null;function ql(t,e,n,r,i,o,a){if(ti(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ml||(Ml=new Ll),a=Ml):(Vl||(Vl=new Fl),a=Vl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Gl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hl],!s.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ns(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Bl];this.a[Bl]=function(t){if(zl(u,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=xr(c,s);"function"===typeof e&&e(t)}};var h=this.a[Kl];this.a[Kl]=function(){if(zl(u,null),"function"===typeof h)h();else if("string"===typeof h){var t=xr(h,s);"function"===typeof t&&t()}}}var Bl="callback",Kl="expired-callback",Gl="sitekey",Hl="size";function zl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Wl(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function Ql(t){if(t.J)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Xl(t,e,n){var r=!1;try{this.b=n||ot.app()}catch(a){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=ot.SDK_VERSION?Or(ot.SDK_VERSION,o):null,ql.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,D(N),r)}function $l(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Yl.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Yl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=ql.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Wl(this,Re().then((function(){if(Mr()&&!Er())return _r();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,cu(t.s,zs,{})})).then((function(e){t.a[Gl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Ql(this);var t=this;return Wl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!he&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',zt(a.name),'"'),a.type){o.push(' type="',zt(a.type),'"');var s={};mt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ye(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):fe(o,a)),2<r.length&&ge(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Ql(this);var t=this;return Wl(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ql(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Xl,ql);var Yl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Jl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function tf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function ef(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function nf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function rf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function of(t,e){return v(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function af(t){return v(t)&&"string"===typeof t.uid}function sf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function uf(t,e){for(var n in e){var r=e[n].name;t[r]=lf(r,t[n],e[n].j)}}function cf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I((function(t){return this[t]}),n),set:I((function(t,e,n,r){$l(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function hf(t,e,n,r){t[e]=lf(e,n,r)}function lf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return $l(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}uf(pl.prototype,{kb:{name:"applyActionCode",j:[Jl("code")]},Sa:{name:"checkActionCode",j:[Jl("code")]},ob:{name:"confirmPasswordReset",j:[Jl("code"),Jl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Jl("email"),Jl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Jl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Jl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Jl("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Jl("email"),tf("actionCodeSettings")]},yb:{name:"setPersistence",j:[Jl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[rf()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[rf()]},Tc:{name:"signInWithCustomToken",j:[Jl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Jl("email"),Jl("password")]},Vc:{name:"signInWithEmailLink",j:[Jl("email"),Jl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Jl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[sf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Ah)}},nf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Jl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Jl("url"),tf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Jl("code")]}}),cf(pl.prototype,{lc:{name:"languageCode",lb:sf(Jl(),nf(),"languageCode")},ti:{name:"tenantId",lb:sf(Jl(),nf(),"tenantId")}}),pl.Persistence=oc,pl.Persistence.LOCAL="local",pl.Persistence.SESSION="session",pl.Persistence.NONE="none",uf(Ah.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[rf()]},rb:{name:"linkWithCredential",j:[rf()]},Dc:{name:"linkWithPhoneNumber",j:[Jl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[rf()]},ub:{name:"reauthenticateWithCredential",j:[rf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Jl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Jl(null,!0)]},cd:{name:"unlink",j:[Jl("provider")]},Cb:{name:"updateEmail",j:[Jl("email")]},Db:{name:"updatePassword",j:[Jl("password")]},ed:{name:"updatePhoneNumber",j:[rf("phone")]},Eb:{name:"updateProfile",j:[tf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Jl("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]}}),uf(Nl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(Te.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),cf(rh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Zl("appVerificationDisabledForTesting")}}),uf(ih.prototype,{confirm:{name:"confirm",j:[Jl("verificationCode")]}}),hf(po,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[_o,Po,jo,mo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[sf(Jl(),tf(),"json")]),hf(Lo,"credential",(function(t,e){return new xo(t,e)}),[Jl("email"),Jl("password")]),uf(xo.prototype,{w:{name:"toJSON",j:[Jl(null,!0)]}}),uf(So.prototype,{Ca:{name:"addScope",j:[Jl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(So,"credential",Ao,[sf(Jl(),tf(),"token")]),hf(Lo,"credentialWithLink",Mo,[Jl("email"),Jl("emailLink")]),uf(ko.prototype,{Ca:{name:"addScope",j:[Jl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(ko,"credential",No,[sf(Jl(),tf(),"token")]),uf(Co.prototype,{Ca:{name:"addScope",j:[Jl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Co,"credential",Ro,[sf(Jl(),sf(tf(),nf()),"idToken"),sf(Jl(),nf(),"accessToken",!0)]),uf(Oo.prototype,{Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Oo,"credential",Do,[sf(Jl(),tf(),"token"),Jl("secret",!0)]),uf(Eo.prototype,{Ca:{name:"addScope",j:[Jl("scope")]},credential:{name:"credential",j:[sf(Jl(),sf(tf(),nf()),"optionsOrIdToken"),sf(Jl(),nf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),uf(bo.prototype,{w:{name:"toJSON",j:[Jl(null,!0)]}}),uf(go.prototype,{w:{name:"toJSON",j:[Jl(null,!0)]}}),hf(qo,"credential",Bo,[Jl("verificationId"),Jl("verificationCode")]),uf(qo.prototype,{gb:{name:"verifyPhoneNumber",j:[sf(Jl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?of(t.session,lo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?of(t.session,fo)&&af(t.multiFactorHint):t.session&&t.multiFactorUid?of(t.session,fo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),uf(Uo.prototype,{w:{name:"toJSON",j:[Jl(null,!0)]}}),uf(A.prototype,{toJSON:{name:"toJSON",j:[Jl(null,!0)]}}),uf(Yo.prototype,{toJSON:{name:"toJSON",j:[Jl(null,!0)]}}),uf($o.prototype,{toJSON:{name:"toJSON",j:[Jl(null,!0)]}}),uf(hh.prototype,{toJSON:{name:"toJSON",j:[Jl(null,!0)]}}),uf(sh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),uf(gh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Jl("displayName",!0)]},bd:{name:"unenroll",j:[sf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:af},Jl(),"multiFactorInfoIdentifier")]}}),uf(Xl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hf(Si,"parseLink",xi,[Jl("link")]),hf(Pl,"assertion",(function(t){return new dh(t)}),[rf("phone")]),function(){if("undefined"===typeof ot||!ot.INTERNAL||!ot.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:fi,VERIFY_AND_CHANGE_EMAIL:di,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:pl,AuthCredential:po,Error:A};hf(t,"EmailAuthProvider",Lo,[]),hf(t,"FacebookAuthProvider",So,[]),hf(t,"GithubAuthProvider",ko,[]),hf(t,"GoogleAuthProvider",Co,[]),hf(t,"TwitterAuthProvider",Oo,[]),hf(t,"OAuthProvider",Eo,[Jl("providerId")]),hf(t,"SAMLAuthProvider",To,[Jl("providerId")]),hf(t,"PhoneAuthProvider",qo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof pl)}}]),hf(t,"RecaptchaVerifier",Xl,[sf(Jl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),tf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof ot.app.App)}}]),hf(t,"ActionCodeURL",Si,[]),hf(t,"PhoneMultiFactorGenerator",Pl,[]),ot.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new pl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),ot.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ot.registerVersion("@firebase/auth","0.16.8"),ot.INTERNAL.extendNamespace({User:Ah})}()}.apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var st=function(t,e){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ut(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}st(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function ct(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(jd){o(jd)}}function s(t){try{u(r.throw(t))}catch(jd){o(jd)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function ht(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(jd){o=[6,jd],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function lt(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}Object.create;var ft=function(t,e){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function pt(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var dt,vt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},gt=gt||{},yt=vt||self;function mt(){}function bt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function wt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _t="closure_uid_"+(1e9*Math.random()>>>0),It=0;function Tt(t,e,n){return t.call.apply(t.bind,arguments)}function Et(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return(St=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tt:Et).apply(null,arguments)}function At(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function kt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Nt(){this.s=this.s,this.o=this.o}var Ct={};Nt.prototype.s=!1,Nt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,_t)&&t[_t]||(t[_t]=++It)}(this);delete Ct[t]}},Nt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Rt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ot=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Dt(t){return Array.prototype.concat.apply([],arguments)}function xt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Pt(t){return/^[\s\xa0]*$/.test(t)}var Lt,Mt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ft(t,e){return-1!=t.indexOf(e)}function Ut(t,e){return t<e?-1:t>e?1:0}t:{var jt=yt.navigator;if(jt){var Vt=jt.userAgent;if(Vt){Lt=Vt;break t}}Lt=""}function qt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Bt(t){var e={};for(var n in t)e[n]=t[n];return e}var Kt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Kt.length;o++)n=Kt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ht(t){return Ht[" "](t),t}Ht[" "]=mt;var zt,Wt=Ft(Lt,"Opera"),Qt=Ft(Lt,"Trident")||Ft(Lt,"MSIE"),Xt=Ft(Lt,"Edge"),$t=Xt||Qt,Yt=Ft(Lt,"Gecko")&&!(Ft(Lt.toLowerCase(),"webkit")&&!Ft(Lt,"Edge"))&&!(Ft(Lt,"Trident")||Ft(Lt,"MSIE"))&&!Ft(Lt,"Edge"),Jt=Ft(Lt.toLowerCase(),"webkit")&&!Ft(Lt,"Edge");function Zt(){var t=yt.document;return t?t.documentMode:void 0}t:{var te="",ee=function(){var t=Lt;return Yt?/rv:([^\);]+)(\)|;)/.exec(t):Xt?/Edge\/([\d\.]+)/.exec(t):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Jt?/WebKit\/(\S+)/.exec(t):Wt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ee&&(te=ee?ee[1]:""),Qt){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){zt=String(ne);break t}}zt=te}var re,ie={};function oe(){return function(t){var e=ie;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Mt(String(zt)).split("."),n=Mt("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=Ut(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Ut(0==o[2].length,0==a[2].length)||Ut(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(yt.document&&Qt){var ae=Zt();re=ae||(parseInt(zt,10)||void 0)}else re=void 0;var se=re,ue=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{yt.addEventListener("test",mt,e),yt.removeEventListener("test",mt,e)}catch(n){}return t}();function ce(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function he(t,e){if(ce.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Yt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:le[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&he.Z.h.call(this)}}ce.prototype.h=function(){this.defaultPrevented=!0},kt(he,ce);var le={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),pe=0;function de(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++pe,this.ca=this.fa=!1}function ve(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ge(t){this.src=t,this.g={},this.h=0}function ye(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Rt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ve(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function me(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ge.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=me(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new de(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var be="closure_lm_"+(1e6*Math.random()|0),we={};function _e(t,e,n,r,i){if(r&&r.once)return Te(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_e(t,e[o],n,r,i);return null}return n=Re(n),t&&t[fe]?t.N(e,n,wt(r)?!!r.capture:!!r,i):Ie(t,e,n,!1,r,i)}function Ie(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=wt(i)?!!i.capture:!!i,s=Ne(t);if(s||(t[be]=s=new ge(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=ke;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ue||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ae(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Te(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Te(t,e[o],n,r,i);return null}return n=Re(n),t&&t[fe]?t.O(e,n,wt(r)?!!r.capture:!!r,i):Ie(t,e,n,!0,r,i)}function Ee(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ee(t,e[o],n,r,i);else r=wt(r)?!!r.capture:!!r,n=Re(n),t&&t[fe]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=me(o=t.g[e],n,r,i))&&(ve(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Ne(t))&&(e=t.g[e.toString()],t=-1,e&&(t=me(e,n,r,i)),(n=-1<t?e[t]:null)&&Se(n))}function Se(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[fe])ye(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ae(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ne(e))?(ye(n,t),0==n.h&&(n.src=null,e[be]=null)):ve(t)}}}function Ae(t){return t in we?we[t]:we[t]="on"+t}function ke(t,e){if(t.ca)t=!0;else{e=new he(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Se(t),t=n.call(r,e)}return t}function Ne(t){return(t=t[be])instanceof ge?t:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(t){return"function"===typeof t?t:(t[Ce]||(t[Ce]=function(e){return t.handleEvent(e)}),t[Ce])}function Oe(){Nt.call(this),this.i=new ge(this),this.P=this,this.I=null}function De(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new ce(e,t);else if(e instanceof ce)e.target=e.target||t;else{var i=e;Gt(e=new ce(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=xe(a,r,!0,e)&&i}if(i=xe(a=e.g=t,r,!0,e)&&i,i=xe(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=xe(a=e.g=n[o],r,!1,e)&&i}function xe(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&ye(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}kt(Oe,Nt),Oe.prototype[fe]=!0,Oe.prototype.removeEventListener=function(t,e,n,r){Ee(this,t,e,n,r)},Oe.prototype.M=function(){if(Oe.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ve(n[r]);delete e.g[t],e.h--}}this.I=null},Oe.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Oe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Pe=yt.JSON.stringify;function Le(){var t=Ke,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Me,Fe=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Ue.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Ue=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new je}),(function(t){return t.reset()})),je=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ve(t){yt.setTimeout((function(){throw t}),0)}function qe(t,e){Me||function(){var t=yt.Promise.resolve(void 0);Me=function(){t.then(Ge)}}(),Be||(Me(),Be=!0),Ke.add(t,e)}var Be=!1,Ke=new Fe;function Ge(){for(var t;t=Le();){try{t.h.call(t.g)}catch(n){Ve(n)}var e=Ue;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Be=!1}function He(t,e){Oe.call(this),this.h=t||1,this.g=e||yt,this.j=St(this.kb,this),this.l=Date.now()}function ze(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function We(t,e,n){if("function"===typeof t)n&&(t=St(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=St(t.handleEvent,t)}return 2147483647<Number(e)?-1:yt.setTimeout(t,e||0)}function Qe(t){t.g=We((function(){t.g=null,t.i&&(t.i=!1,Qe(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}kt(He,Oe),(dt=He.prototype).da=!1,dt.S=null,dt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),De(this,"tick"),this.da&&(ze(this),this.start()))}},dt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){He.Z.M.call(this),ze(this),delete this.g};var Xe=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ft(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Qe(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Nt);function $e(t){Nt.call(this),this.h=t,this.g={}}kt($e,Nt);var Ye=[];function Je(t,e,n,r){Array.isArray(n)||(n&&(Ye[0]=n.toString()),n=Ye);for(var i=0;i<n.length;i++){var o=_e(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Ze(t){qt(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Se(t)}),t),t.g={}}function tn(){this.g=!0}function en(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Pe(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}$e.prototype.M=function(){$e.Z.M.call(this),Ze(this)},$e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tn.prototype.Aa=function(){this.g=!1},tn.prototype.info=function(){};var nn={},rn=null;function on(){return rn=rn||new Oe}function an(t){ce.call(this,nn.Ma,t)}function sn(t){var e=on();De(e,new an(e,t))}function un(t,e){ce.call(this,nn.STAT_EVENT,t),this.stat=e}function cn(t){var e=on();De(e,new un(e,t))}function hn(t,e){ce.call(this,nn.Na,t),this.size=e}function ln(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return yt.setTimeout((function(){t()}),e)}nn.Ma="serverreachability",kt(an,ce),nn.STAT_EVENT="statevent",kt(un,ce),nn.Na="timingevent",kt(hn,ce);var fn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function dn(){}function vn(t){return t.h||(t.h=t.i())}function gn(){}dn.prototype.h=null;var yn,mn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bn(){ce.call(this,"d")}function wn(){ce.call(this,"c")}function _n(){}function In(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new $e(this),this.P=En,t=$t?125:void 0,this.W=new He(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Tn}function Tn(){this.i=null,this.g="",this.h=!1}kt(bn,ce),kt(wn,ce),kt(_n,dn),_n.prototype.g=function(){return new XMLHttpRequest},_n.prototype.i=function(){return{}},yn=new _n;var En=45e3,Sn={},An={};function kn(t,e,n){t.K=1,t.v=$n(Gn(e)),t.s=n,t.U=!0,Nn(t,null)}function Nn(t,e){t.F=Date.now(),Dn(t),t.A=Gn(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),cr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Tn,t.g=li(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Xe(St(t.Ia,t,t.g),t.O)),Je(t.V,t.g,"readystatechange",t.gb),e=t.H?Bt(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),sn(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Cn(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Rn(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=On(t,n))==An){4==e&&(t.o=4,cn(14),i=!1),en(t.j,t.m,null,"[Incomplete Response]");break}if(r==Sn){t.o=4,cn(15),en(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}en(t.j,t.m,r,null),Fn(t,r)}Cn(t)&&r!=An&&r!=Sn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,cn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ri(e),e.L=!0,cn(11))):(en(t.j,t.m,n,"[Invalid Chunked Response]"),Mn(t),Ln(t))}function On(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?An:(n=Number(e.substring(n,r)),isNaN(n)?Sn:(r+=1)+n>e.length?An:(e=e.substr(r,n),t.C=r+n,e))}function Dn(t){t.Y=Date.now()+t.P,xn(t,t.P)}function xn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ln(St(t.eb,t),e)}function Pn(t){t.B&&(yt.clearTimeout(t.B),t.B=null)}function Ln(t){0==t.l.G||t.I||ai(t.l,t)}function Mn(t){Pn(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ze(t.W),Ze(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Fn(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||yr(n.i,t)))if(n.I=t.N,!t.J&&yr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;oi(n),Qr(n)}ni(n),cn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ln(St(n.ab,n),6e3));if(1>=gr(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else ui(n,11)}else if((t.J||n.g==t)&&oi(n),!Pt(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(Ft(h,"spdy")||Ft(h,"quic")||Ft(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(mr(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Xn(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=hi(r,r.H?r.la:null,r.W),p.J){br(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(Pn(d),Dn(d)),r.g=p}else ei(r);0<n.l.length&&Yr(n)}else"stop"!=o[0]&&"close"!=o[0]||ui(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?ui(n,7):Wr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}sn(4)}catch(o){}}function Un(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(bt(t)||"string"===typeof t)Ot(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(bt(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(bt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function jn(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof jn)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Vn(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];qn(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)qn(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function qn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(dt=In.prototype).setTimeout=function(t){this.P=t},dt.gb=function(t){t=t.target;var e=this.L;e&&3==Br(t)?e.l():this.Ia(t)},dt.Ia=function(t){try{if(t==this.g)t:{var e=Br(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||$t||this.g&&(this.h.h||this.g.ga()||Kr(this.g)))){this.I||4!=e||7==n||sn(8==n||0>=r?3:2),Pn(this);var i=this.g.ba();this.N=i;e:if(Cn(this)){var o=Kr(this.g);t="";var a=o.length,s=4==Br(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Mn(this),Ln(this);var u="";break e}this.h.i=new yt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pt(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,cn(12),Mn(this),Ln(this);break t}en(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fn(this,i)}this.U?(Rn(this,e,u),$t&&this.i&&3==e&&(Je(this.V,this.W,"tick",this.fb),this.W.start())):(en(this.j,this.m,u,null),Fn(this,u)),4==e&&Mn(this),this.i&&!this.I&&(4==e?ai(this.l,this):(this.i=!1,Dn(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,cn(12)):(this.o=0,cn(13)),Mn(this),Ln(this)}}}catch(e){}},dt.fb=function(){if(this.g){var t=Br(this.g),e=this.g.ga();this.C<e.length&&(Pn(this),Rn(this,t,e),this.i&&4!=t&&Dn(this))}},dt.cancel=function(){this.I=!0,Mn(this)},dt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(sn(3),cn(17)),Mn(this),this.o=2,Ln(this)):xn(this,this.Y-t)},(dt=jn.prototype).R=function(){Vn(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},dt.T=function(){return Vn(this),this.g.concat()},dt.get=function(t,e){return qn(this.h,t)?this.h[t]:e},dt.set=function(t,e){qn(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},dt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kn(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Kn){this.g=void 0!==e?e:t.g,Hn(this,t.j),this.s=t.s,zn(this,t.i),Wn(this,t.m),this.l=t.l,e=t.h;var n=new or;n.i=e.i,e.g&&(n.g=new jn(e.g),n.h=e.h),Qn(this,n),this.o=t.o}else t&&(n=String(t).match(Bn))?(this.g=!!e,Hn(this,n[1]||"",!0),this.s=Yn(n[2]||""),zn(this,n[3]||"",!0),Wn(this,n[4]),this.l=Yn(n[5]||"",!0),Qn(this,n[6]||"",!0),this.o=Yn(n[7]||"")):(this.g=!!e,this.h=new or(null,this.g))}function Gn(t){return new Kn(t)}function Hn(t,e,n){t.j=n?Yn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function zn(t,e,n){t.i=n?Yn(e,!0):e}function Wn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Qn(t,e,n){e instanceof or?(t.h=e,function(t,e){e&&!t.j&&(ar(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(sr(this,e),cr(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Jn(e,rr)),t.h=new or(e,t.g))}function Xn(t,e,n){t.h.set(e,n)}function $n(t){return Xn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Yn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Jn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Kn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Jn(e,tr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Jn(e,tr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Jn(n,"/"==n.charAt(0)?nr:er,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Jn(n,ir)),t.join("")};var tr=/[#\/\?@]/g,er=/[#\?:]/g,nr=/[#\?]/g,rr=/[#\?@]/g,ir=/#/g;function or(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ar(t){t.g||(t.g=new jn,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function sr(t,e){ar(t),e=hr(t,e),qn(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,qn((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Vn(t)))}function ur(t,e){return ar(t),e=hr(t,e),qn(t.g.h,e)}function cr(t,e,n){sr(t,e),0<n.length&&(t.i=null,t.g.set(hr(t,e),xt(n)),t.h+=n.length)}function hr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(dt=or.prototype).add=function(t,e){ar(this),this.i=null,t=hr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},dt.forEach=function(t,e){ar(this),this.g.forEach((function(n,r){Ot(n,(function(n){t.call(e,n,r,this)}),this)}),this)},dt.T=function(){ar(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},dt.R=function(t){ar(this);var e=[];if("string"===typeof t)ur(this,t)&&(e=Dt(e,this.g.get(hr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Dt(e,t[n])}return e},dt.set=function(t,e){return ar(this),this.i=null,ur(this,t=hr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},dt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var lr=function(t,e){this.h=t,this.g=e};function fr(t){this.l=t||dr,yt.PerformanceNavigationTiming?t=0<(t=yt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(yt.g&&yt.g.Ea&&yt.g.Ea()&&yt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pr,dr=10;function vr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function gr(t){return t.h?1:t.g?t.g.size:0}function yr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function mr(t,e){t.g?t.g.add(e):t.h=e}function br(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function wr(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=pt(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return xt(t.i)}function _r(){}function Ir(){this.g=new _r}function Tr(t,e,n){var r=n||"";try{Un(t,(function(t,n){var i=t;wt(t)&&(i=Pe(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(jd){throw e.push(r+"type="+encodeURIComponent("_badmap")),jd}}function Er(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Sr(t){this.l=t.$b||null,this.j=t.ib||!1}function Ar(t,e){Oe.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=kr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fr.prototype.cancel=function(){var t,e;if(this.i=wr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=pt(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},_r.prototype.stringify=function(t){return yt.JSON.stringify(t,void 0)},_r.prototype.parse=function(t){return yt.JSON.parse(t,void 0)},kt(Sr,dn),Sr.prototype.g=function(){return new Ar(this.l,this.j)},Sr.prototype.i=(pr={},function(){return pr}),kt(Ar,Oe);var kr=0;function Nr(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Cr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Rr(t)}function Rr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(dt=Ar.prototype).open=function(t,e){if(this.readyState!=kr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Rr(this)},dt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||yt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cr(this)),this.readyState=kr},dt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof yt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nr(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},dt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Cr(this):Rr(this),3==this.readyState&&Nr(this)}},dt.Ua=function(t){this.g&&(this.response=this.responseText=t,Cr(this))},dt.Ta=function(t){this.g&&(this.response=t,Cr(this))},dt.ha=function(){this.g&&Cr(this)},dt.setRequestHeader=function(t,e){this.v.append(t,e)},dt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ar.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Or=yt.JSON.parse;function Dr(t){Oe.call(this),this.headers=new jn,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xr,this.K=this.L=!1}kt(Dr,Oe);var xr="",Pr=/^https?$/i,Lr=["POST","PUT"];function Mr(t){return"content-type"==t.toLowerCase()}function Fr(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ur(t),Vr(t)}function Ur(t){t.D||(t.D=!0,De(t,"complete"),De(t,"error"))}function jr(t){if(t.h&&"undefined"!=typeof gt&&(!t.C[1]||4!=Br(t)||2!=t.ba()))if(t.v&&4==Br(t))We(t.Fa,0,t);else if(De(t,"readystatechange"),4==Br(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Bn)[1]||null;if(!o&&yt.self&&yt.self.location){var a=yt.self.location.protocol;o=a.substr(0,a.length-1)}i=!Pr.test(o?o.toLowerCase():"")}e=i}if(e)De(t,"complete"),De(t,"success");else{t.m=6;try{var s=2<Br(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",Ur(t)}}finally{Vr(t)}}}function Vr(t,e){if(t.g){qr(t);var n=t.g,r=t.C[0]?mt:null;t.g=null,t.C=null,e||De(t,"ready");try{n.onreadystatechange=r}catch(jd){}}}function qr(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(yt.clearTimeout(t.A),t.A=null)}function Br(t){return t.g?t.g.readyState:0}function Kr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case xr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Gr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return qt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Xn(t,e,n))}function Hr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zr(t){this.za=0,this.l=[],this.h=new tn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hr("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hr("baseRetryDelayMs",5e3,t),this.$a=Hr("retryDelaySeedMs",1e4,t),this.Ya=Hr("forwardChannelMaxRetries",2,t),this.ra=Hr("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new fr(t&&t.concurrentRequestLimit),this.Ca=new Ir,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Wr(t){if(Xr(t),3==t.G){var e=t.V++,n=Gn(t.F);Xn(n,"SID",t.J),Xn(n,"RID",e),Xn(n,"TYPE","terminate"),Zr(t,n),(e=new In(t,t.h,e,void 0)).K=2,e.v=$n(Gn(n)),n=!1,yt.navigator&&yt.navigator.sendBeacon&&(n=yt.navigator.sendBeacon(e.v.toString(),"")),!n&&yt.Image&&((new Image).src=e.v,n=!0),n||(e.g=li(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Dn(e)}ci(t)}function Qr(t){t.g&&(ri(t),t.g.cancel(),t.g=null)}function Xr(t){Qr(t),t.u&&(yt.clearTimeout(t.u),t.u=null),oi(t),t.i.cancel(),t.m&&("number"===typeof t.m&&yt.clearTimeout(t.m),t.m=null)}function $r(t,e){t.l.push(new lr(t.Za++,e)),3==t.G&&Yr(t)}function Yr(t){vr(t.i)||t.m||(t.m=!0,qe(t.Ha,t),t.C=0)}function Jr(t,e){var n;n=e?e.m:t.V++;var r=Gn(t.F);Xn(r,"SID",t.J),Xn(r,"RID",n),Xn(r,"AID",t.U),Zr(t,r),t.o&&t.s&&Gr(r,t.o,t.s),n=new In(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ti(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),mr(t.i,n),kn(n,r,e)}function Zr(t,e){t.j&&Un({},(function(t,n){Xn(e,n,t)}))}function ti(t,e,n){n=Math.min(t.l.length,n);var r=t.j?St(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{Tr(h,a,"req"+c+"_")}catch(Qi){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function ei(t){t.g||t.u||(t.Y=1,qe(t.Ga,t),t.A=0)}function ni(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=ln(St(t.Ga,t),si(t,t.A)),t.A++,!0)}function ri(t){null!=t.B&&(yt.clearTimeout(t.B),t.B=null)}function ii(t){t.g=new In(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Gn(t.oa);Xn(e,"RID","rpc"),Xn(e,"SID",t.J),Xn(e,"CI",t.N?"0":"1"),Xn(e,"AID",t.U),Zr(t,e),Xn(e,"TYPE","xmlhttp"),t.o&&t.s&&Gr(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=$n(Gn(e)),n.s=null,n.U=!0,Nn(n,t)}function oi(t){null!=t.v&&(yt.clearTimeout(t.v),t.v=null)}function ai(t,e){var n=null;if(t.g==e){oi(t),ri(t),t.g=null;var r=2}else{if(!yr(t.i,e))return;n=e.D,br(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;De(r=on(),new hn(r,n,e,i)),Yr(t)}else ei(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(gr(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=ln(St(t.Ha,t,e),si(t,t.C)),t.C++,!0))}(t,e)||2==r&&ni(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ui(t,5);break;case 4:ui(t,10);break;case 3:ui(t,6);break;default:ui(t,2)}}function si(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ui(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=St(t.jb,t);n||(n=new Kn("//www.google.com/images/cleardot.gif"),yt.location&&"http"==yt.location.protocol||Hn(n,"https"),$n(n)),function(t,e){var n=new tn;if(yt.Image){var r=new Image;r.onload=At(Er,n,r,"TestLoadImage: loaded",!0,e),r.onerror=At(Er,n,r,"TestLoadImage: error",!1,e),r.onabort=At(Er,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=At(Er,n,r,"TestLoadImage: timeout",!1,e),yt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else cn(2);t.G=0,t.j&&t.j.va(e),ci(t),Xr(t)}function ci(t){t.G=0,t.I=-1,t.j&&(0==wr(t.i).length&&0==t.l.length||(t.i.i.length=0,xt(t.l),t.l.length=0),t.j.ua())}function hi(t,e,n){var r=function(t){return t instanceof Kn?Gn(t):new Kn(t,void 0)}(n);if(""!=r.i)e&&zn(r,e+"."+r.i),Wn(r,r.m);else{var i=yt.location;r=function(t,e,n,r){var i=new Kn(null,void 0);return t&&Hn(i,t),e&&zn(i,e),n&&Wn(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&qt(t.aa,(function(t,e){Xn(r,e,t)})),e=t.D,n=t.sa,e&&n&&Xn(r,e,n),Xn(r,"VER",t.ma),Zr(t,r),r}function li(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Dr(new Sr({ib:!0})):new Dr(t.qa)).L=t.H,e}function fi(){}function pi(){if(Qt&&!(10<=Number(se)))throw Error("Environmental error: no available transport.")}function di(t,e){Oe.call(this),this.g=new zr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Pt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pt(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new yi(this)}function vi(t){bn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function gi(){wn.call(this),this.status=1}function yi(t){this.g=t}(dt=Dr.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yn.g(),this.C=this.u?vn(this.u):vn(yn),this.g.onreadystatechange=St(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Fr(this,o)}t=n||"";var i=new jn(this.headers);r&&Un(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Mr,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.T()),n=yt.FormData&&t instanceof yt.FormData,!(0<=Rt(Lr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qr(this),0<this.B&&((this.K=function(t){return Qt&&oe()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.pa,this)):this.A=We(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Fr(this,o)}},dt.pa=function(){"undefined"!=typeof gt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,De(this,"timeout"),this.abort(8))},dt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,De(this,"complete"),De(this,"abort"),Vr(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vr(this,!0)),Dr.Z.M.call(this)},dt.Fa=function(){this.s||(this.F||this.v||this.l?jr(this):this.cb())},dt.cb=function(){jr(this)},dt.ba=function(){try{return 2<Br(this)?this.g.status:-1}catch(pr){return-1}},dt.ga=function(){try{return this.g?this.g.responseText:""}catch(pr){return""}},dt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Or(e)}},dt.Da=function(){return this.m},dt.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(dt=zr.prototype).ma=8,dt.G=1,dt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},dt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new In(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Gt(n=Bt(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=ti(this,e,r),Xn(i=Gn(this.F),"RID",t),Xn(i,"CVER",22),this.D&&Xn(i,"X-HTTP-Session-Id",this.D),Zr(this,i),this.o&&n&&Gr(i,this.o,n),mr(this.i,e),this.Ra&&Xn(i,"TYPE","init"),this.ja?(Xn(i,"$req",r),Xn(i,"SID","null"),e.$=!0,kn(e,i,null)):kn(e,i,r),this.G=2}}else 3==this.G&&(t?Jr(this,t):0==this.l.length||vr(this.i)||Jr(this))},dt.Ga=function(){if(this.u=null,ii(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ln(St(this.bb,this),t)}},dt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,cn(10),Qr(this),ii(this))},dt.ab=function(){null!=this.v&&(this.v=null,Qr(this),ni(this),cn(19))},dt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),cn(2)):(this.h.info("Failed to ping google.com"),cn(1))},(dt=fi.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Oa=function(){},pi.prototype.g=function(t,e){return new di(t,e)},kt(di,Oe),di.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),qe(St(t.hb,t,e))),cn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=hi(t,null,t.W),Yr(t)},di.prototype.close=function(){Wr(this.g)},di.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,$r(this.g,e)}else this.v?((e={}).__data__=Pe(t),$r(this.g,e)):$r(this.g,t)},di.prototype.M=function(){this.g.j=null,delete this.j,Wr(this.g),delete this.g,di.Z.M.call(this)},kt(vi,bn),kt(gi,wn),kt(yi,fi),yi.prototype.xa=function(){De(this.g,"a")},yi.prototype.wa=function(t){De(this.g,new vi(t))},yi.prototype.va=function(t){De(this.g,new gi(t))},yi.prototype.ua=function(){De(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,di.prototype.send=di.prototype.u,di.prototype.open=di.prototype.m,di.prototype.close=di.prototype.close,fn.NO_ERROR=0,fn.TIMEOUT=8,fn.HTTP_ERROR=6,pn.COMPLETE="complete",gn.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",Oe.prototype.listen=Oe.prototype.N,Dr.prototype.listenOnce=Dr.prototype.O,Dr.prototype.getLastError=Dr.prototype.La,Dr.prototype.getLastErrorCode=Dr.prototype.Da,Dr.prototype.getStatus=Dr.prototype.ba,Dr.prototype.getResponseJson=Dr.prototype.Qa,Dr.prototype.getResponseText=Dr.prototype.ga,Dr.prototype.send=Dr.prototype.ea;var mi=function(){return new pi},bi=function(){return on()},wi=fn,_i=pn,Ii=nn,Ti={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ei=Sr,Si=gn,Ai=Dr,ki=n(4155),Ni=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ni.o=-1;var Ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ri=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ut(e,t),e}(Error),Oi=new K("@firebase/firestore");function Di(){return Oi.logLevel}function xi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Oi.logLevel<=M.DEBUG){var r=e.map(Mi);Oi.debug.apply(Oi,lt(["Firestore (8.8.0): "+t],r))}}function Pi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Oi.logLevel<=M.ERROR){var r=e.map(Mi);Oi.error.apply(Oi,lt(["Firestore (8.8.0): "+t],r))}}function Li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Oi.logLevel<=M.WARN){var r=e.map(Mi);Oi.warn.apply(Oi,lt(["Firestore (8.8.0): "+t],r))}}function Mi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Fi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.0) INTERNAL ASSERTION FAILED: "+t;throw Pi(e),new Error(e)}function Ui(t,e){t||Fi()}function ji(t,e){return t}function Vi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var qi=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Vi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Bi(t,e){return t<e?-1:t>e?1:0}function Ki(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Gi(t){return t+"\0"}var Hi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ri(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ri(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ri(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ri(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Bi(this.nanoseconds,t.nanoseconds):Bi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),zi=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Hi(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Wi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var $i=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Fi(),void 0===n?n=t.length-e:n>t.length-e&&Fi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}($i),Ji=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ji.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Ri(Ci.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ri(Ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Ri(Ci.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}($i),to=function(){function t(t){this.fields=t,t.sort(Zi.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ki(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),eo=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Bi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();eo.EMPTY_BYTE_STRING=new eo("");var no=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(t){if(Ui(!!t),"string"==typeof t){var e=0,n=no.exec(t);if(Ui(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:io(t.seconds),nanos:io(t.nanos)}}function io(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function oo(t){return"string"==typeof t?eo.fromBase64String(t):eo.fromUint8Array(t)}function ao(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function so(t){var e=t.mapValue.fields.__previous_value__;return ao(e)?so(e):e}function uo(t){var e=ro(t.mapValue.fields.__local_write_time__.timestampValue);return new Hi(e.seconds,e.nanos)}function co(t){return null==t}function ho(t){return 0===t&&1/t==-1/0}function lo(t){return"number"==typeof t&&Number.isInteger(t)&&!ho(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var fo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Yi.fromString(e))},t.fromName=function(e){return new t(Yi.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Yi.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Yi.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Yi(e.slice()))},t}();function po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ao(t)?4:10:Fi()}function vo(t,e){var n=po(t);if(n!==po(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uo(t).isEqual(uo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ro(t.timestampValue),r=ro(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return oo(t.bytesValue).isEqual(oo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return io(t.geoPointValue.latitude)===io(e.geoPointValue.latitude)&&io(t.geoPointValue.longitude)===io(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return io(t.integerValue)===io(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=io(t.doubleValue),r=io(e.doubleValue);return n===r?ho(n)===ho(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ki(t.arrayValue.values||[],e.arrayValue.values||[],vo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Wi(n)!==Wi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vo(n[i],r[i])))return!1;return!0}(t,e);default:return Fi()}}function go(t,e){return void 0!==(t.values||[]).find((function(t){return vo(t,e)}))}function yo(t,e){var n=po(t),r=po(e);if(n!==r)return Bi(n,r);switch(n){case 0:return 0;case 1:return Bi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=io(t.integerValue||t.doubleValue),r=io(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return mo(t.timestampValue,e.timestampValue);case 4:return mo(uo(t),uo(e));case 5:return Bi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=oo(t),r=oo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Bi(n[i],r[i]);if(0!==o)return o}return Bi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Bi(io(t.latitude),io(e.latitude));return 0!==n?n:Bi(io(t.longitude),io(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=yo(n[i],r[i]);if(o)return o}return Bi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Bi(r[a],o[a]);if(0!==s)return s;var u=yo(n[r[a]],i[o[a]]);if(0!==u)return u}return Bi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Fi()}}function mo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Bi(t,e);var n=ro(t),r=ro(e),i=Bi(n.seconds,r.seconds);return 0!==i?i:Bi(n.nanos,r.nanos)}function bo(t){return wo(t)}function wo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ro(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?oo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,fo.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=wo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+wo(t.fields[o])}return e+"}"}(t.mapValue):Fi();var e,n}function _o(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Io(t){return!!t&&"integerValue"in t}function To(t){return!!t&&"arrayValue"in t}function Eo(t){return!!t&&"nullValue"in t}function So(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ao(t){return!!t&&"mapValue"in t}function ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Qi(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ko(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ko(t.arrayValue.values[r]);return n}return Object.assign({},t)}var No=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Ao(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ko(e)},t.prototype.setAll=function(t){var e=this,n=Zi.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ko(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Ao(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return vo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Ao(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Qi(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ko(this.value))},t}();function Co(t){var e=[];return Qi(t.fields,(function(t,n){var r=new Zi([t]);if(Ao(n)){var i=Co(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new to(e)}var Ro=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,zi.min(),No.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,No.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,No.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=No.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=No.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Oo=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Do(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Oo(t,e,n,r,i,o,a)}function xo(t){var e=ji(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+bo(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),co(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=zo(e.startAt)),e.endAt&&(n+="|ub:",n+=zo(e.endAt)),e.h=n}return e.h}function Po(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Qo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!vo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$o(t.startAt,e.startAt)&&$o(t.endAt,e.endAt)}function Lo(t){return fo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Mo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ut(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Fo(t,n,r):"array-contains"===n?new qo(t,r):"in"===n?new Bo(t,r):"not-in"===n?new Ko(t,r):"array-contains-any"===n?new Go(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Uo(t,n):new jo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(yo(e,this.value)):null!==e&&po(this.value)===po(e)&&this.m(yo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Fi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Fo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=fo.fromName(r.referenceValue),i}return ut(e,t),e.prototype.matches=function(t){var e=fo.comparator(t.key,this.key);return this.m(e)},e}(Mo),Uo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Vo("in",n),r}return ut(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Mo),jo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Vo("not-in",n),r}return ut(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Mo);function Vo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return fo.fromName(t.referenceValue)}))}var qo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ut(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return To(e)&&go(e.arrayValue,this.value)},e}(Mo),Bo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ut(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&go(this.value.arrayValue,e)},e}(Mo),Ko=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ut(e,t),e.prototype.matches=function(t){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!go(this.value.arrayValue,e)},e}(Mo),Go=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ut(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!To(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return go(e.value.arrayValue,t)}))},e}(Mo),Ho=function(t,e){this.position=t,this.before=e};function zo(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return bo(t)})).join(",")}var Wo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Qo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Xo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?fo.comparator(fo.fromName(a.referenceValue),n.key):yo(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function $o(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!vo(t.position[n],e.position[n]))return!1;return!0}var Yo=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Jo(t,e,n,r,i,o,a,s){return new Yo(t,e,n,r,i,o,a,s)}function Zo(t){return new Yo(t)}function ta(t){return!co(t.limit)&&"F"===t.limitType}function ea(t){return!co(t.limit)&&"L"===t.limitType}function na(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ra(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ia(t){return null!==t.collectionGroup}function oa(t){var e=ji(t);if(null===e.p){e.p=[];var n=ra(e),r=na(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Wo(n)),e.p.push(new Wo(Zi.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Wo(Zi.keyField(),u))}}}return e.p}function aa(t){var e=ji(t);if(!e.T)if("F"===e.limitType)e.T=Do(e.path,e.collectionGroup,oa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=oa(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Wo(o.field,a))}var s=e.endAt?new Ho(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Ho(e.startAt.position,!e.startAt.before):null;e.T=Do(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function sa(t,e,n){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ua(t,e){return Po(aa(t),aa(e))&&t.limitType===e.limitType}function ca(t){return xo(aa(t))+"|lt:"+t.limitType}function ha(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+bo(e.value);var e})).join(", ")+"]"),co(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+zo(t.startAt)),t.endAt&&(e+=", endAt: "+zo(t.endAt)),"Target("+e+")"}(aa(t))+"; limitType="+t.limitType+")"}function la(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):fo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Xo(t.startAt,oa(t),e))&&(!t.endAt||!Xo(t.endAt,oa(t),e))}(t,e)}function fa(t){return function(e,n){for(var r=!1,i=0,o=oa(t);i<o.length;i++){var a=o[i],s=pa(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function pa(t,e,n){var r=t.field.isKeyField()?fo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?yo(r,i):Fi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fi()}}function da(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ho(e)?"-0":e}}function va(t){return{integerValue:""+t}}function ga(t,e){return lo(e)?va(e):da(t,e)}var ya=function(){this._=void 0};function ma(t,e,n){return t instanceof _a?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ia?Ta(t,e):t instanceof Ea?Sa(t,e):function(t,e){var n=wa(t,e),r=ka(n)+ka(t.A);return Io(n)&&Io(t.A)?va(r):da(t.R,r)}(t,e)}function ba(t,e,n){return t instanceof Ia?Ta(t,e):t instanceof Ea?Sa(t,e):n}function wa(t,e){return t instanceof Aa?Io(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var _a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e}(ya),Ia=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ut(e,t),e}(ya);function Ta(t,e){for(var n=Na(e),r=function(t){n.some((function(e){return vo(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ea=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ut(e,t),e}(ya);function Sa(t,e){for(var n=Na(e),r=function(t){n=n.filter((function(e){return!vo(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Aa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return ut(e,t),e}(ya);function ka(t){return io(t.integerValue||t.doubleValue)}function Na(t){return To(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ca=function(t,e){this.field=t,this.transform=e},Ra=function(t,e){this.version=t,this.transformResults=e},Oa=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Da(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var xa=function(){};function Pa(t,e,n){t instanceof ja?function(t,e,n){var r=t.value.clone(),i=Ba(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Va?function(t,e,n){if(Da(t.precondition,e)){var r=Ba(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(qa(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function La(t,e,n){t instanceof ja?function(t,e,n){if(Da(t.precondition,e)){var r=t.value.clone(),i=Ka(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ua(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Va?function(t,e,n){if(Da(t.precondition,e)){var r=Ka(t.fieldTransforms,n,e),i=e.data;i.setAll(qa(t)),i.setAll(r),e.convertToFoundDocument(Ua(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Da(t.precondition,e)&&e.convertToNoDocument(zi.min())}(t,e)}function Ma(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=wa(o.transform,a||null);null!=s&&(null==n&&(n=No.empty()),n.set(o.field,s))}return n||null}function Fa(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ki(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ia&&e instanceof Ia||t instanceof Ea&&e instanceof Ea?Ki(t.elements,e.elements,vo):t instanceof Aa&&e instanceof Aa?vo(t.A,e.A):t instanceof _a&&e instanceof _a}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ua(t){return t.isFoundDocument()?t.version:zi.min()}var ja=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return ut(e,t),e}(xa),Va=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return ut(e,t),e}(xa);function qa(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ba(t,e,n){var r=new Map;Ui(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,ba(a,s,n[i]))}return r}function Ka(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,ma(s,u,e))}return r}var Ga,Ha,za=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return ut(e,t),e}(xa),Wa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return ut(e,t),e}(xa),Qa=function(t){this.count=t};function Xa(t){switch(t){case Ci.OK:return Fi();case Ci.CANCELLED:case Ci.UNKNOWN:case Ci.DEADLINE_EXCEEDED:case Ci.RESOURCE_EXHAUSTED:case Ci.INTERNAL:case Ci.UNAVAILABLE:case Ci.UNAUTHENTICATED:return!1;case Ci.INVALID_ARGUMENT:case Ci.NOT_FOUND:case Ci.ALREADY_EXISTS:case Ci.PERMISSION_DENIED:case Ci.FAILED_PRECONDITION:case Ci.ABORTED:case Ci.OUT_OF_RANGE:case Ci.UNIMPLEMENTED:case Ci.DATA_LOSS:return!0;default:return Fi()}}function $a(t){if(void 0===t)return Pi("GRPC error has no .code"),Ci.UNKNOWN;switch(t){case Ga.OK:return Ci.OK;case Ga.CANCELLED:return Ci.CANCELLED;case Ga.UNKNOWN:return Ci.UNKNOWN;case Ga.DEADLINE_EXCEEDED:return Ci.DEADLINE_EXCEEDED;case Ga.RESOURCE_EXHAUSTED:return Ci.RESOURCE_EXHAUSTED;case Ga.INTERNAL:return Ci.INTERNAL;case Ga.UNAVAILABLE:return Ci.UNAVAILABLE;case Ga.UNAUTHENTICATED:return Ci.UNAUTHENTICATED;case Ga.INVALID_ARGUMENT:return Ci.INVALID_ARGUMENT;case Ga.NOT_FOUND:return Ci.NOT_FOUND;case Ga.ALREADY_EXISTS:return Ci.ALREADY_EXISTS;case Ga.PERMISSION_DENIED:return Ci.PERMISSION_DENIED;case Ga.FAILED_PRECONDITION:return Ci.FAILED_PRECONDITION;case Ga.ABORTED:return Ci.ABORTED;case Ga.OUT_OF_RANGE:return Ci.OUT_OF_RANGE;case Ga.UNIMPLEMENTED:return Ci.UNIMPLEMENTED;case Ga.DATA_LOSS:return Ci.DATA_LOSS;default:return Fi()}}(Ha=Ga||(Ga={}))[Ha.OK=0]="OK",Ha[Ha.CANCELLED=1]="CANCELLED",Ha[Ha.UNKNOWN=2]="UNKNOWN",Ha[Ha.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ha[Ha.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ha[Ha.NOT_FOUND=5]="NOT_FOUND",Ha[Ha.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ha[Ha.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ha[Ha.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ha[Ha.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ha[Ha.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ha[Ha.ABORTED=10]="ABORTED",Ha[Ha.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ha[Ha.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ha[Ha.INTERNAL=13]="INTERNAL",Ha[Ha.UNAVAILABLE=14]="UNAVAILABLE",Ha[Ha.DATA_LOSS=15]="DATA_LOSS";var Ya=function(){function t(t,e){this.comparator=t,this.root=e||Za.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Za.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Za.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ja(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ja(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ja(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ja(this.root,t,this.comparator,!0)},t}(),Ja=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Za=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Fi();if(this.right.isRed())throw Fi();var t=this.left.check();if(t!==this.right.check())throw Fi();return t+(this.isRed()?0:1)},t}();Za.EMPTY=null,Za.RED=!0,Za.BLACK=!1,Za.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Za(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ts=function(){function t(t){this.comparator=t,this.data=new Ya(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new es(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new es(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),es=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ns=new Ya(fo.comparator);function rs(){return ns}var is=new Ya(fo.comparator);function os(){return is}var as=new Ya(fo.comparator);function ss(){return as}var us=new ts(fo.comparator);function cs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=us,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var hs=new ts(Bi);function ls(){return hs}var fs=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ps.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(zi.min(),r,ls(),rs(),cs())},t}(),ps=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(eo.EMPTY_BYTE_STRING,n,cs(),cs(),cs())},t}(),ds=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},vs=function(t,e){this.targetId=t,this.V=e},gs=function(t,e,n,r){void 0===n&&(n=eo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ys=function(){function t(){this.S=0,this.D=ws(),this.C=eo.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=cs(),e=cs(),n=cs();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Fi()}})),new ps(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=ws()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ms=function(){function t(t){this.W=t,this.G=new Map,this.H=rs(),this.J=bs(),this.Y=new ts(Bi)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Fi()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Lo(i))if(0===n){var o=new fo(i.path);this.tt(e,o,Ro.newNoDocument(o,zi.min()))}else Ui(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Lo(o.target)){var a=new fo(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Ro.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=cs();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new fs(t,n,this.Y,this.H,r);return this.H=rs(),this.J=bs(),this.Y=new ts(Bi),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ys,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ts(Bi),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||xi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ys),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function bs(){return new Ya(fo.comparator)}function ws(){return new Ya(fo.comparator)}var _s={asc:"ASCENDING",desc:"DESCENDING"},Is={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ts=function(t,e){this.databaseId=t,this.I=e};function Es(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ss(t,e){return t.I?e.toBase64():e.toUint8Array()}function As(t,e){return Es(t,e.toTimestamp())}function ks(t){return Ui(!!t),zi.fromTimestamp(function(t){var e=ro(t);return new Hi(e.seconds,e.nanos)}(t))}function Ns(t,e){return function(t){return new Yi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Cs(t){var e=Yi.fromString(t);return Ui(Zs(e)),e}function Rs(t,e){return Ns(t.databaseId,e.path)}function Os(t,e){var n=Cs(e);if(n.get(1)!==t.databaseId.projectId)throw new Ri(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ri(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fo(Ls(n))}function Ds(t,e){return Ns(t.databaseId,e)}function xs(t){var e=Cs(t);return 4===e.length?Yi.emptyPath():Ls(e)}function Ps(t){return new Yi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ls(t){return Ui(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ms(t,e,n){return{name:Rs(t,e),fields:n.value.mapValue.fields}}function Fs(t,e,n){var r=Os(t,e.name),i=ks(e.updateTime),o=new No({mapValue:{fields:e.fields}}),a=Ro.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Us(t,e){var n;if(e instanceof ja)n={update:Ms(t,e.key,e.value)};else if(e instanceof za)n={delete:Rs(t,e.key)};else if(e instanceof Va)n={update:Ms(t,e.key,e.data),updateMask:Js(e.fieldMask)};else{if(!(e instanceof Wa))return Fi();n={verify:Rs(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof _a)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ia)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ea)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Aa)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Fi()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:As(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Fi()}(t,e.precondition)),n}function js(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Oa.updateTime(ks(t.updateTime)):void 0!==t.exists?Oa.exists(t.exists):Oa.none()}(e.currentDocument):Oa.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Ui("REQUEST_TIME"===e.setToServerValue),n=new _a;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ia(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Ea(i)}else"increment"in e?n=new Aa(t,e.increment):Fi();var o=Zi.fromServerFormat(e.fieldPath);return new Ca(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Os(t,e.update.name),o=new No({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new to(e.map((function(t){return Zi.fromServerFormat(t)})))}(e.updateMask);return new Va(i,o,a,n,r)}return new ja(i,o,n,r)}if(e.delete){var s=Os(t,e.delete);return new za(s,n)}if(e.verify){var u=Os(t,e.verify);return new Wa(u,n)}return Fi()}function Vs(t,e){return{documents:[Ds(t,e.path)]}}function qs(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ds(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ds(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(So(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NAN"}};if(Eo(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(So(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NOT_NAN"}};if(Eo(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(t.field),op:Ws(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Qs(t.field),direction:zs(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||co(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Gs(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Gs(e.endAt)),n}function Bs(t){var e=xs(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ui(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Ks(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Wo(Xs(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return co(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Hs(n.startAt));var h=null;return n.endAt&&(h=Hs(n.endAt)),Jo(e,i,s,a,u,"F",c,h)}function Ks(t){return t?void 0!==t.unaryFilter?[Ys(t)]:void 0!==t.fieldFilter?[$s(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ks(t)})).reduce((function(t,e){return t.concat(e)})):Fi():[]}function Gs(t){return{before:t.before,values:t.position}}function Hs(t){var e=!!t.before,n=t.values||[];return new Ho(n,e)}function zs(t){return _s[t]}function Ws(t){return Is[t]}function Qs(t){return{fieldPath:t.canonicalString()}}function Xs(t){return Zi.fromServerFormat(t.fieldPath)}function $s(t){return Mo.create(Xs(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Fi()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ys(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Xs(t.unaryFilter.field);return Mo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Xs(t.unaryFilter.field);return Mo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xs(t.unaryFilter.field);return Mo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xs(t.unaryFilter.field);return Mo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Fi()}}function Js(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Zs(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function tu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=nu(e)),e=eu(t.get(n),e);return nu(e)}function eu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function nu(t){return t+"\x01\x01"}function ru(t){var e=t.length;if(Ui(e>=2),2===e)return Ui("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Yi.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Fi(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Fi()}o=a+2}return new Yi(r)}var iu=function(t,e){this.seconds=t,this.nanoseconds=e},ou=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ou.store="owner",ou.key="owner";var au=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};au.store="mutationQueues",au.keyPath="userId";var su=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};su.store="mutations",su.keyPath="batchId",su.userMutationsIndex="userMutationsIndex",su.userMutationsKeyPath=["userId","batchId"];var uu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,tu(e)]},t.key=function(t,e,n){return[t,tu(e),n]},t}();uu.store="documentMutations",uu.PLACEHOLDER=new uu;var cu=function(t,e){this.path=t,this.readTime=e},hu=function(t,e){this.path=t,this.version=e},lu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};lu.store="remoteDocuments",lu.readTimeIndex="readTimeIndex",lu.readTimeIndexPath="readTime",lu.collectionReadTimeIndex="collectionReadTimeIndex",lu.collectionReadTimeIndexPath=["parentPath","readTime"];var fu=function(t){this.byteSize=t};fu.store="remoteDocumentGlobal",fu.key="remoteDocumentGlobalKey";var pu=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};pu.store="targets",pu.keyPath="targetId",pu.queryTargetsIndexName="queryTargetsIndex",pu.queryTargetsKeyPath=["canonicalId","targetId"];var du=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};du.store="targetDocuments",du.keyPath=["targetId","path"],du.documentTargetsIndex="documentTargetsIndex",du.documentTargetsKeyPath=["path","targetId"];var vu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};vu.key="targetGlobalKey",vu.store="targetGlobal";var gu=function(t,e){this.collectionId=t,this.parent=e};gu.store="collectionParents",gu.keyPath=["collectionId","parent"];var yu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};yu.store="clientMetadata",yu.keyPath="clientId";var mu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};mu.store="bundles",mu.keyPath="bundleId";var bu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};bu.store="namedQueries",bu.keyPath="name";var wu=lt(lt([],lt(lt([],lt(lt([],lt(lt([],[au.store,su.store,uu.store,lu.store,pu.store,ou.store,vu.store,du.store]),[yu.store])),[fu.store])),[gu.store])),[mu.store,bu.store]),_u="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Iu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Tu=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Eu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Fi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Su=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Tu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Nu(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=xu(e.target.error);n.ft.reject(new Nu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Nu(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(xi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ru(e)},t}(),Au=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(d())&&Pi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return xi("SimpleDb","Removing database:",t),Ou(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=d(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof ki&&"YES"===(null===(t=ki.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return ct(this,void 0,void 0,(function(){var e,n=this;return ht(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(xi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Nu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ri(Ci.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Nu(t,n))},i.onupgradeneeded=function(t){xi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){xi("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return ct(this,void 0,void 0,(function(){var i,o,a,s,u;return ht(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return ht(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=l.sent(),e=Su.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Eu.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,xi("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ku=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ou(this.Pt.delete())},t}(),Nu=function(t){function e(e,n){var r=this;return(r=t.call(this,Ci.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ut(e,t),e}(Ri);function Cu(t){return"IndexedDbTransactionError"===t.name}var Ru=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(xi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(xi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ou(n)},t.prototype.add=function(t){return xi("SimpleDb","ADD",this.store.name,t,t),Ou(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ou(this.store.get(t)).next((function(n){return void 0===n&&(n=null),xi("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return xi("SimpleDb","DELETE",this.store.name,t),Ou(this.store.delete(t))},t.prototype.count=function(){return xi("SimpleDb","COUNT",this.store.name),Ou(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){xi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Eu((function(n,r){e.onerror=function(t){var e=xu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Eu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ku(i),a=e(i.primaryKey,i.value,o);if(a instanceof Eu){var s=a.catch((function(t){return o.done(),Eu.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Eu.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ou(t){return new Eu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=xu(t.target.error);n(e)}}))}var Du=!1;function xu(t){var e=Au._t(d());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ri("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Du||(Du=!0,setTimeout((function(){throw r}),0)),r}}return t}var Pu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return ut(e,t),e}(Iu);function Lu(t,e){var n=ji(t);return Au.It(n.Mt,e)}var Mu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Pa(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&La(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&La(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(zi.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),cs())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ki(this.mutations,t.mutations,(function(t,e){return Fa(t,e)}))&&Ki(this.baseMutations,t.baseMutations,(function(t,e){return Fa(t,e)}))},t}(),Fu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ui(e.mutations.length===r.length);for(var i=ss(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Uu=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=zi.min()),void 0===o&&(o=zi.min()),void 0===a&&(a=eo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ju=function(t){this.Lt=t};function Vu(t,e){if(e.document)return Fs(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=fo.fromSegments(e.noDocument.path),r=Hu(e.noDocument.readTime),i=Ro.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=fo.fromSegments(e.unknownDocument.path);return r=Hu(e.unknownDocument.version),Ro.newUnknownDocument(o,r)}return Fi()}function qu(t,e,n){var r=Bu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Rs(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Es(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new lu(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Gu(e.version);return a=e.hasCommittedMutations,new lu(null,new cu(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Gu(e.version);return new lu(new hu(c,h),null,null,!0,r,i)}return Fi()}function Bu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ku(t){var e=new Hi(t[0],t[1]);return zi.fromTimestamp(e)}function Gu(t){var e=t.toTimestamp();return new iu(e.seconds,e.nanoseconds)}function Hu(t){var e=new Hi(t.seconds,t.nanoseconds);return zi.fromTimestamp(e)}function zu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return js(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return js(t.Lt,e)})),s=Hi.fromMillis(e.localWriteTimeMs);return new Mu(e.batchId,s,n,a)}function Wu(t){var e,n,r=Hu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Hu(t.lastLimboFreeSnapshotVersion):zi.min();return void 0!==t.query.documents?(Ui(1===(n=t.query).documents.length),e=aa(Zo(xs(n.documents[0])))):e=function(t){return aa(Bs(t))}(t.query),new Uu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,eo.fromBase64String(t.resumeToken))}function Qu(t,e){var n,r=Gu(e.snapshotVersion),i=Gu(e.lastLimboFreeSnapshotVersion);n=Lo(e.target)?Vs(t.Lt,e.target):qs(t.Lt,e.target);var o=e.resumeToken.toBase64();return new pu(e.targetId,xo(e.target),r,o,e.sequenceNumber,i,n)}function Xu(t){var e=Bs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?sa(e,e.limit,"L"):e}var $u=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Yu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Hu(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Yu(t).put({bundleId:(n=e).id,createTime:Gu(ks(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ju(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Xu(e.bundledQuery),readTime:Hu(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Ju(t).put(function(t){return{name:t.name,readTime:Gu(ks(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Yu(t){return Lu(t,mu.store)}function Ju(t){return Lu(t,bu.store)}var Zu=function(){function t(){this.Bt=new tc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Eu.resolve()},t.prototype.getCollectionParents=function(t,e){return Eu.resolve(this.Bt.getEntries(e))},t}(),tc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ts(Yi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ts(Yi.comparator)).toArray()},t}(),ec=function(){function t(){this.qt=new tc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:tu(i)};return nc(t).put(o)}return Eu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Gi(e),""],!1,!0);return nc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ru(o.parent))}return n}))},t}();function nc(t){return Lu(t,gu.store)}var rc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ic=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function oc(t,e,n){var r=t.store(su.store),i=t.store(uu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Ui(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=uu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Eu.waitFor(o).next((function(){return c}))}function ac(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fi();e=t.noDocument}return JSON.stringify(e).length}ic.DEFAULT_COLLECTION_PERCENTILE=10,ic.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ic.DEFAULT=new ic(41943040,ic.DEFAULT_COLLECTION_PERCENTILE,ic.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ic.DISABLED=new ic(-1,0,0);var sc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Ui(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cc(t).$t({index:su.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=hc(t),a=cc(t);return a.add({}).next((function(s){Ui("number"==typeof s);for(var u=new Mu(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Us(t.Lt,e)})),i=n.mutations.map((function(e){return Us(t.Lt,e)}));return new su(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new ts((function(t,e){return Bi(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=uu.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,uu.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Eu.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return cc(t).get(e).next((function(t){return t?(Ui(t.userId===n.userId),zu(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Eu.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return cc(t).$t({index:su.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ui(e.batchId>=r),o=zu(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return cc(t).$t({index:su.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cc(t).Nt(su.userMutationsIndex,n).next((function(t){return t.map((function(t){return zu(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=uu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return hc(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=ru(u);if(s===n.userId&&e.path.isEqual(h))return cc(t).get(c).next((function(t){if(!t)throw Fi();Ui(t.userId===n.userId),o.push(zu(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ts(Bi),i=[];return e.forEach((function(e){var o=uu.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=hc(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=ru(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Eu.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=uu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ts(Bi);return hc(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=ru(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(cc(t).get(e).next((function(t){if(null===t)throw Fi();Ui(t.userId===n.userId),r.push(zu(n.R,t))})))})),Eu.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return oc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Eu.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Eu.resolve();var r=IDBKeyRange.lowerBound(uu.prefixForUser(e.userId)),i=[];return hc(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ru(t[1]);i.push(o)}else r.done()})).next((function(){Ui(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return uc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return lc(t).get(this.userId).next((function(t){return t||new au(e.userId,-1,"")}))},t}();function uc(t,e,n){var r=uu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return hc(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function cc(t){return Lu(t,su.store)}function hc(t){return Lu(t,uu.store)}function lc(t){return Lu(t,au.store)}var fc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),pc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new fc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return zi.fromTimestamp(new Hi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return dc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Ui(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return dc(t).$t((function(a,s){var u=Wu(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Eu.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return dc(t).$t((function(t,n){var r=Wu(n);e(r)}))},t.prototype.Xt=function(t){return vc(t).get(vu.key).next((function(t){return Ui(null!==t),t}))},t.prototype.Zt=function(t,e){return vc(t).put(vu.key,e)},t.prototype.te=function(t,e){return dc(t).put(Qu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=xo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return dc(t).$t({range:r,index:pu.queryTargetsIndexName},(function(t,n,r){var o=Wu(n);Po(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=gc(t);return e.forEach((function(e){var a=tu(e.path);i.push(o.put(new du(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Eu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=gc(t);return Eu.forEach(e,(function(e){var o=tu(e.path);return Eu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=gc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=gc(t),i=cs();return r.$t({range:n,kt:!0},(function(t,e,n){var r=ru(t[1]),o=new fo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=tu(e.path),r=IDBKeyRange.bound([n],[Gi(n)],!1,!0),i=0;return gc(t).$t({index:du.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return dc(t).get(e).next((function(t){return t?Wu(t):null}))},t}();function dc(t){return Lu(t,pu.store)}function vc(t){return Lu(t,vu.store)}function gc(t){return Lu(t,du.store)}function yc(t){return ct(this,void 0,void 0,(function(){return ht(this,(function(e){if(t.code!==Ci.FAILED_PRECONDITION||t.message!==_u)throw t;return xi("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function mc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Bi(n,i);return 0===a?Bi(r,o):a}var bc=function(){function t(t){this.ne=t,this.buffer=new ts(mc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();mc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),wc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;xi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return ct(e,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Cu(e=n.sent())?(xi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,yc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),_c=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Eu.resolve(Ni.o);var r=new bc(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(xi("LruGarbageCollector","Garbage collection skipped; disabled"),Eu.resolve(rc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(xi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),rc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(xi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Di()<=M.DEBUG&&xi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),Eu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Ic=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new _c(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Tc(t,n)},t.prototype.removeReference=function(t,e,n){return Tc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Tc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return lc(t).Ot((function(r){return uc(t,r,e).next((function(t){return t&&(n=!0),Eu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),gc(t).delete([0,tu(a.path)])}))}));i.push(u)}})).next((function(){return Eu.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Tc(t,e)},t.prototype.we=function(t,e){var n,r=gc(t),i=Ni.o;return r.$t({index:du.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Ni.o&&e(new fo(ru(n)),i),i=s,n=a):i=Ni.o})).next((function(){i!==Ni.o&&e(new fo(ru(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Tc(t,e){return gc(t).put(function(t,e){return new du(0,tu(t.path),e)}(e,t.currentSequenceNumber))}var Ec=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Qi(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Xi(this.inner)},t}(),Sc=function(){function t(){this.changes=new Ec((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:zi.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ro.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Eu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Ac=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Cc(t).put(Rc(e),n)},t.prototype.removeEntry=function(t,e){var n=Cc(t),r=Rc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Cc(t).get(Rc(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Cc(t).get(Rc(e)).next((function(t){return{document:n.ye(e,t),size:ac(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=rs();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=rs(),i=new Ya(fo.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ac(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Eu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Cc(t).$t({range:r},(function(t,e,r){for(var a=fo.fromSegments(t);o&&fo.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=rs(),o=e.path.length+1,a={};if(n.isEqual(zi.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Bu(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=lu.collectionReadTimeIndex}return Cc(t).$t(a,(function(t,n,a){if(t.length===o){var s=Vu(r.R,n);e.path.isPrefixOf(s.key.path)?la(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new kc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Nc(t).get(fu.key).next((function(t){return Ui(!!t),t}))},t.prototype.me=function(t,e){return Nc(t).put(fu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Vu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(zi.min()))return n}return Ro.newInvalidDocument(t)},t}(),kc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ec((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ut(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ts((function(t,e){return Bi(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=qu(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ac(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=qu(e.Ie.R,Ro.newNoDocument(o,zi.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Eu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Sc);function Nc(t){return Lu(t,fu.store)}function Cc(t){return Lu(t,lu.store)}function Rc(t){return t.path.toArray()}var Oc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ui(n<r&&n>=0&&r<=11);var o=new Su("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ou.store)}(t),function(t){t.createObjectStore(au.store,{keyPath:au.keyPath}),t.createObjectStore(su.store,{keyPath:su.keyPath,autoIncrement:!0}).createIndex(su.userMutationsIndex,su.userMutationsKeyPath,{unique:!0}),t.createObjectStore(uu.store)}(t),Dc(t),function(t){t.createObjectStore(lu.store)}(t));var a=Eu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(du.store),t.deleteObjectStore(pu.store),t.deleteObjectStore(vu.store)}(t),Dc(t)),a=a.next((function(){return function(t){var e=t.store(vu.store),n=new vu(0,0,zi.min().toTimestamp(),0);return e.put(vu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(su.store).Nt().next((function(n){t.deleteObjectStore(su.store),t.createObjectStore(su.store,{keyPath:su.keyPath,autoIncrement:!0}).createIndex(su.userMutationsIndex,su.userMutationsKeyPath,{unique:!0});var r=e.store(su.store),i=n.map((function(t){return r.put(t)}));return Eu.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(yu.store,{keyPath:yu.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(fu.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(lu.store);e.createIndex(lu.readTimeIndex,lu.readTimeIndexPath,{unique:!1}),e.createIndex(lu.collectionReadTimeIndex,lu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(mu.store,{keyPath:mu.keyPath})}(t),function(t){t.createObjectStore(bu.store,{keyPath:bu.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(lu.store).$t((function(t,n){e+=ac(n)})).next((function(){var n=new fu(e);return t.store(fu.store).put(fu.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(au.store),r=t.store(su.store);return n.Nt().next((function(n){return Eu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(su.userMutationsIndex,i).next((function(r){return Eu.forEach(r,(function(r){Ui(r.userId===n.userId);var i=zu(e.R,r);return oc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(du.store),n=t.store(lu.store);return t.store(vu.store).get(vu.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Yi(n),a=function(t){return[0,tu(t)]}(o);r.push(e.get(a).next((function(n){return n?Eu.resolve():function(n){return e.put(new du(0,tu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Eu.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(gu.store,{keyPath:gu.keyPath});var n=e.store(gu.store),r=new tc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:tu(i)})}};return e.store(lu.store).$t({kt:!0},(function(t,e){var n=new Yi(t);return i(n.popLast())})).next((function(){return e.store(uu.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=ru(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(pu.store);return n.$t((function(t,r){var i=Wu(r),o=Qu(e.R,i);return n.put(o)}))},t}();function Dc(t){t.createObjectStore(du.store,{keyPath:du.keyPath}).createIndex(du.documentTargetsIndex,du.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(pu.store,{keyPath:pu.keyPath}).createIndex(pu.queryTargetsIndexName,pu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(vu.store)}var xc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Pc=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ri(Ci.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ic(this,i),this.Le=n+"main",this.R=new ju(u),this.Be=new Au(this.Le,11,new Oc(this.R)),this.qe=new pc(this.referenceDelegate,this.R),this.Ut=new ec,this.Ue=function(t,e){return new Ac(t,e)}(this.R,this.Ut),this.Ke=new $u,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&Pi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ri(Ci.FAILED_PRECONDITION,xc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Ni(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return ct(e,void 0,void 0,(function(){return ht(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return ct(e,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return ct(e,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Mc(e).put(new yu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Cu(e))return xi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return xi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Lc(t).get(ou.key).next((function(t){return Eu.resolve(e.tn(t))}))},t.prototype.en=function(t){return Mc(t).delete(this.clientId)},t.prototype.nn=function(){return ct(this,void 0,void 0,(function(){var t,e,n,r,i=this;return ht(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Lu(t,yu.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Eu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Eu.resolve(!0):Lc(t).get(ou.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ri(Ci.FAILED_PRECONDITION,xc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Mc(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&xi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return ct(this,void 0,void 0,(function(){var t=this;return ht(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ou.store,yu.store],(function(e){var n=new Pu(e,Ni.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Mc(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return sc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;xi("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,wu,(function(o){return i=new Pu(o,r.Ne?r.Ne.next():Ni.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Pi("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Ri(Ci.FAILED_PRECONDITION,_u);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Lc(t).get(ou.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ri(Ci.FAILED_PRECONDITION,xc)}))},t.prototype.Ze=function(t){var e=new ou(this.clientId,this.allowTabSynchronization,Date.now());return Lc(t).put(ou.key,e)},t.yt=function(){return Au.yt()},t.prototype.Xe=function(t){var e=this,n=Lc(t);return n.get(ou.key).next((function(t){return e.tn(t)?(xi("IndexedDbPersistence","Releasing primary lease."),n.delete(ou.key)):Eu.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Pi("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return xi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Pi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Pi("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Lc(t){return Lu(t,ou.store)}function Mc(t){return Lu(t,yu.store)}function Fc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Uc=function(t,e){this.progress=t,this.wn=e},jc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return fo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ia(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new fo(e)).next((function(t){var e=os();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=os();return this.Ut.getCollectionParents(t,i).next((function(a){return Eu.forEach(a,(function(a){var s=function(t,e){return new Yo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=Ro.newInvalidDocument(c),r=r.insert(c,h)),La(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){la(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=cs(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Va&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Vc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=cs(),i=cs(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),qc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(zi.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(ta(e)||ea(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Di()<=M.DEBUG&&xi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ha(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new ts(fa(t));return e.forEach((function(e,r){la(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Di()<=M.DEBUG&&xi("QueryEngine","Using full collection scan to execute query:",ha(e)),this.Sn.getDocumentsMatchingQuery(t,e,zi.min())},t}(),Bc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ya(Bi),this.kn=new Ec((function(t){return xo(t)}),Po),this.$n=zi.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new jc(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Kc(t,e,n,r){return new Bc(t,e,n,r)}function Gc(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o;return ht(this,(function(a){switch(a.label){case 0:return n=ji(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new jc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=cs(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Hc(t,e){var n=ji(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Eu.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Ui(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function zc(t){var e=ji(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Wc(t,e){var n=ji(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ui(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=rs();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Qc(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(zi.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Eu.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Qc(t,e,n,r,i){var o=cs();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=rs();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(zi.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):xi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Xc(t,e){var n=ji(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function $c(t,e){var n=ji(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Eu.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Uu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Yc(t,e,n){return ct(this,void 0,void 0,(function(){var r,i,o,a;return ht(this,(function(s){switch(s.label){case 0:r=ji(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Cu(a=s.sent()))throw a;return xi("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Jc(t,e,n){var r=ji(t),i=zi.min(),o=cs();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ji(t),i=r.kn.get(n);return void 0!==i?Eu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,aa(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:zi.min(),n?o:cs())})).next((function(t){return{documents:t,Bn:o}}))}))}function Zc(t,e){var n=ji(t),r=ji(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function th(t){var e=ji(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ji(t),i=rs(),o=Bu(n),a=Cc(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:lu.readTimeIndex,range:s},(function(t,e){var n=Vu(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Ku(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function eh(t){return ct(this,void 0,void 0,(function(){var e;return ht(this,(function(n){return[2,(e=ji(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Cc(t),n=zi.min();return e.$t({index:lu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ku(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function nh(t,e,n,r){return ct(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,p;return ht(this,(function(d){switch(d.label){case 0:for(i=ji(t),o=cs(),a=rs(),s=ss(),u=0,c=n;u<c.length;u++)h=c[u],l=e.qn(h.metadata.name),h.document&&(o=o.add(l)),a=a.insert(l,e.Un(h)),s=s.insert(l,e.Kn(h.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,$c(i,function(t){return aa(Zo(Yi.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Qc(t,f,a,zi.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function rh(t,e,n){return void 0===n&&(n=cs()),ct(this,void 0,void 0,(function(){var r,i;return ht(this,(function(o){switch(o.label){case 0:return[4,$c(t,aa(Xu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ji(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=ks(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(eo.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var ih=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Eu.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:ks(n.createTime)}),Eu.resolve()},t.prototype.getNamedQuery=function(t,e){return Eu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Xu(t.bundledQuery),readTime:ks(t.readTime)}}(e)),Eu.resolve()},t}(),oh=function(){function t(){this.Wn=new ts(ah.Gn),this.zn=new ts(ah.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ah(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new ah(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new fo(new Yi([])),r=new ah(n,t),i=new ah(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new fo(new Yi([])),n=new ah(e,t),r=new ah(e,t+1),i=cs();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new ah(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ah=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return fo.comparator(t.key,e.key)||Bi(t.ns,e.ns)},t.Hn=function(t,e){return Bi(t.ns,e.ns)||fo.comparator(t.key,e.key)},t}(),sh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ts(ah.Gn)}return t.prototype.checkEmpty=function(t){return Eu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Mu(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new ah(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Eu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Eu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Eu.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Eu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Eu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ah(e,0),i=new ah(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Eu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ts(Bi);return e.forEach((function(t){var e=new ah(t,0),i=new ah(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Eu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;fo.isDocumentKey(i)||(i=i.child(""));var o=new ah(new fo(i),0),a=new ts(Bi);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Eu.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ui(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Eu.forEach(e.mutations,(function(i){var o=new ah(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ah(e,0),r=this.rs.firstAfterOrEqual(n);return Eu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Eu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),uh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ya(fo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Eu.resolve(n?n.document.clone():Ro.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=rs();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ro.newInvalidDocument(t))})),Eu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=rs(),i=new fo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||la(e,c)&&(r=r.insert(c.key,c.clone()))}return Eu.resolve(r)},t.prototype.fs=function(t,e){return Eu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new ch(this)},t.prototype.getSize=function(t){return Eu.resolve(this.size)},t}(),ch=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return ut(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Eu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Sc),hh=function(){function t(t){this.persistence=t,this.ds=new Ec((function(t){return xo(t)}),Po),this.lastRemoteSnapshotVersion=zi.min(),this.highestTargetId=0,this.ws=0,this._s=new oh,this.targetCount=0,this.ys=fc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Eu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Eu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Eu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Eu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Eu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new fc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Eu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Eu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Eu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Eu.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Eu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Eu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Eu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Eu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Eu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Eu.resolve(n)},t.prototype.containsKey=function(t,e){return Eu.resolve(this._s.containsKey(e))},t}(),lh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ni(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new hh(this),this.Ut=new Zu,this.Ue=function(t,e){return new uh(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new ju(e),this.Ke=new ih(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new sh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;xi("MemoryPersistence","Starting transaction:",t);var i=new fh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Eu.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),fh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return ut(e,t),e}(Iu),ph=function(){function t(t){this.persistence=t,this.As=new oh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Fi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Eu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Eu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Eu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Eu.forEach(this.vs,(function(r){var i=fo.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Eu.or([function(){return Eu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),dh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function vh(t,e){return"firestore_clients_"+t+"_"+e}function gh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function yh(t,e){return"firestore_targets_"+t+"_"+e}dh.UNAUTHENTICATED=new dh(null),dh.GOOGLE_CREDENTIALS=new dh("google-credentials-uid"),dh.FIRST_PARTY=new dh("first-party-uid");var mh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ri(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Pi("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ri(i.error.code,i.error.message)),o?new t(e,i.state,r):(Pi("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),wh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ls(),a=0;i&&a<r.activeTargetIds.length;++a)i=lo(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Pi("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),_h=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Pi("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ih=function(){function t(){this.activeTargetIds=ls()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Th=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ya(Bi),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=vh(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Ih),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return ct(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return ht(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(vh(this.persistenceKey,r)))&&(o=wh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(yh(this.persistenceKey,t));if(n){var r=bh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(yh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return xi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){xi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){xi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(xi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Pi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return ct(e,void 0,void 0,(function(){var t,e,r,i,o,a;return ht(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Ni.o;if(null!=t)try{var n=JSON.parse(t);Ui("number"==typeof n),e=n}catch(t){Pi("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ni.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new mh(this.currentUser,t,e,n),i=gh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=gh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=yh(this.persistenceKey,t),i=new bh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return wh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return mh.Vs(new dh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return bh.Vs(r,e)},t.prototype.js=function(t){return _h.Vs(t)},t.prototype.ii=function(t){return ct(this,void 0,void 0,(function(){return ht(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(xi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ls();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Eh=function(){function t(){this.li=new Ih,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Ih,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Sh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Ah=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){xi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){xi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),kh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Nh=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ch=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return ut(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new Ai;a.listenOnce(_i.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case wi.NO_ERROR:var e=a.getResponseJson();xi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case wi.TIMEOUT:xi("Connection",'RPC "'+t+'" timed out'),o(new Ri(Ci.DEADLINE_EXCEEDED,"Request time out"));break;case wi.HTTP_ERROR:var n=a.getStatus();if(xi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ci).indexOf(e)>=0?e:Ci.UNKNOWN}(r.status);o(new Ri(s,r.message))}else o(new Ri(Ci.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ri(Ci.UNAVAILABLE,"Connection failed."));break;default:Fi()}}finally{xi("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=mi(),i=bi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ei({})),this.Fi(o.initMessageHeaders,e),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())||"object"===typeof navigator&&"ReactNative"===navigator.product||d().indexOf("Electron/")>=0||function(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||d().indexOf("MSAppHost/")>=0||function(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");xi("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,h=new Nh({Ei:function(t){c?xi("Connection","Not sending because WebChannel is closed:",t):(u||(xi("Connection","Opening WebChannel transport."),s.open(),u=!0),xi("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(s,Si.EventType.OPEN,(function(){c||xi("Connection","WebChannel transport opened.")})),l(s,Si.EventType.CLOSE,(function(){c||(c=!0,xi("Connection","WebChannel transport closed"),h.Vi())})),l(s,Si.EventType.ERROR,(function(t){c||(c=!0,Li("Connection","WebChannel transport errored:",t),h.Vi(new Ri(Ci.UNAVAILABLE,"The operation could not be completed")))})),l(s,Si.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Ui(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){xi("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Ga[t];if(void 0!==e)return $a(e)}(o),u=i.message;void 0===a&&(a=Ci.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Vi(new Ri(a,u)),s.close()}else xi("Connection","WebChannel received:",n),h.Si(n)}})),l(i,Ii.STAT_EVENT,(function(t){t.stat===Ti.PROXY?xi("Connection","Detected buffering proxy"):t.stat===Ti.NOPROXY&&xi("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);xi("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return xi("RestConnection","Received: ",t),t}),(function(e){throw Li("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=kh[t];return this.Di+"/v1/"+e+":"+n},t}());function Rh(){return"undefined"!=typeof window?window:null}function Oh(){return"undefined"!=typeof document?document:null}function Dh(t){return new Ts(t,!0)}var xh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&xi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ph=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new xh(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return ct(this,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return ct(this,void 0,void 0,(function(){return ht(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return ct(this,void 0,void 0,(function(){return ht(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ci.RESOURCE_EXHAUSTED?(Pi(e.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Ci.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Ri(Ci.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return ct(t,void 0,void 0,(function(){return ht(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return xi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(xi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Lh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return ut(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Fi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ui(void 0===e||"string"==typeof e),eo.fromBase64String(e||"")):(Ui(void 0===e||e instanceof Uint8Array),eo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ci.UNKNOWN:$a(t.code);return new Ri(e,t.message||"")}(s);n=new gs(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Os(t,r.document.name),o=ks(r.document.updateTime);var s=new No({mapValue:{fields:r.document.fields}}),u=(a=Ro.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new ds(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Os(t,r.document),o=r.readTime?ks(r.readTime):zi.min(),s=Ro.newNoDocument(i,o),a=r.removedTargetIds||[],n=new ds([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Os(t,r.document),o=r.removedTargetIds||[],n=new ds([],o,i,null);else{if(!("filter"in e))return Fi();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Qa(r),o=h.targetId,n=new vs(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return zi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?zi.min():e.readTime?ks(e.readTime):zi.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ps(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Lo(r)?{documents:Vs(t,r)}:{query:qs(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ss(t,e.resumeToken):e.snapshotVersion.compareTo(zi.min())>0&&(n.readTime=Es(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ps(this.R),e.removeTarget=t,this.cr(e)},e}(Ph),Mh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return ut(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Ui(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ui(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ks(t.updateTime):ks(e);return n.isEqual(zi.min())&&(n=ks(e)),new Ra(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ks(t.commitTime);return this.listener.Tr(n,e)}return Ui(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ps(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Us(e.R,t)}))};this.cr(n)},e}(Ph),Fh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return ut(e,t),e.prototype.br=function(){if(this.Rr)throw new Ri(Ci.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ci.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ri(Ci.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ci.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ri(Ci.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Uh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Pi(e),this.Vr=!1):xi("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),jh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return ct(o,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return Qh(this)?(xi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return ct(this,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return(e=ji(t)).Or.add(4),[4,qh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Vh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Uh(n,r)};function Vh(t){return ct(this,void 0,void 0,(function(){var e,n;return ht(this,(function(r){switch(r.label){case 0:if(!Qh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function qh(t){return ct(this,void 0,void 0,(function(){var e,n;return ht(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Bh(t,e){var n=ji(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Wh(n)?zh(n):cl(n).er()&&Gh(n,e))}function Kh(t,e){var n=ji(t),r=cl(n);n.$r.delete(e),r.er()&&Hh(n,e),0===n.$r.size&&(r.er()?r.ir():Qh(n)&&n.Br.set("Unknown"))}function Gh(t,e){t.qr.U(e.targetId),cl(t).mr(e)}function Hh(t,e){t.qr.U(e),cl(t).yr(e)}function zh(t){t.qr=new ms({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),cl(t).start(),t.Br.Sr()}function Wh(t){return Qh(t)&&!cl(t).tr()&&t.$r.size>0}function Qh(t){return 0===ji(t).Or.size}function Xh(t){t.qr=void 0}function $h(t){return ct(this,void 0,void 0,(function(){return ht(this,(function(e){return t.$r.forEach((function(e,n){Gh(t,e)})),[2]}))}))}function Yh(t,e){return ct(this,void 0,void 0,(function(){return ht(this,(function(n){return Xh(t),Wh(t)?(t.Br.Nr(e),zh(t)):t.Br.set("Unknown"),[2]}))}))}function Jh(t,e,n){return ct(this,void 0,void 0,(function(){var r,i,o;return ht(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof gs&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o;return ht(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),xi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Zh(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ds?t.qr.X(e):e instanceof vs?t.qr.rt(e):t.qr.et(e),n.isEqual(zi.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,zc(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(eo.EMPTY_BYTE_STRING,n.snapshotVersion)),Hh(t,e);var r=new Uu(n.target,e,1,n.sequenceNumber);Gh(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return xi("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Zh(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Zh(t,e,n){return ct(this,void 0,void 0,(function(){var r=this;return ht(this,(function(i){switch(i.label){case 0:if(!Cu(e))throw e;return t.Or.add(1),[4,qh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return zc(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return ct(r,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return xi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Vh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function tl(t,e){return e().catch((function(n){return Zh(t,n,e)}))}function el(t){return ct(this,void 0,void 0,(function(){var e,n,r,i,o;return ht(this,(function(a){switch(a.label){case 0:e=ji(t),n=hl(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Qh(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Xc(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=hl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Zh(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return nl(e)&&rl(e),[2]}}))}))}function nl(t){return Qh(t)&&!hl(t).tr()&&t.kr.length>0}function rl(t){hl(t).start()}function il(t){return ct(this,void 0,void 0,(function(){return ht(this,(function(e){return hl(t).Ar(),[2]}))}))}function ol(t){return ct(this,void 0,void 0,(function(){var e,n,r,i;return ht(this,(function(o){for(e=hl(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function al(t,e,n){return ct(this,void 0,void 0,(function(){var r,i;return ht(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Fu.from(r,e,n),[4,tl(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,el(t)];case 2:return o.sent(),[2]}}))}))}function sl(t,e){return ct(this,void 0,void 0,(function(){return ht(this,(function(n){switch(n.label){case 0:return e&&hl(t).pr?[4,function(t,e){return ct(this,void 0,void 0,(function(){var n,r;return ht(this,(function(i){switch(i.label){case 0:return Xa(r=e.code)&&r!==Ci.ABORTED?(n=t.kr.shift(),hl(t).sr(),[4,tl(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,el(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return nl(t)&&rl(t),[2]}}))}))}function ul(t,e){return ct(this,void 0,void 0,(function(){var n;return ht(this,(function(r){switch(r.label){case 0:return n=ji(t),e?(n.Or.delete(2),[4,Vh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,qh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function cl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ji(t);return r.br(),new Lh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:$h.bind(null,t),Ri:Yh.bind(null,t),_r:Jh.bind(null,t)}),t.Mr.push((function(n){return ct(e,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Wh(t)?zh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Xh(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function hl(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=ji(t);return r.br(),new Mh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:il.bind(null,t),Ri:sl.bind(null,t),Ir:ol.bind(null,t),Tr:al.bind(null,t)}),t.Mr.push((function(n){return ct(e,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,el(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(xi("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var ll=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Tu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ri(Ci.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function fl(t,e){if(Pi("AsyncQueue",e+": "+t),Cu(t))return new Ri(Ci.UNAVAILABLE,e+": "+t);throw t}var pl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||fo.comparator(e.key,n.key)}:function(t,e){return fo.comparator(t.key,e.key)},this.keyedMap=os(),this.sortedSet=new Ya(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),dl=function(){function t(){this.Qr=new Ya(fo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Fi():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),vl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,pl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ua(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),gl=function(){this.Wr=void 0,this.listeners=[]},yl=function(){this.queries=new Ec((function(t){return ca(t)}),ua),this.onlineState="Unknown",this.Gr=new Set};function ml(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return ht(this,(function(c){switch(c.label){case 0:if(n=ji(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new gl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=fl(s,"Initialization of query '"+ha(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Il(n),[2]}}))}))}function bl(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o,a;return ht(this,(function(s){return n=ji(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function wl(t,e){for(var n=ji(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Il(n)}function _l(t,e,n){var r=ji(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Il(t){t.Gr.forEach((function(t){t.next()}))}var Tl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new vl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=vl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),El=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Sl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Os(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Fs(this.R,t.document,!1):Ro.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return ks(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Al(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Sl(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||cs()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return ct(this,void 0,void 0,(function(){var t,e,n,r,i;return ht(this,(function(o){switch(o.label){case 0:return[4,nh(this.localStore,new Sl(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,rh(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Uc(Object.assign({},this.progress),t))]}}))}))}}();function Al(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var kl=function(t){this.key=t},Nl=function(t){this.key=t},Cl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=cs(),this.mutatedKeys=cs(),this.lo=fa(t),this.fo=new pl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new dl,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=ta(this.query)&&i.size===this.query.limit?i.last():null,c=ea(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=la(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),ta(this.query)||ea(this.query))for(;a.size>this.query.limit;){var h=ta(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new vl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new dl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=cs(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Nl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new kl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=cs();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return vl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Rl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ol=function(t){this.key=t,this.bo=!1},Dl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ec((function(t){return ca(t)}),ua),this.Vo=new Map,this.So=new Set,this.Do=new Ya(fo.comparator),this.Co=new Map,this.No=new oh,this.xo={},this.Fo=new Map,this.ko=fc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function xl(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o,a,s;return ht(this,(function(u){switch(u.label){case 0:return n=cf(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,$c(n.localStore,aa(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Pl(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Bh(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Pl(t,e,n,r){return ct(this,void 0,void 0,(function(){var i,o,a,s,u,c;return ht(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return ct(this,void 0,void 0,(function(){var i,o,a;return ht(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Jc(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Wl(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Jc(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Cl(e,i.Bn),a=o._o(i.documents),s=ps.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Wl(t,n,u.To),c=new Rl(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Ll(t,e){return ct(this,void 0,void 0,(function(){var n,r,i;return ht(this,(function(o){switch(o.label){case 0:return n=ji(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!ua(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Yc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Kh(n.remoteStore,r.targetId),Hl(n,r.targetId)})).catch(yc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Hl(n,r.targetId),[4,Yc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ml(t,e,n){return ct(this,void 0,void 0,(function(){var r,i,o,a;return ht(this,(function(s){switch(s.label){case 0:r=hf(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=ji(t),i=Hi.now(),o=e.reduce((function(t,e){return t.add(e.key)}),cs());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=Ma(c,n.get(c.key));null!=h&&a.push(new Va(c.key,h,Co(h.value.mapValue),Oa.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ya(Bi)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,$l(r,i.changes)];case 3:return s.sent(),[4,el(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=fl(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Fl(t,e){return ct(this,void 0,void 0,(function(){var n,r;return ht(this,(function(i){switch(i.label){case 0:n=ji(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Wc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Ui(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ui(r.bo):t.removedDocuments.size>0&&(Ui(r.bo),r.bo=!1))})),[4,$l(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,yc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ul(t,e,n){var r=ji(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ji(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Il(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jl(t,e,n){return ct(this,void 0,void 0,(function(){var r,i,o,a,s,u;return ht(this,(function(c){switch(c.label){case 0:return(r=ji(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Ya(fo.comparator)).insert(o,Ro.newNoDocument(o,zi.min())),s=cs().add(o),u=new fs(zi.min(),new Map,new ts(Bi),a,s),[4,Fl(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Xl(r),[3,4];case 2:return[4,Yc(r.localStore,e,!1).then((function(){return Hl(r,e,n)})).catch(yc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Vl(t,e){return ct(this,void 0,void 0,(function(){var n,r,i;return ht(this,(function(o){switch(o.label){case 0:n=ji(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Hc(n.localStore,e)];case 2:return i=o.sent(),Gl(n,r,null),Kl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,$l(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,yc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ql(t,e,n){return ct(this,void 0,void 0,(function(){var r,i;return ht(this,(function(o){switch(o.label){case 0:r=ji(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ji(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Ui(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Gl(r,e,n),Kl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,$l(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,yc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Bl(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o,a;return ht(this,(function(s){switch(s.label){case 0:Qh((n=ji(t)).remoteStore)||xi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=ji(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=fl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Kl(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Gl(t,e,n){var r=ji(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Hl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||zl(t,e)}))}function zl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Kh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Xl(t))}function Wl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof kl?(t.No.addReference(o.key,e),Ql(t,o)):o instanceof Nl?(xi("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||zl(t,o.key)):Fi()}}function Ql(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(xi("SyncEngine","New document in limbo: "+n),t.So.add(r),Xl(t))}function Xl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new fo(Yi.fromString(e)),r=t.ko.next();t.Co.set(r,new Ol(n)),t.Do=t.Do.insert(n,r),Bh(t.remoteStore,new Uu(aa(Zo(n.path)),r,2,Ni.o))}}function $l(t,e,n){return ct(this,void 0,void 0,(function(){var r,i,o,a;return ht(this,(function(s){switch(s.label){case 0:return r=ji(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Vc.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return ht(this,(function(l){switch(l.label){case 0:n=ji(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Eu.forEach(e,(function(e){return Eu.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Eu.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Cu(r=l.sent()))throw r;return xi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Yl(t,e){return ct(this,void 0,void 0,(function(){var n,r;return ht(this,(function(i){switch(i.label){case 0:return(n=ji(t)).currentUser.isEqual(e)?[3,3]:(xi("SyncEngine","User change. New user:",e.toKey()),[4,Gc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Ri(Ci.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,$l(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Jl(t,e){var n=ji(t),r=n.Co.get(e);if(r&&r.bo)return cs().add(r.key);var i=cs(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Zl(t,e){return ct(this,void 0,void 0,(function(){var n,r,i;return ht(this,(function(o){switch(o.label){case 0:return[4,Jc((n=ji(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Wl(n,e.targetId,i.To),i)]}}))}))}function tf(t){return ct(this,void 0,void 0,(function(){var e;return ht(this,(function(n){return[2,th((e=ji(t)).localStore).then((function(t){return $l(e,t)}))]}))}))}function ef(t,e,n,r){return ct(this,void 0,void 0,(function(){var i,o;return ht(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=ji(t),r=ji(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Eu.resolve(null)}))}))}((i=ji(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,el(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Gl(i,e,r||null),Kl(i,e),function(t,e){ji(ji(t)._n).Gt(e)}(i.localStore,e)):Fi(),a.label=4;case 4:return[4,$l(i,o)];case 5:return a.sent(),[3,7];case 6:xi("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function nf(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return ht(this,(function(h){switch(h.label){case 0:return cf(n=ji(t)),hf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,rf(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,ul(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],Bh(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Hl(n,e),Yc(n.localStore,e,!0)})),Kh(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,rf(n,u)];case 5:return h.sent(),function(t){var e=ji(t);e.Co.forEach((function(t,n){Kh(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ya(fo.comparator)}(n),n.$o=!1,[4,ul(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function rf(t,e,n){return ct(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,p,d,v;return ht(this,(function(g){switch(g.label){case 0:n=ji(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,$c(n.localStore,aa(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,Zl(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Zc(n.localStore,s)];case 8:return v=g.sent(),[4,$c(n.localStore,v)];case 9:return u=g.sent(),[4,Pl(n,of(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function of(t){return Jo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function af(t){var e=ji(t);return ji(ji(e.localStore).persistence).fn()}function sf(t,e,n,r){return ct(this,void 0,void 0,(function(){var i,o,a;return ht(this,(function(s){switch(s.label){case 0:return(i=ji(t)).$o?(xi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,th(i.localStore)];case 3:return o=s.sent(),a=fs.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,$l(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Yc(i.localStore,e,!0)];case 6:return s.sent(),Hl(i,e,r),[3,8];case 7:Fi(),s.label=8;case 8:return[2]}}))}))}function uf(t,e,n){return ct(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return ht(this,(function(p){switch(p.label){case 0:if(!(r=cf(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(xi("SyncEngine","Adding an already active target "+a),[3,5]):[4,Zc(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,$c(r.localStore,s)];case 3:return u=p.sent(),[4,Pl(r,of(s),u.targetId,!1)];case 4:p.sent(),Bh(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return ht(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Yc(r.localStore,t,!1).then((function(){Kh(r.remoteStore,t),Hl(r,t)})).catch(yc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function cf(t){var e=ji(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jl.bind(null,e),e.vo._r=wl.bind(null,e.eventManager),e.vo.Mo=_l.bind(null,e.eventManager),e}function hf(t){var e=ji(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ql.bind(null,e),e}var lf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return ct(this,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return this.R=Dh(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Kc(this.persistence,new qc,t.initialUser,this.R)},t.prototype.qo=function(t){return new lh(ph.bs,this.R)},t.prototype.Bo=function(t){return new Eh},t.prototype.terminate=function(){return ct(this,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),ff=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ut(e,t),e.prototype.initialize=function(e){return ct(this,void 0,void 0,(function(){return ht(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,eh(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,hf(this.Qo.syncEngine)];case 4:return n.sent(),[4,el(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Kc(this.persistence,new qc,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new wc(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Fc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ic.withCacheSize(this.cacheSizeBytes):ic.DEFAULT;return new Pc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Rh(),Oh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Eh},e}(lf),pf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ut(e,t),e.prototype.initialize=function(e){return ct(this,void 0,void 0,(function(){var n,r=this;return ht(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Th?(this.sharedClientState.syncEngine={ui:ef.bind(null,n),ai:sf.bind(null,n),hi:uf.bind(null,n),fn:af.bind(null,n),ci:tf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return ct(r,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return[4,nf(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Rh();if(!Th.yt(e))throw new Ri(Ci.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Fc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Th(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(ff),df=function(){function t(){}return t.prototype.initialize=function(t,e){return ct(this,void 0,void 0,(function(){var n=this;return ht(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ul(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Yl.bind(null,this.syncEngine),[4,ul(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new yl},t.prototype.createDatastore=function(t){var e,n=Dh(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Ch(e));return function(t,e,n){return new Fh(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ul(a.syncEngine,t,0)},o=Ah.yt()?new Ah:new Sh,new jh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Dl(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return ct(this,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return e=ji(t),xi("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,qh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var vf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),gf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Tu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return ct(this,void 0,void 0,(function(){return ht(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return ct(this,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return ct(this,void 0,void 0,(function(){var t,e,n,r;return ht(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new El(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return ct(this,void 0,void 0,(function(){var t,e;return ht(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return ct(this,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return ct(this,void 0,void 0,(function(){var t,e;return ht(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return ct(this,void 0,void 0,(function(){var e,n=this;return ht(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ri(Ci.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return ct(this,void 0,void 0,(function(){var n,r,i,o,a,s;return ht(this,(function(u){switch(u.label){case 0:return n=ji(t),r=Ps(n.R)+"/documents",i={documents:e.map((function(t){return Rs(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ui(!!e.found),e.found.name,e.found.updateTime;var n=Os(t,e.found.name),r=ks(e.found.updateTime),i=new No({mapValue:{fields:e.found.fields}});return Ro.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ui(!!e.missing),Ui(!!e.readTime);var n=Os(t,e.missing),r=ks(e.readTime);return Ro.newNoDocument(n,r)}(t,e):Fi()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Ui(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new za(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return ct(this,void 0,void 0,(function(){var t,e=this;return ht(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=fo.fromPath(n);e.mutations.push(new Wa(r,e.precondition(r)))})),[4,function(t,e){return ct(this,void 0,void 0,(function(){var n,r,i;return ht(this,(function(o){switch(o.label){case 0:return n=ji(t),r=Ps(n.R)+"/documents",i={writes:e.map((function(t){return Us(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Fi();e=zi.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ri(Ci.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Oa.updateTime(e):Oa.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(zi.min()))throw new Ri(Ci.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oa.updateTime(e)}return Oa.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),yf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new xh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return ct(t,void 0,void 0,(function(){var t,e,n=this;return ht(this,(function(r){return t=new gf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!co(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Xa(e)}return!1},t}(),mf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=dh.UNAUTHENTICATED,this.clientId=qi.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return ct(r,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return xi("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return ct(this,void 0,void 0,(function(){return ht(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ri(Ci.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Tu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return ct(t,void 0,void 0,(function(){var t,n;return ht(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=fl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function bf(t,e){return ct(this,void 0,void 0,(function(){var n,r,i=this;return ht(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),xi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return ct(i,void 0,void 0,(function(){return ht(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Gc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function wf(t,e){return ct(this,void 0,void 0,(function(){var n,r;return ht(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,_f(t)];case 1:return n=i.sent(),xi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return ct(this,void 0,void 0,(function(){var n,r;return ht(this,(function(i){switch(i.label){case 0:return(n=ji(t)).asyncQueue.verifyOperationInProgress(),xi("RemoteStore","RemoteStore received new credentials"),r=Qh(n),n.Or.add(3),[4,qh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Vh(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function _f(t){return ct(this,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(xi("FirestoreClient","Using default OfflineComponentProvider"),[4,bf(t,new lf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function If(t){return ct(this,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(xi("FirestoreClient","Using default OnlineComponentProvider"),[4,wf(t,new df)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Tf(t){return _f(t).then((function(t){return t.persistence}))}function Ef(t){return _f(t).then((function(t){return t.localStore}))}function Sf(t){return If(t).then((function(t){return t.remoteStore}))}function Af(t){return If(t).then((function(t){return t.syncEngine}))}function kf(t){return ct(this,void 0,void 0,(function(){var e,n;return ht(this,(function(r){switch(r.label){case 0:return[4,If(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=xl.bind(null,e.syncEngine),n.onUnlisten=Ll.bind(null,e.syncEngine),n)]}}))}))}function Nf(t,e,n){var r=this;void 0===n&&(n={});var i=new Tu;return t.asyncQueue.enqueueAndForget((function(){return ct(r,void 0,void 0,(function(){var r;return ht(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new vf({next:function(o){e.enqueueAndForget((function(){return bl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Ri(Ci.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Ri(Ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Tl(Zo(n.path),o,{includeMetadataChanges:!0,so:!0});return ml(t,a)},[4,kf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Cf(t,e,n){var r=this;void 0===n&&(n={});var i=new Tu;return t.asyncQueue.enqueueAndForget((function(){return ct(r,void 0,void 0,(function(){var r;return ht(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new vf({next:function(n){e.enqueueAndForget((function(){return bl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Ri(Ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Tl(n,o,{includeMetadataChanges:!0,so:!0});return ml(t,a)},[4,kf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Rf=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Of=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Df=new Map,xf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Pf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(dh.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Lf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Mf=function(){function t(t){var e=this;this.currentUser=dh.UNAUTHENTICATED,this.oc=new Tu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){xi("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(xi("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(xi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ui("string"==typeof n.accessToken),new xf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return ct(n,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Ui(null===t||"string"==typeof t),new dh(t)},t}(),Ff=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=dh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Uf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Ff(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(dh.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function jf(t,e,n){if(!n)throw new Ri(Ci.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Vf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function qf(t,e,n,r){if(!0===e&&!0===r)throw new Ri(Ci.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Bf(t){if(!fo.isDocumentKey(t))throw new Ri(Ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Kf(t){if(fo.isDocumentKey(t))throw new Ri(Ci.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Gf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Fi()}function Hf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ri(Ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Gf(t);throw new Ri(Ci.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function zf(t,e){if(e<=0)throw new Ri(Ci.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Wf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ri(Ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ri(Ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,qf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Qf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wf({}),this._settingsFrozen=!1,t instanceof Of?(this._databaseId=t,this._credentials=new Pf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ri(Ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Of(t.options.projectId)}(t),this._credentials=new Mf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ri(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ri(Ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Pf;switch(t.type){case"gapi":var e=t.client;return Ui(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Uf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ri(Ci.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Df.get(this))&&(xi("ComponentProvider","Removing Datastore"),Df.delete(this),t.terminate()),Promise.resolve();var t},t}(),Xf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Yf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),$f=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Yf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Zo(r))||this)._path=r,i.type="collection",i}return ut(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Xf(this.firestore,null,new fo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}($f);function Jf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=E(t),jf("collection","path",e),t instanceof Qf)return Kf(n=Yi.fromString.apply(Yi,lt([e],r))),new Yf(t,null,n);if(!(t instanceof Xf||t instanceof Yf))throw new Ri(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kf(n=Yi.fromString.apply(Yi,lt([t.path],r)).child(Yi.fromString(e))),new Yf(t.firestore,null,n)}function Zf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=E(t),1===arguments.length&&(e=qi.u()),jf("doc","path",e),t instanceof Qf)return Bf(n=Yi.fromString.apply(Yi,lt([e],r))),new Xf(t,null,new fo(n));if(!(t instanceof Xf||t instanceof Yf))throw new Ri(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bf(n=t._path.child(Yi.fromString.apply(Yi,lt([e],r)))),new Xf(t.firestore,t instanceof Yf?t.converter:null,new fo(n))}function tp(t,e){return t=E(t),e=E(e),(t instanceof Xf||t instanceof Yf)&&(e instanceof Xf||e instanceof Yf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ep(t,e){return t=E(t),e=E(e),t instanceof $f&&e instanceof $f&&t.firestore===e.firestore&&ua(t._query,e._query)&&t.converter===e.converter}var np=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new xh(this,"async_queue_retry"),this.Ic=function(){var e=Oh();e&&xi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Oh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Oh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Tu;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return ct(this,void 0,void 0,(function(){var t,e=this;return ht(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Cu(t=n.sent()))throw t;return xi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Pi("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=ll.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Fi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return ct(this,void 0,void 0,(function(){var t;return ht(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function rp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Tu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new np,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return ut(e,t),e.prototype._terminate=function(){return this._firestoreClient||ap(this),this._firestoreClient.terminate()},e}(Qf);function op(t){return t._firestoreClient||ap(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ap(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Rf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new mf(t._credentials,t._queue,r)}function sp(t,e,n){var r=this,i=new Tu;return t.asyncQueue.enqueue((function(){return ct(r,void 0,void 0,(function(){var r;return ht(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,bf(t,n)];case 1:return o.sent(),[4,wf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ci.FAILED_PRECONDITION||t.code===Ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function up(t){if(t._initialized||t._terminated)throw new Ri(Ci.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var cp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zi(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),hp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(eo.fromBase64String(e))}catch(e){throw new Ri(Ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(eo.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),lp=function(t){this._methodName=t},fp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ri(Ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ri(Ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Bi(this._lat,t._lat)||Bi(this._long,t._long)},t}(),pp=/^__.*__$/,dp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Va(t,this.data,this.fieldMask,e,this.fieldTransforms):new ja(t,this.data,e,this.fieldTransforms)},t}(),vp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Va(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function gp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fi()}}var yp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return Fp(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(gp(this.Nc)&&pp.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),mp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Dh(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new yp({Nc:t,methodName:e,qc:n,path:Zi.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function bp(t){var e=t._freezeSettings(),n=Dh(t._databaseId);return new mp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wp(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);xp("Data must be an object, but it was:",a,r);var s,u,c=Op(r,a);if(o.merge)s=new to(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Pp(e,f[l],n);if(!a.contains(p))throw new Ri(Ci.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Up(h,p)||h.push(p)}s=new to(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new dp(new No(c),s,u)}var _p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(lp);function Ip(t,e,n){return new yp({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Tp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype._toFieldTransform=function(t){return new Ca(t.path,new _a)},e.prototype.isEqual=function(t){return t instanceof e},e}(lp),Ep=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return ut(e,t),e.prototype._toFieldTransform=function(t){var e=Ip(this,t,!0),n=this.Kc.map((function(t){return Rp(t,e)})),r=new Ia(n);return new Ca(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(lp),Sp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return ut(e,t),e.prototype._toFieldTransform=function(t){var e=Ip(this,t,!0),n=this.Kc.map((function(t){return Rp(t,e)})),r=new Ea(n);return new Ca(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(lp),Ap=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return ut(e,t),e.prototype._toFieldTransform=function(t){var e=new Aa(t.R,ga(t.R,this.Qc));return new Ca(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(lp);function kp(t,e,n,r){var i=t.Uc(1,e,n);xp("Data must be an object, but it was:",i,r);var o=[],a=No.empty();Qi(r,(function(t,r){var s=Mp(e,t,n);r=E(r);var u=i.Oc(s);if(r instanceof _p)o.push(s);else{var c=Rp(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new to(o);return new vp(a,s,i.fieldTransforms)}function Np(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[Pp(e,r,n)],u=[i];if(o.length%2!=0)throw new Ri(Ci.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Pp(e,o[c])),u.push(o[c+1]);for(var h=[],l=No.empty(),f=s.length-1;f>=0;--f)if(!Up(h,s[f])){var p=s[f],d=u[f];d=E(d);var v=a.Oc(p);if(d instanceof _p)h.push(p);else{var g=Rp(d,v);null!=g&&(h.push(p),l.set(p,g))}}var y=new to(h);return new vp(l,y,a.fieldTransforms)}function Cp(t,e,n,r){return void 0===r&&(r=!1),Rp(n,t.Uc(r?4:3,e))}function Rp(t,e){if(Dp(t=E(t)))return xp("Unsupported field value:",e,t),Op(t,e);if(t instanceof lp)return function(t,e){if(!gp(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Rp(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=E(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ga(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Hi.fromDate(t);return{timestampValue:Es(e.R,n)}}if(t instanceof Hi)return n=new Hi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Es(e.R,n)};if(t instanceof fp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hp)return{bytesValue:Ss(e.R,t._byteString)};if(t instanceof Xf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ns(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Gf(t))}(t,e)}function Op(t,e){var n={};return Xi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(t,(function(t,r){var i=Rp(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Dp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Hi||t instanceof fp||t instanceof hp||t instanceof Xf||t instanceof lp)}function xp(t,e,n){if(!Dp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Gf(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Pp(t,e,n){if((e=E(e))instanceof cp)return e._internalPath;if("string"==typeof e)return Mp(t,e);throw Fp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Lp=new RegExp("[~\\*/\\[\\]]");function Mp(t,e,n){if(e.search(Lp)>=0)throw Fp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(cp.bind.apply(cp,lt([void 0],e.split(".")))))._internalPath}catch(jd){throw Fp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Fp(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Ri(Ci.INVALID_ARGUMENT,(s+=". ")+t+u)}function Up(t,e){return t.some((function(t){return t.isEqual(e)}))}var jp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Xf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Vp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(qp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(jp);function qp(t,e){return"string"==typeof e?Mp(t,e):e instanceof cp?e._internalPath:e._delegate._internalPath}var Bp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Kp=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ut(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(qp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(jp),Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Kp),Hp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Bp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Gp(n._firestore,n._userDataWriter,r.key,r,new Bp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ri(Ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Gp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Bp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Gp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Bp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:zp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function zp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fi()}}function Wp(t,e){return t instanceof Kp&&e instanceof Kp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Hp&&e instanceof Hp&&t._firestore===e._firestore&&ep(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Qp(t){if(ea(t)&&0===t.explicitOrderBy.length)throw new Ri(Ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xp=function(){};function $p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Yp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return ut(e,t),e.prototype._apply=function(t){var e=bp(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){id(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(rd(r,t,l))}s={arrayValue:{values:u}}}else s=rd(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||id(a,o),s=Cp(n,"where",a,"in"===o||"not-in"===o);var f=Mo.create(i,o,s);return function(t,e){if(e.g()){var n=ra(t);if(null!==n&&!n.isEqual(e.field))throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=na(t);null!==r&&od(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ri(Ci.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ri(Ci.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new $f(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Xp),Jp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return ut(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Wo(e,n);return function(t,e){if(null===na(t)){var n=ra(t);null!==n&&od(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new $f(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Yo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Xp),Zp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return ut(e,t),e.prototype._apply=function(t){return new $f(t.firestore,t.converter,sa(t._query,this.Hc,this.Jc))},e}(Xp),td=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return ut(e,t),e.prototype._apply=function(t){var e=nd(t,this.type,this.Yc,this.Xc);return new $f(t.firestore,t.converter,function(t,e){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Xp),ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return ut(e,t),e.prototype._apply=function(t){var e=nd(t,this.type,this.Yc,this.Xc);return new $f(t.firestore,t.converter,function(t,e){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Xp);function nd(t,e,n,r){if(n[0]=E(n[0]),n[0]instanceof jp)return function(t,e,n,r,i){if(!r)throw new Ri(Ci.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=oa(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(_o(e,r.key));else{var c=r.data.field(u.field);if(ao(c))throw new Ri(Ci.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ho(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=bp(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Ri(Ci.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ia(t)&&-1!==c.indexOf("/"))throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Yi.fromString(c));if(!fo.isDocumentKey(h))throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new fo(h);s.push(_o(e,l))}else{var f=Cp(n,r,c);s.push(f)}}return new Ho(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function rd(t,e,n){if("string"==typeof(n=E(n))){if(""===n)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ia(e)&&-1!==n.indexOf("/"))throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yi.fromString(n));if(!fo.isDocumentKey(r))throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return _o(t,new fo(r))}if(n instanceof Xf)return _o(t,n._key);throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Gf(n)+".")}function id(t,e){if(!Array.isArray(t)||0===t.length)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function od(t,e,n){if(!n.isEqual(e))throw new Ri(Ci.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var ad=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),po(t)){case 0:return null;case 1:return t.booleanValue;case 2:return io(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(oo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Fi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Qi(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new fp(io(t.latitude),io(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=so(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(uo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ro(t);return new Hi(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Yi.fromString(t);Ui(Zs(n));var r=new Of(n.get(1),n.get(3)),i=new fo(n.popFirst(5));return r.isEqual(e)||Pi("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function sd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ud=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ut(e,t),e.prototype.convertBytes=function(t){return new hp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xf(this.firestore,null,e)},e}(ad),cd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=bp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=hd(t,this._firestore),i=sd(r.converter,e,n),o=wp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Oa.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=hd(t,this._firestore);return o="string"==typeof(e=E(e))||e instanceof cp?Np(this._dataReader,"WriteBatch.update",a._key,e,n,r):kp(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Oa.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=hd(t,this._firestore);return this._mutations=this._mutations.concat(new za(e._key,Oa.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ri(Ci.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function hd(t,e){if((t=E(t)).firestore!==e)throw new Ri(Ci.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ld=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ut(e,t),e.prototype.convertBytes=function(t){return new hp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xf(this.firestore,null,e)},e}(ad);function fd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Hf(t,Xf);var o=Hf(t.firestore,ip),a=bp(o);return dd(o,[("string"==typeof(e=E(e))||e instanceof cp?Np(a,"updateDoc",t._key,e,n,r):kp(a,"updateDoc",t._key,e)).toMutation(t._key,Oa.exists(!0))])}function pd(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=E(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||rp(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(rp(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Xf)c=Hf(t.firestore,ip),h=Zo(t._key.path),u={next:function(e){i[s]&&i[s](vd(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=Hf(t,$f);c=Hf(p.firestore,ip),h=p._query;var d=new ld(c);u={next:function(t){i[s]&&i[s](new Hp(c,d,p,t))},error:i[s+1],complete:i[s+2]},Qp(t._query)}return function(t,e,n,r){var i=this,o=new vf(r),a=new Tl(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return ct(i,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return e=ml,[4,kf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return ct(i,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return e=bl,[4,kf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(op(c),h,l,u)}function dd(t,e){return function(t,e){var n=this,r=new Tu;return t.asyncQueue.enqueueAndForget((function(){return ct(n,void 0,void 0,(function(){var n;return ht(this,(function(i){switch(i.label){case 0:return n=Ml,[4,Af(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(op(t),e)}function vd(t,e,n){var r=n.docs.get(e._key),i=new ld(t);return new Kp(t,i,e._key,r,new Bp(n.hasPendingWrites,n.fromCache),e.converter)}var gd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return ut(e,t),e.prototype.get=function(e){var n=this,r=hd(e,this._firestore),i=new ld(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Kp(n._firestore,i,r._key,t._document,new Bp(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=bp(t)}return t.prototype.get=function(t){var e=this,n=hd(t,this._firestore),r=new ud(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Fi();var i=t[0];if(i.isFoundDocument())return new jp(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new jp(e._firestore,r,n._key,null,n.converter);throw Fi()}))},t.prototype.set=function(t,e,n){var r=hd(t,this._firestore),i=sd(r.converter,e,n),o=wp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=hd(t,this._firestore);return o="string"==typeof(e=E(e))||e instanceof cp?Np(this._dataReader,"Transaction.update",a._key,e,n,r):kp(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=hd(t,this._firestore);return this._transaction.delete(e._key),this},t}());function yd(){if("undefined"==typeof Uint8Array)throw new Ri(Ci.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function md(){if("undefined"==typeof atob)throw new Ri(Ci.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var bd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return md(),new t(hp.fromBase64String(e))},t.fromUint8Array=function(e){return yd(),new t(hp.fromUint8Array(e))},t.prototype.toBase64=function(){return md(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return yd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),wd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){up(t=Hf(t,ip));var n=op(t),r=t._freezeSettings(),i=new df;return sp(n,i,new ff(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){up(t=Hf(t,ip));var e=op(t),n=t._freezeSettings(),r=new df;return sp(e,r,new pf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ri(Ci.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Tu;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return ct(e,void 0,void 0,(function(){var e;return ht(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return ct(this,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return Au.yt()?(e=t+"main",[4,Au.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Fc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),_d=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Of||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Li("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Hf(t,Qf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Li("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=c({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[l.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),l.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Ri(Ci.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Lf(new xf(o,new dh(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ct(e,void 0,void 0,(function(){var e,n;return ht(this,(function(r){switch(r.label){case 0:return[4,Tf(t)];case 1:return e=r.sent(),[4,Sf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ji(t);return e.Or.delete(0),Vh(e)}(n))]}}))}))}))}(op(Hf(this._delegate,ip)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ct(e,void 0,void 0,(function(){var e,n;return ht(this,(function(r){switch(r.label){case 0:return[4,Tf(t)];case 1:return e=r.sent(),[4,Sf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return ct(this,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return(e=ji(t)).Or.add(0),[4,qh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(op(Hf(this._delegate,ip)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&qf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Tu;return t.asyncQueue.enqueueAndForget((function(){return ct(e,void 0,void 0,(function(){var e;return ht(this,(function(r){switch(r.label){case 0:return e=Bl,[4,Af(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(op(Hf(this._delegate,ip)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new vf(e);return t.asyncQueue.enqueueAndForget((function(){return ct(n,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return e=function(t,e){ji(t).Gr.add(e),e.next()},[4,kf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return ct(n,void 0,void 0,(function(){var e;return ht(this,(function(n){switch(n.label){case 0:return e=function(t,e){ji(t).Gr.delete(e)},[4,kf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(op(t=Hf(t,ip)),rp(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Ri(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ld(this,Jf(this._delegate,t))}catch(t){throw kd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ad(this,Zf(this._delegate,t))}catch(t){throw kd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Dd(this,function(t,e){if(t=Hf(t,Qf),jf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new $f(t,null,function(t){return new Yo(Yi.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw kd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Tu;return t.asyncQueue.enqueueAndForget((function(){return ct(n,void 0,void 0,(function(){var n;return ht(this,(function(i){switch(i.label){case 0:return[4,function(t){return If(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new yf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(op(t),(function(n){return e(new gd(t,n))}))}(this._delegate,(function(n){return t(new Td(e,n))}))},t.prototype.batch=function(){var t=this;return op(this._delegate),new Ed(new cd(this._delegate,(function(e){return dd(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Ri(Ci.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ri(Ci.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Id=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ut(e,t),e.prototype.convertBytes=function(t){return new bd(new hp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ad.eu(e,this.firestore,null)},e}(ad);var Td=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Id(t)}return t.prototype.get=function(t){var e=this,n=Md(t);return this._delegate.get(n).then((function(t){return new Rd(e._firestore,new Kp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Md(t);return n?(Vf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Md(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,lt([a,e,n],i)),this},t.prototype.delete=function(t){var e=Md(t);return this._delegate.delete(e),this},t}(),Ed=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Md(t);return n?(Vf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Md(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,lt([a,e,n],i)),this},t.prototype.delete=function(t){var e=Md(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Sd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Gp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Od(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Id(e),n),i.set(n,o)),o},t}();Sd.su=new WeakMap;var Ad=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Id(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Ri(Ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Xf(n._delegate,r,new fo(e)))},t.eu=function(e,n,r){return new t(n,new Xf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ld(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ld(this.firestore,Jf(this._delegate,t))}catch(t){throw kd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=E(t))instanceof Xf&&tp(this._delegate,t)},t.prototype.set=function(t,e){e=Vf("DocumentReference.set",e);try{return function(t,e,n){t=Hf(t,Xf);var r=Hf(t.firestore,ip),i=sd(t.converter,e,n);return dd(r,[wp(bp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Oa.none())])}(this._delegate,t,e)}catch(t){throw kd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?fd(this._delegate,t):fd.apply(void 0,lt([this._delegate,t,e],n))}catch(t){throw kd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return dd(Hf((t=this._delegate).firestore,ip),[new za(t._key,Oa.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Nd(e),i=Cd(e,(function(e){return new Rd(t.firestore,new Kp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return pd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Hf(t,Xf);var e=Hf(t.firestore,ip),n=op(e),r=new ld(e);return function(t,e){var n=this,r=new Tu;return t.asyncQueue.enqueueAndForget((function(){return ct(n,void 0,void 0,(function(){var n;return ht(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ct(this,void 0,void 0,(function(){var r,i;return ht(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ji(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ri(Ci.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=fl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Kp(e,r,t._key,n,new Bp(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Hf(t,Xf);var e=Hf(t.firestore,ip);return Nf(op(e),t._key,{source:"server"}).then((function(n){return vd(e,t,n)}))}(this._delegate):function(t){t=Hf(t,Xf);var e=Hf(t.firestore,ip);return Nf(op(e),t._key).then((function(n){return vd(e,t,n)}))}(this._delegate)).then((function(t){return new Rd(e.firestore,new Kp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Sd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function kd(t,e,n){return t.message=t.message.replace(e,n),t}function Nd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!rp(r))return r}return{}}function Cd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=rp(t[0])?t[0]:rp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Rd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ad(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Wp(this._delegate,t._delegate)},t}(),Od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Rd),Dd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Id(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,$p(this._delegate,function(t,e,n){var r=e,i=qp("where",t);return new Yp(i,r,n)}(e,n,r)))}catch(e){throw kd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,$p(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=qp("orderBy",t);return new Jp(r,n)}(e,n)))}catch(e){throw kd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,$p(this._delegate,function(t){return zf("limit",t),new Zp("limit",t,"F")}(e)))}catch(e){throw kd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,$p(this._delegate,function(t){return zf("limitToLast",t),new Zp("limitToLast",t,"L")}(e)))}catch(e){throw kd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$p(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new td("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw kd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$p(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new td("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw kd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$p(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ed("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw kd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$p(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ed("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw kd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return ep(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Hf(t,$f);var e=Hf(t.firestore,ip),n=op(e),r=new ld(e);return function(t,e){var n=this,r=new Tu;return t.asyncQueue.enqueueAndForget((function(){return ct(n,void 0,void 0,(function(){var n;return ht(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ct(this,void 0,void 0,(function(){var r,i,o,a,s;return ht(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Jc(t,e,!0)];case 1:return s=u.sent(),r=new Cl(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=fl(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Hp(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Hf(t,$f);var e=Hf(t.firestore,ip),n=op(e),r=new ld(e);return Cf(n,t._query,{source:"server"}).then((function(n){return new Hp(e,r,t,n)}))}(this._delegate):function(t){t=Hf(t,$f);var e=Hf(t.firestore,ip),n=op(e),r=new ld(e);return Qp(t._query),Cf(n,t._query).then((function(n){return new Hp(e,r,t,n)}))}(this._delegate)).then((function(t){return new Pd(e.firestore,new Hp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Nd(e),i=Cd(e,(function(e){return new Pd(t.firestore,new Hp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return pd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Sd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),xd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Od(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Pd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Dd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Od(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new xd(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Od(n._firestore,r))}))},t.prototype.isEqual=function(t){return Wp(this._delegate,t._delegate)},t}(),Ld=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return ut(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ad(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ad(this.firestore,void 0===t?Zf(this._delegate):Zf(this._delegate,t))}catch(t){throw kd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Hf(t.firestore,ip),r=Zf(t),i=sd(t.converter,e);return dd(n,[wp(bp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Oa.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Ad(e.firestore,t)}))},e.prototype.isEqual=function(t){return tp(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Sd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Dd);function Md(t){return Hf(t,Xf)}var Fd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(cp.bind.apply(cp,lt([void 0],t)))}return t.documentId=function(){return new t(Zi.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=E(t))instanceof cp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ud=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Tp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new _p("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ep("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sp("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ap("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var jd,Vd={Firestore:_d,GeoPoint:fp,Timestamp:Hi,Blob:bd,Transaction:Td,WriteBatch:Ed,DocumentReference:Ad,DocumentSnapshot:Rd,Query:Dd,QueryDocumentSnapshot:Od,QuerySnapshot:Pd,CollectionReference:Ld,FieldPath:Fd,FieldValue:Ud,setLogLevel:function(t){var e;e=t,Oi.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new R("firestore",(function(t){return function(t,e){return new _d(t,new ip(t,e),new wd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Vd)))})(jd=ot),jd.registerVersion("@firebase/firestore","2.3.9");var qd=function(t,e){return(qd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var Bd=function(){return(Bd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Kd(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(jd){o(jd)}}function s(t){try{u(r.throw(t))}catch(jd){o(jd)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Gd(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(jd){o=[6,jd],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function Hd(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}Object.create;var zd="firebasestorage.googleapis.com",Wd=function(t){function e(n,r){var i=t.call(this,Qd(n),"Firebase Storage: "+r+" ("+Qd(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}qd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._codeEquals=function(t){return Qd(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(g);function Qd(t){return"storage/"+t}function Xd(){return new Wd("unknown","An unknown error occurred, please check the error payload for server response.")}function $d(){return new Wd("canceled","User canceled the upload/download.")}function Yd(){return new Wd("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Jd(t){return new Wd("invalid-argument",t)}function Zd(){return new Wd("app-deleted","The Firebase app was deleted.")}function tv(t){return new Wd("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ev(t,e){return new Wd("invalid-format","String does not match format '"+t+"': "+e)}function nv(t){throw new Wd("internal-error","Internal error: "+t)}var rv={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},iv=function(t,e){this.data=t,this.contentType=e||null};function ov(t,e){switch(t){case rv.RAW:return new iv(av(e));case rv.BASE64:case rv.BASE64URL:return new iv(sv(t,e));case rv.DATA_URL:return new iv(function(t){var e=new uv(t);return e.base64?sv(rv.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(jd){throw ev(rv.DATA_URL,"Malformed data URL.")}return av(e)}(e.rest)}(e),new uv(e).contentType)}throw Xd()}function av(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function sv(t,e){switch(t){case rv.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw ev(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case rv.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ev(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(jd){throw ev(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var uv=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw ev(rv.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var cv,hv={STATE_CHANGED:"state_changed"},lv={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fv(t){switch(t){case"running":case"pausing":case"canceling":return lv.RUNNING;case"paused":return lv.PAUSED;case"success":return lv.SUCCESS;case"canceled":return lv.CANCELED;case"error":default:return lv.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(cv||(cv={}));var pv=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=cv.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=cv.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=cv.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw nv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw nv("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw nv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(jd){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw nv("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();var dv=function(){function t(){}return t.prototype.createConnection=function(){return new pv},t}(),vv=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(jd){return new t(e,"")}if(""===r.path)return r;throw new Wd("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===zd?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],p=l[h.indices.path];p||(p=""),r=new t(f,p),h.postModify(r);break}}if(null==r)throw function(t){return new Wd("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),gv=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function yv(t){return"string"===typeof t||t instanceof String}function mv(t){return bv()&&t instanceof Blob}function bv(){return"undefined"!==typeof Blob}function wv(t,e,n,r){if(r<e)throw Jd("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Jd("Invalid value for '"+t+"'. Expected "+n+" or less.")}function _v(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Iv(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var Tv=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(jd){o(jd)}else null!==a?((r=Xd()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?Zd():$d()):o(r=new Wd("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ev(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,s())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Hd([null,t],e));else{var i;s()||o?c.call.apply(c,Hd([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new Ev(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===cv.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Ev(a,r))}else{var s=r.getErrorCode()===cv.ABORT;e(!1,new Ev(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Ev=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function Sv(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Av(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Sv();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(bv())return new Blob(t);throw new Wd("unsupported-environment","This browser doesn't seem to support creating Blobs")}var kv=function(){function t(t,e){var n=0,r="";mv(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(mv(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(bv()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Av.apply(null,r))}var i=e.map((function(t){return yv(t)?ov(rv.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Nv(t){var e;try{e=JSON.parse(t)}catch(jd){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function Cv(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Rv(t,e){return e}var Ov=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Rv},Dv=null;function xv(){if(Dv)return Dv;var t=[];t.push(new Ov("bucket")),t.push(new Ov("generation")),t.push(new Ov("metageneration")),t.push(new Ov("name","fullPath",!0));var e=new Ov("name");e.xform=function(t,e){return function(t){return!yv(t)||t.length<2?t:Cv(t)}(e)},t.push(e);var n=new Ov("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Ov("timeCreated")),t.push(new Ov("updated")),t.push(new Ov("md5Hash",null,!0)),t.push(new Ov("cacheControl",null,!0)),t.push(new Ov("contentDisposition",null,!0)),t.push(new Ov("contentEncoding",null,!0)),t.push(new Ov("contentLanguage",null,!0)),t.push(new Ov("contentType",null,!0)),t.push(new Ov("metadata","customMetadata",!0)),Dv=t}function Pv(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new vv(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Lv(t,e,n){var r=Nv(e);return null===r?null:Pv(t,r,n)}function Mv(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Fv(t,e,n){var r=Nv(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new vv(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new vv(e,h.name)),r.items.push(s)}return r}(t,e,r)}var Uv=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function jv(t){if(!t)throw Xd()}function Vv(t,e){return function(n,r){var i=Lv(t,r,e);return jv(null!==i),i}}function qv(t,e){return function(n,r){var i=Lv(t,r,e);return jv(null!==i),function(t,e,n){var r=Nv(e);if(null===r)return null;if(!yv(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return _v("/b/"+o(r)+"/o/"+o(i),n)+Iv({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Bv(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Wd("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Wd("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Wd("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Wd("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Kv(t){var e=Bv(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Wd("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Gv(t,e,n){var r=_v(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Uv(r,"GET",Vv(t,n),i);return o.errorHandler=Kv(e),o}function Hv(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=_v(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new Uv(a,"GET",function(t,e){return function(n,r){var i=Fv(t,e,r);return jv(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=Bv(e),u}function zv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Wv=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Qv(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(jd){jv(!1)}return jv(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Xv=262144;function $v(t,e,n,r,i,o,a,s){var u=new Wv(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Wd("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(l,f);if(null===d)throw Yd();var v=e.maxUploadRetryTime,g=new Uv(n,"POST",(function(t,n){var i,a=Qv(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?Vv(e,o)(t,n):null,new Wv(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=Bv(t),g}var Yv=function(t,e,n){if(function(t){return"function"===typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function Jv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Zv=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=xv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=zv(e,r,i),s={name:a.fullPath},u=_v(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=Mv(a,n),l=t.maxUploadRetryTime,f=new Uv(u,"POST",(function(t){var e;Qv(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(jd){jv(!1)}return jv(yv(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=Bv(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new Uv(n,"POST",(function(t){var e=Qv(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(jd){jv(!1)}n||jv(!1);var i=Number(n);return jv(!isNaN(i)),new Wv(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Bv(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Xv*this._chunkMultiplier,n=new Wv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=$v(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(jd){return t._error=jd,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Xv*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=Gv(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=zv(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Mv(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=kv.getBlob(c,r,h);if(null===l)throw Yd();var f={name:u.fullPath},p=_v(o,t.host),d=t.maxUploadRetryTime,v=new Uv(p,"POST",Vv(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=Bv(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=$d(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=fv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Yv(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(fv(this._state)){case lv.SUCCESS:Jv(this._resolve.bind(null,this.snapshot))();break;case lv.CANCELED:case lv.ERROR:Jv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(fv(this._state)){case lv.RUNNING:case lv.PAUSED:t.next&&Jv(t.next.bind(t,this.snapshot))();break;case lv.SUCCESS:t.complete&&Jv(t.complete.bind(t))();break;case lv.CANCELED:case lv.ERROR:t.error&&Jv(t.error.bind(t,this._error))();break;default:t.error&&Jv(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),tg=function(){function t(t,e){this._service=t,this._location=e instanceof vv?e:vv.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new vv(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Cv(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new vv(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw tv(t)},t}();function eg(t){var e={prefixes:[],items:[]};return ng(t,e).then((function(){return e}))}function ng(t,e,n){return Kd(this,void 0,void 0,(function(){var r,i,o;return Gd(this,(function(a){switch(a.label){case 0:return[4,rg(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,ng(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function rg(t,e){return Kd(this,void 0,void 0,(function(){var n,r;return Gd(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&wv("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Hv(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function ig(t,e){return Kd(this,void 0,void 0,(function(){var n;return Gd(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=_v(e.fullServerUrl(),t.host),o=Mv(n,r),a=t.maxOperationRetryTime,s=new Uv(i,"PATCH",Vv(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Kv(e),s}(t.storage,t._location,e,xv()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function og(t){return Kd(this,void 0,void 0,(function(){var e;return Gd(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=_v(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Uv(r,"GET",qv(t,n),i);return o.errorHandler=Kv(e),o}(t.storage,t._location,xv()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Wd("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function ag(t){return Kd(this,void 0,void 0,(function(){var e;return Gd(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=_v(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new Uv(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Kv(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function sg(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new vv(t._location.bucket,n);return new tg(t.storage,r)}function ug(t){return/^[A-Za-z]+:\/\//.test(t)}function cg(t,e){if(t instanceof fg){var n=t;if(null==n._bucket)throw new Wd("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new tg(n,n._bucket);return null!=e?cg(r,e):r}if(void 0!==e){if(e.includes(".."))throw Jd('`path` param cannot contain ".."');return sg(t,e)}return t}function hg(t,e){if(e&&ug(e)){if(t instanceof fg)return new tg(t,e);throw Jd("To use ref(service, url), the first argument must be a Storage instance.")}return cg(t,e)}function lg(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:vv.makeFromBucketSpec(n,t)}var fg=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=zd,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?vv.makeFromBucketSpec(i,this._host):lg(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=vv.makeFromBucketSpec(this._url,t):this._bucket=lg(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){wv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){wv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Kd(this,void 0,void 0,(function(){var t,e;return Gd(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Kd(this,void 0,void 0,(function(){var t;return Gd(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new tg(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new gv(Zd());var i=function(t,e,n,r,i,o){var a=Iv(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Tv(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return Kd(this,void 0,void 0,(function(){var e,n,r;return Gd(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function pg(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Zv(t,new kv(e),n)}(t=E(t),e,n)}function dg(t){return function(t){return Kd(this,void 0,void 0,(function(){var e;return Gd(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Gv(t.storage,t._location,xv()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=E(t))}function vg(t,e){return hg(t=E(t),e)}var gg=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),yg=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new gg(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new gg(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new gg(t,i,i._ref))}:{next:e.next?function(t){return e.next(new gg(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),mg=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new bg(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new bg(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),bg=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return sg(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new yg(pg(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=rv.RAW),this._throwIfRoot("putString");var r=ov(e,t),i=Bd({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new yg(new Zv(this._delegate,new kv(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return eg(t=E(t))}(this._delegate).then((function(e){return new mg(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return rg(t=E(t),e)}(this._delegate,t||void 0).then((function(t){return new mg(t,e.storage)}))},t.prototype.getMetadata=function(){return dg(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return ig(t=E(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return og(t=E(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return ag(t=E(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw tv(t)},t}(),wg=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(ug(t))throw Jd("ref() expected a child path but got a URL, use refFromURL instead.");return new bg(vg(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!ug(t))throw Jd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vv.makeFromUrl(t,this._delegate.host)}catch(jd){throw Jd("refFromUrl() expected a valid full URL but got an invalid one.")}return new bg(vg(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function _g(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new wg(r,new fg(r,i,o,new dv,n,ot.SDK_VERSION))}!function(t){var e={TaskState:lv,TaskEvent:hv,StringFormat:rv,Storage:fg,Reference:bg};t.INTERNAL.registerComponent(new R("storage",_g,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.6.0")}(ot);var Ig={apiKey:"AIzaSyAiGpgw3tX3txG2YtoNjkWegaR1WOn0yoo",authDomain:"product-hunt-25af1.firebaseapp.com",projectId:"product-hunt-25af1",storageBucket:"product-hunt-25af1.appspot.com",messagingSenderId:"391232380049",appId:"1:391232380049:web:9df7b0722d63c2ce57b330"},Tg=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ot.apps.length||ot.initializeApp(Ig),this.auth=ot.auth(),this.db=ot.firestore(),this.storage=ot.storage()}var e,n,r;return e=t,(n=[{key:"registrar",value:function(){var t=(0,o.Z)(i().mark((function t(e,n,r){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.auth.createUserWithEmailAndPassword(n,r);case 2:return o=t.sent,t.next=5,o.user.updateProfile({displayName:e});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"login",value:function(){var t=(0,o.Z)(i().mark((function t(e,n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.auth.signInWithEmailAndPassword(e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"cerrarSesion",value:function(){var t=(0,o.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.auth.signOut();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}])&&a(e.prototype,n),r&&a(e,r),t}()),Eg=(0,n(7294).createContext)(null),Sg=Tg},3857:function(t,e,n){"use strict";var r=n(7757),i=n(4575),o=n(3913),a=n(2205),s=n(8585),u=n(9754),c=n(8926);function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var l=n(5318)(n(7294)),f=n(4755);function p(t){return d.apply(this,arguments)}function d(){return(d=c(r.mark((function t(e){var n,i,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.Component,i=e.ctx,t.next=3,(0,f.loadGetInitialProps)(n,i);case 3:return o=t.sent,t.abrupt("return",{pageProps:o});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}f.AppInitialProps,f.NextWebVitalsMetric;var v=function(t){a(n,t);var e=h(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"render",value:function(){var t=this.props,e=t.Component,n=t.pageProps;return l.default.createElement(e,n)}}]),n}(l.default.Component);v.origGetInitialProps=p,v.getInitialProps=p},5391:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return s}});n(2702),n(7544);var r=n(203),i=n(7294);var o=function(){var t=(0,i.useState)(null),e=t[0],n=t[1];return(0,i.useEffect)((function(){var t=r.Z.auth.onAuthStateChanged((function(t){n(t||null)}));return function(){return t()}}),[]),e},a=n(917);var s=function(t){var e=t.Component,n=t.pageProps,i=o();return(0,a.tZ)(r.f.Provider,{value:{firebase:r.Z,usuario:i}},(0,a.tZ)(e,n))}},1780:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(5391)}])},2702:function(){},4155:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,u=[],c=!1,h=-1;function l(){c&&s&&(c=!1,s.length?u=s.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=a(l);c=!0;for(var e=u.length;e;){for(s=u,u=[];++h<e;)s&&s[h].run();h=-1,e=u.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],(function(){return e(1780),e(4651)}));var n=t.O();_N_E=n}]);