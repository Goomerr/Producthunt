(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{5453:function(t,e,n){"use strict";n(7294),n(2674);var r=n(917);var o={name:"3goe6e",styles:"margin-top:5rem;text-align:center"};e.Z=function(){return(0,r.tZ)("h1",{css:o},"La Pagina o el Producto no Existen")}},9296:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return I}});var r=n(6156);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=n(7757),u=n.n(i),s=n(2137),c=n(701),l=n(7294),p=n(1163),d=n(203),f=n(2674),m=n(5453),g=n(8841),b=n.n(g),y=n(5251),Z=n(1655),v=n(4661),h=n(4721),w=n(917);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=(0,c.Z)("div",{target:"e1b9gfdq1"})({name:"uunn56",styles:"@media(min-width:768px){display:grid;grid-template-columns:2fr 1fr;column-gap:2rem;}"}),x=(0,c.Z)("p",{target:"e1b9gfdq0"})({name:"1tqnp1b",styles:"padding:.5rem 2rem;background-color:#da552f;color:#fff;text-transform:uppercase;font-weight:bold;display:inline-block;text-align:center"}),k={name:"1qe6xa8",styles:"font-weight:bold;text-align:center"},P={name:"5yl01g",styles:"margin-top:5rem"},C={name:"1efi8gv",styles:"font-weight:bold"},E={name:"1n3f5ll",styles:"border:1px solid var(--gris3);padding:1rem"},S={name:"k82dzb",styles:"margin:2rem 0"},A={name:"1efi8gv",styles:"font-weight:bold"},N={name:"1efi8gv",styles:"font-weight:bold"},D={name:"3goe6e",styles:"margin-top:5rem;text-align:center"},I=function(){var t=(0,l.useState)({}),e=t[0],n=t[1],o=(0,l.useState)(!1),i=o[0],c=o[1],g=(0,l.useState)({}),_=g[0],I=g[1],q=(0,l.useState)(!0),V=q[0],T=q[1],X=(0,l.useState)(!1),z=X[0],F=X[1],K=(0,l.useState)(""),R=K[0],U=K[1],G=(0,p.useRouter)(),L=G.query.pid,M=(0,l.useContext)(d.f),$=M.firebase,B=M.usuario;if((0,l.useEffect)((function(){L&&V&&function(){var t=(0,s.Z)(u().mark((function t(){var e,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.db.collection("productos").doc(L);case 2:return e=t.sent,t.next=5,e.get();case 5:(r=t.sent).exists?(n(r.data()),T(!1)):(c(!0),T(!1));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[L,V]),0===Object.keys(e).length&&!i)return"Cargando...";var H=e.comentarios,J=e.creado,Q=e.descripcion,W=e.empresa,Y=e.nombre,tt=e.url,et=e.urlimagen,nt=e.votos,rt=e.creador,ot=e.haVotado,at=function(){var t=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(B){t.next=2;break}return t.abrupt("return",G.push("/login"));case 2:if(rt.id===B.uid){t.next=4;break}return t.abrupt("return",G.push("/"));case 4:return t.prev=4,t.next=7,$.db.collection("productos").doc(L).delete();case 7:G.push("/"),T(!0),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}();return(0,w.tZ)(f.Z,null,(0,w.tZ)(l.Fragment,null,i?(0,w.tZ)(m.Z,null):(0,w.tZ)("div",{className:b().contenedor},(0,w.tZ)("h1",{css:D},Y," "),(0,w.tZ)(j,null,(0,w.tZ)("div",null,(0,w.tZ)("p",null,"Pubicado hace:  ",(0,w.tZ)("span",{css:N}," ",(0,y.Z)(new Date(J),{locale:Z.Z}))),(0,w.tZ)("p",null,"Por: ",(0,w.tZ)("span",{css:A},rt.nombre," de ",W)," "),(0,w.tZ)("img",{src:et}),(0,w.tZ)("p",null,Q," "),B&&(0,w.tZ)(l.Fragment,null,(0,w.tZ)("h2",null,"Dejanos tu Opini\xf3n o Comentario "),(0,w.tZ)("form",{onSubmit:function(t){t.preventDefault(),B||G.push("/login"),_.usuarioId=B.uid,_.usuarioNombre=B.displayName;var r=[].concat(a(H),[_]);void 0!==_.mensaje?($.db.collection("productos").doc(L).update({comentarios:r}),n(O(O({},e),{},{comentarios:r})),F(!1),T(!0),U(""),I({})):F(!0)}},(0,w.tZ)(v.zt,null,(0,w.tZ)("input",{type:"text",name:"mensaje",placeholder:"Comentario",value:R,onChange:function(t){I(O(O({},_),{},(0,r.Z)({},t.target.name,t.target.value))),U(t.target.value)}})),z?(0,w.tZ)(v.jj,null,"Escribe un comentario"):null,(0,w.tZ)(v.Kj,{type:"submit",value:"Comentar"}))),(0,w.tZ)("h2",{css:S},"Comentarios"),0===H.length?"A\xfan no hay comentarios":(0,w.tZ)("ul",null,H.map((function(t,e){return(0,w.tZ)("li",{key:"".concat(t.usuarioId,"-").concat(e),css:E},(0,w.tZ)("p",null,t.mensaje," "),(0,w.tZ)("p",null,"Escrito Por:  ",(0,w.tZ)("span",{css:C}," "," "," ",t.usuarioNombre)," "),function(t){if(rt.id==t)return!0}(t.usuarioId)&&(0,w.tZ)(x,null,"Es Creador"))})))),(0,w.tZ)("aside",null,(0,w.tZ)(h.Z,{target:"_blank",bgColor:"true",href:tt},"Visitar URl"),(0,w.tZ)("div",{css:P},(0,w.tZ)("p",{css:k},nt," Votos "),B&&(0,w.tZ)(h.Z,{onClick:function(){if(B||G.push("/login"),!ot.includes(B.uid)){var t=nt+1,r=[].concat(a(ot),[B.uid]);$.db.collection("productos").doc(L).update({votos:t,haVotado:r}),n(O(O({},e),{},{votos:t})),T(!0)}}},"Votar")))),!!B&&(rt.id===B.uid||void 0)&&(0,w.tZ)(h.Z,{onClick:at},"Eliminar Producto"))))}},9012:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos/[pid]",function(){return n(9296)}])},8841:function(t){t.exports={listado_productos:"App_listado_productos__3Xo2b",contenedor:"App_contenedor__1nG4T",bg_white:"App_bg_white__1-aiK"}}},function(t){t.O(0,[302,485,674,888,774,179],(function(){return e=9012,t(t.s=e);var e}));var e=t.O();_N_E=e}]);